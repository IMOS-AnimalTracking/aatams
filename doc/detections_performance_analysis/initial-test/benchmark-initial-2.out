
set role to aatams;
set role to aatams;
SET
-- Low selectivity filtering (large number of rows returned for each filter)
-- Test Case 1 - 2716283 rows limited to first 100
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=1455.68..2671.07 rows=100 width=279) (actual time=4089.563..4091.600 rows=100 loops=1)
   ->  Nested Loop Left Join  (cost=1455.68..2977903.27 rows=244897 width=279) (actual time=4089.561..4091.575 rows=100 loops=1)
         ->  Hash Left Join  (cost=1455.39..1569277.70 rows=244897 width=239) (actual time=4083.319..4084.158 rows=100 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=1334.87..1564871.48 rows=244897 width=239) (actual time=4081.092..4081.854 rows=100 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=1133.67..1560384.59 rows=244897 width=215) (actual time=4077.481..4078.159 rows=100 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=988.41..1553705.90 rows=244897 width=215) (actual time=4074.874..4075.468 rows=100 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=712.80..1548226.23 rows=244897 width=215) (actual time=4071.361..4071.877 rows=100 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=532.39..1539554.49 rows=230185 width=193) (actual time=4065.343..4065.745 rows=100 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=521.50..1536364.70 rows=233880 width=187) (actual time=4065.118..4065.458 rows=100 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=519.35..1531388.23 rows=702807 width=168) (actual time=4065.056..4065.344 rows=100 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=460.17..1521665.45 rows=702807 width=168) (actual time=4064.069..4064.287 rows=100 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=458.81..1512000.50 rows=702807 width=171) (actual time=4064.025..4064.179 rows=100 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.023..1972.045 rows=11768490 loops=1)
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=7.579..7.579 rows=282 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 43kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.940..7.385 rows=282 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.001..2.191 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.915..3.915 rows=282 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.242..3.723 rows=282 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.857 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.199..0.199 rows=45 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.099..0.176 rows=45 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.053..0.079 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.003..0.015 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.025..0.025 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.014..0.024 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.039..0.078 rows=45 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.022..0.022 rows=45 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.010..0.010 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.006 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.969..0.969 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.003..0.554 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.038..0.038 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.019 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.179..0.179 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.117 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=5.946..5.946 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=2.280..4.255 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.483..3.483 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.573 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=2.588..2.588 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.023..1.466 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=3.590..3.590 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.016..2.341 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=2.207..2.207 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.007..1.093 rows=4023 loops=1)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.004..0.004 rows=1 loops=100)
               Index Cond: (animal.species_id = id)
 Total runtime: 4092.324 ms
(78 rows)

-- Test Case 2 - 3913743 rows limited to first 100
explain analyze select * from detection_extract_test_view
where spcode = '37018030'
limit 100;
                                                                                                     QUERY PLAN                                                                                                      
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=4741.75..11153.44 rows=100 width=279) (actual time=99.487..100.570 rows=100 loops=1)
   ->  Hash Left Join  (cost=4741.75..5892981.17 rows=91836 width=279) (actual time=99.485..100.540 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018030'::text)
         Rows Removed by Filter: 578
         ->  Hash Left Join  (cost=2253.55..4336436.41 rows=18367253 width=239) (actual time=46.834..49.497 rows=814 loops=1)
               Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
               ->  Hash Join  (cost=1000.03..3698334.06 rows=17263859 width=193) (actual time=23.351..25.483 rows=814 loops=1)
                     Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                     ->  Hash Join  (cost=989.14..3459905.83 rows=17541004 width=187) (actual time=23.191..24.954 rows=814 loops=1)
                           Hash Cond: (receiver.organisation_id = organisation.id)
                           ->  Hash Join  (cost=986.99..3086829.12 rows=52710540 width=168) (actual time=23.146..24.551 rows=814 loops=1)
                                 Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                 ->  Hash Join  (cost=927.81..2362000.01 rows=52710540 width=168) (actual time=22.342..23.321 rows=814 loops=1)
                                       Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                       ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.003..0.170 rows=814 loops=1)
                                       ->  Hash  (cost=856.44..856.44 rows=5710 width=132) (actual time=22.322..22.322 rows=5710 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 969kB
                                             ->  Hash Join  (cost=382.84..856.44 rows=5710 width=132) (actual time=6.471..18.143 rows=5710 loops=1)
                                                   Hash Cond: (receiver.model_id = device_model.id)
                                                   ->  Hash Join  (cost=381.48..776.56 rows=5710 width=135) (actual time=6.453..15.744 rows=5710 loops=1)
                                                         Hash Cond: (receiver_deployment.receiver_id = receiver.id)
                                                         ->  Hash Join  (cost=105.87..379.62 rows=5710 width=120) (actual time=2.467..8.444 rows=5710 loops=1)
                                                               Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                               ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.924 rows=5710 loops=1)
                                                               ->  Hash  (cost=81.32..81.32 rows=1964 width=104) (actual time=2.455..2.455 rows=1964 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 280kB
                                                                     ->  Hash Join  (cost=8.68..81.32 rows=1964 width=104) (actual time=0.212..1.586 rows=1964 loops=1)
                                                                           Hash Cond: (installation_station.installation_id = installation.id)
                                                                           ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.031..0.478 rows=1964 loops=1)
                                                                           ->  Hash  (cost=7.30..7.30 rows=110 width=63) (actual time=0.174..0.174 rows=110 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 12kB
                                                                                 ->  Hash Join  (cost=2.69..7.30 rows=110 width=63) (actual time=0.063..0.125 rows=110 loops=1)
                                                                                       Hash Cond: (installation.project_id = receiver_project.id)
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.015 rows=110 loops=1)
                                                                                       ->  Hash  (cost=1.75..1.75 rows=75 width=39) (actual time=0.044..0.044 rows=75 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                             ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.003..0.017 rows=75 loops=1)
                                                         ->  Hash  (cost=185.27..185.27 rows=7227 width=31) (actual time=3.973..3.973 rows=7227 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 415kB
                                                               ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.003..2.072 rows=7227 loops=1)
                                                   ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.005 rows=16 loops=1)
                                 ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.793..0.793 rows=1519 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                       ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.422 rows=1519 loops=1)
                           ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.018 rows=51 loops=1)
                     ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.146..0.146 rows=173 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 10kB
                           ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.091 rows=173 loops=1)
               ->  Hash  (cost=1187.18..1187.18 rows=5307 width=46) (actual time=23.466..23.466 rows=5488 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 386kB
                     ->  Hash Right Join  (cost=890.51..1187.18 rows=5307 width=46) (actual time=13.575..21.262 rows=5488 loops=1)
                           Hash Cond: (surgery.tag_id = tag.id)
                           ->  Hash Left Join  (cost=321.72..555.25 rows=3923 width=40) (actual time=4.697..9.872 rows=3923 loops=1)
                                 Hash Cond: (animal_release.animal_id = animal.id)
                                 ->  Hash Left Join  (cost=201.20..366.08 rows=3923 width=40) (actual time=2.775..6.023 rows=3923 loops=1)
                                       Hash Cond: (surgery.release_id = animal_release.id)
                                       ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.003..0.637 rows=3923 loops=1)
                                       ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.745..2.745 rows=3920 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 241kB
                                             ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.563 rows=3920 loops=1)
                                 ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.902..1.902 rows=4023 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 189kB
                                       ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.824 rows=4023 loops=1)
                           ->  Hash  (cost=502.45..502.45 rows=5307 width=22) (actual time=8.857..8.857 rows=5307 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                 ->  Hash Left Join  (cost=275.61..502.45 rows=5307 width=22) (actual time=3.461..7.262 rows=5307 loops=1)
                                       Hash Cond: (sensor.tag_id = tag.id)
                                       ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.004..0.744 rows=5307 loops=1)
                                       ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.434..3.434 rows=7227 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                             ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.003..1.511 rows=7227 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=49.916..49.916 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.036..31.994 rows=36587 loops=1)
 Total runtime: 102.208 ms
(80 rows)

-- Test Case 3 - 17098775 rows limited to first 100
explain analyze select * from detection_extract_test_view
where timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                         QUERY PLAN                                                                                                          
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=2.82..5771.79 rows=100 width=279) (actual time=1.149..21.094 rows=100 loops=1)
   ->  Nested Loop Left Join  (cost=2.82..324538024.05 rows=5625584 width=279) (actual time=1.148..21.066 rows=100 loops=1)
         ->  Nested Loop Left Join  (cost=2.53..292180169.69 rows=5625584 width=239) (actual time=1.099..19.970 rows=100 loops=1)
               ->  Nested Loop  (cost=1.12..162298013.33 rows=5287633 width=193) (actual time=0.976..17.839 rows=100 loops=1)
                     Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
                     Rows Removed by Join Filter: 17190
                     ->  Nested Loop  (cost=1.12..148356319.96 rows=5372518 width=187) (actual time=0.827..13.282 rows=100 loops=1)
                           Join Filter: (receiver.organisation_id = organisation.id)
                           Rows Removed by Join Filter: 4971
                           ->  Nested Loop  (cost=1.12..136005881.39 rows=16144362 width=168) (actual time=0.806..11.955 rows=100 loops=1)
                                 ->  Merge Join  (cost=0.85..52810510.08 rows=16144362 width=168) (actual time=0.771..11.441 rows=100 loops=1)
                                       Merge Cond: (receiver_deployment.id = valid_detection.receiver_deployment_id)
                                       ->  Nested Loop  (cost=0.28..810484.09 rows=5710 width=132) (actual time=0.752..6.668 rows=2 loops=1)
                                             Join Filter: (receiver.model_id = device_model.id)
                                             Rows Removed by Join Filter: 16
                                             ->  Nested Loop  (cost=0.28..809112.49 rows=5710 width=135) (actual time=0.748..6.644 rows=2 loops=1)
                                                   Join Filter: (receiver_deployment.receiver_id = receiver.id)
                                                   Rows Removed by Join Filter: 7243
                                                   ->  Nested Loop  (cost=0.28..189916.61 rows=5710 width=120) (actual time=0.732..1.787 rows=2 loops=1)
                                                         Join Filter: (installation.project_id = receiver_project.id)
                                                         Rows Removed by Join Filter: 86
                                                         ->  Nested Loop  (cost=0.28..183490.92 rows=5710 width=89) (actual time=0.720..1.730 rows=2 loops=1)
                                                               Join Filter: (installation_station.installation_id = installation.id)
                                                               Rows Removed by Join Filter: 112
                                                               ->  Nested Loop  (cost=0.28..174066.04 rows=5710 width=73) (actual time=0.713..1.654 rows=2 loops=1)
                                                                     Join Filter: (receiver_deployment.station_id = installation_station.id)
                                                                     Rows Removed by Join Filter: 2873
                                                                     ->  Index Scan using receiver_deployment_pkey on receiver_deployment  (cost=0.28..5798.89 rows=5710 width=24) (actual time=0.009..0.013 rows=2 loops=1)
                                                                     ->  Materialize  (cost=0.00..55.46 rows=1964 width=57) (actual time=0.005..0.620 rows=1438 loops=2)
                                                                           ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.005..0.505 rows=1964 loops=1)
                                                               ->  Materialize  (cost=0.00..3.65 rows=110 width=32) (actual time=0.002..0.029 rows=57 loops=2)
                                                                     ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.023 rows=110 loops=1)
                                                         ->  Materialize  (cost=0.00..2.12 rows=75 width=39) (actual time=0.001..0.020 rows=44 loops=2)
                                                               ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.002..0.018 rows=75 loops=1)
                                                   ->  Materialize  (cost=0.00..221.40 rows=7227 width=31) (actual time=0.002..1.985 rows=3622 loops=2)
                                                         ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.001..2.034 rows=7227 loops=1)
                                             ->  Materialize  (cost=0.00..1.24 rows=16 width=13) (actual time=0.001..0.009 rows=9 loops=2)
                                                   ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.010 rows=16 loops=1)
                                       ->  Index Scan using valid_detection_receiver_deployment_index on valid_detection  (cost=0.56..51801897.72 rows=16144362 width=52) (actual time=0.014..4.707 rows=100 loops=1)
                                             Filter: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                             Rows Removed by Filter: 2460
                                 ->  Index Scan using receiver_download_file_pkey on receiver_download_file  (cost=0.28..5.14 rows=1 width=16) (actual time=0.004..0.004 rows=1 loops=100)
                                       Index Cond: (id = valid_detection.receiver_download_id)
                           ->  Materialize  (cost=0.00..1.77 rows=51 width=35) (actual time=0.000..0.005 rows=51 loops=100)
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.017 rows=51 loops=1)
                     ->  Materialize  (cost=0.00..9.60 rows=173 width=22) (actual time=0.000..0.021 rows=173 loops=100)
                           ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.002..0.084 rows=173 loops=1)
               ->  Nested Loop Left Join  (cost=1.41..24.55 rows=1 width=46) (actual time=0.017..0.020 rows=1 loops=100)
                     ->  Nested Loop Left Join  (cost=1.12..19.26 rows=1 width=46) (actual time=0.014..0.016 rows=1 loops=100)
                           ->  Nested Loop Left Join  (cost=0.84..13.70 rows=1 width=22) (actual time=0.011..0.012 rows=1 loops=100)
                                 ->  Nested Loop Left Join  (cost=0.56..8.35 rows=1 width=22) (actual time=0.007..0.008 rows=1 loops=100)
                                       ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.50 rows=1 width=22) (actual time=0.004..0.004 rows=1 loops=100)
                                             Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                       ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.002..0.003 rows=1 loops=99)
                                             Index Cond: (id = sensor.tag_id)
                                             Heap Fetches: 0
                                 ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=99)
                                       Index Cond: (tag.id = tag_id)
                           ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.002..0.003 rows=1 loops=99)
                                 Index Cond: (surgery.release_id = id)
                     ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=99)
                           Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.002..0.003 rows=1 loops=100)
               Index Cond: (animal.species_id = id)
 Total runtime: 21.675 ms
(65 rows)

-- Test Case 4 -  2716283 ^ 3913743 -> 1420919 rows limited to first 100
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and spcode = '37018030'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=3943.60..133755.52 rows=100 width=279) (actual time=60.850..62.373 rows=100 loops=1)
   ->  Hash Left Join  (cost=3943.60..1592841.51 rows=1224 width=279) (actual time=60.848..62.345 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018030'::text)
         Rows Removed by Filter: 46
         ->  Hash Left Join  (cost=1455.39..1569277.70 rows=244897 width=239) (actual time=19.136..20.234 rows=146 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=1334.87..1564871.48 rows=244897 width=239) (actual time=17.279..18.263 rows=146 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=1133.67..1560384.59 rows=244897 width=215) (actual time=14.782..15.656 rows=146 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=988.41..1553705.90 rows=244897 width=215) (actual time=12.865..13.648 rows=146 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=712.80..1548226.23 rows=244897 width=215) (actual time=9.778..10.442 rows=146 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=532.39..1539554.49 rows=230185 width=193) (actual time=7.052..7.602 rows=146 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=521.50..1536364.70 rows=233880 width=187) (actual time=6.890..7.341 rows=146 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=519.35..1531388.23 rows=702807 width=168) (actual time=6.846..7.224 rows=146 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=460.17..1521665.45 rows=702807 width=168) (actual time=6.054..6.311 rows=146 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=458.81..1512000.50 rows=702807 width=171) (actual time=6.036..6.220 rows=146 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.002..0.109 rows=814 loops=1)
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.832..5.832 rows=282 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 43kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.443..5.690 rows=282 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..0.885 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.432..3.432 rows=282 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.171..3.284 rows=282 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.758 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.141..0.141 rows=45 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.064..0.127 rows=45 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.035..0.061 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.013 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.017 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.026..0.045 rows=45 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.016..0.016 rows=45 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.010..0.010 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.006 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.784..0.784 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.440 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.034..0.034 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.015 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.137..0.137 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.090 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.712..2.712 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.004..1.393 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.076..3.076 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.003..1.433 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=1.906..1.906 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.004..0.942 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.489..2.489 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.003..1.558 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.847..1.847 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.004..0.834 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.372..41.372 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.005..24.339 rows=36587 loops=1)
 Total runtime: 63.819 ms
(82 rows)

-- Test Case 5 - 2716283 ^ 17098775 -> 902906 rows limited to first 100
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                               QUERY PLAN                                                                                                                
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=463.19..7470.65 rows=100 width=279) (actual time=59.470..68.620 rows=100 loops=1)
   ->  Nested Loop Left Join  (cost=463.19..5256616.62 rows=75008 width=279) (actual time=59.468..68.592 rows=100 loops=1)
         ->  Nested Loop Left Join  (cost=462.90..4825177.33 rows=75008 width=239) (actual time=59.399..67.516 rows=100 loops=1)
               ->  Nested Loop  (cost=461.50..3093409.68 rows=70502 width=193) (actual time=59.317..65.465 rows=100 loops=1)
                     Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
                     Rows Removed by Join Filter: 17190
                     ->  Nested Loop  (cost=461.50..2907510.29 rows=71634 width=187) (actual time=59.171..61.189 rows=100 loops=1)
                           Join Filter: (receiver.organisation_id = organisation.id)
                           Rows Removed by Join Filter: 4971
                           ->  Nested Loop  (cost=461.50..2742836.28 rows=215258 width=168) (actual time=59.138..59.845 rows=100 loops=1)
                                 ->  Hash Join  (cost=461.22..1633565.49 rows=215258 width=168) (actual time=59.083..59.342 rows=100 loops=1)
                                       Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                       ->  Seq Scan on valid_detection  (cost=0.00..1570414.10 rows=16144362 width=52) (actual time=0.021..53.178 rows=768 loops=1)
                                             Filter: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                             Rows Removed by Filter: 141377
                                       ->  Hash  (cost=460.27..460.27 rows=76 width=132) (actual time=5.945..5.945 rows=282 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 42kB
                                             ->  Hash Join  (cost=246.09..460.27 rows=76 width=132) (actual time=3.365..5.791 rows=282 loops=1)
                                                   Hash Cond: (receiver.model_id = device_model.id)
                                                   ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.346..5.656 rows=282 loops=1)
                                                         Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                         ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..0.906 rows=7227 loops=1)
                                                         ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.334..3.334 rows=282 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                               ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.165..3.205 rows=282 loops=1)
                                                                     Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                     ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.725 rows=5710 loops=1)
                                                                     ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.135..0.135 rows=45 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                           ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.060..0.120 rows=45 loops=1)
                                                                                 ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.032..0.057 rows=1 loops=1)
                                                                                       Hash Cond: (installation.project_id = receiver_project.id)
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.015 rows=110 loops=1)
                                                                                       ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.016..0.016 rows=1 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                             ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.006..0.016 rows=1 loops=1)
                                                                                                   Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                   Rows Removed by Filter: 74
                                                                                 ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.025..0.045 rows=45 loops=1)
                                                                                       Recheck Cond: (installation_id = installation.id)
                                                                                       ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.015..0.015 rows=45 loops=1)
                                                                                             Index Cond: (installation_id = installation.id)
                                                   ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.012..0.012 rows=16 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.007 rows=16 loops=1)
                                 ->  Index Scan using receiver_download_file_pkey on receiver_download_file  (cost=0.28..5.14 rows=1 width=16) (actual time=0.004..0.004 rows=1 loops=100)
                                       Index Cond: (id = valid_detection.receiver_download_id)
                           ->  Materialize  (cost=0.00..1.77 rows=51 width=35) (actual time=0.000..0.005 rows=51 loops=100)
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.004..0.020 rows=51 loops=1)
                     ->  Materialize  (cost=0.00..9.60 rows=173 width=22) (actual time=0.000..0.016 rows=173 loops=100)
                           ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.003..0.094 rows=173 loops=1)
               ->  Nested Loop Left Join  (cost=1.41..24.55 rows=1 width=46) (actual time=0.017..0.020 rows=1 loops=100)
                     ->  Nested Loop Left Join  (cost=1.12..19.26 rows=1 width=46) (actual time=0.014..0.016 rows=1 loops=100)
                           ->  Nested Loop Left Join  (cost=0.84..13.70 rows=1 width=22) (actual time=0.010..0.012 rows=1 loops=100)
                                 ->  Nested Loop Left Join  (cost=0.56..8.35 rows=1 width=22) (actual time=0.007..0.008 rows=1 loops=100)
                                       ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.50 rows=1 width=22) (actual time=0.004..0.004 rows=1 loops=100)
                                             Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                       ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.002..0.002 rows=1 loops=100)
                                             Index Cond: (id = sensor.tag_id)
                                             Heap Fetches: 0
                                 ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=100)
                                       Index Cond: (tag.id = tag_id)
                           ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.002..0.003 rows=1 loops=100)
                                 Index Cond: (surgery.release_id = id)
                     ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=100)
                           Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.002..0.003 rows=1 loops=100)
               Index Cond: (animal.species_id = id)
 Total runtime: 68.983 ms
(69 rows)

-- Test Case 6 - 3913743 ^ 17098775 -> 2233756 rows limited to first 100
explain analyze select * from detection_extract_test_view
where spcode = '37018030'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                     QUERY PLAN                                                                                                      
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=348654.03..357276.65 rows=100 width=279) (actual time=3537.637..3538.775 rows=100 loops=1)
   ->  Hash Left Join  (cost=348654.03..2774024.89 rows=28128 width=279) (actual time=3537.636..3538.751 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018030'::text)
         Rows Removed by Filter: 1039
         ->  Hash Left Join  (cost=346165.82..2295305.48 rows=5625584 width=239) (actual time=3491.504..3495.888 rows=1139 loops=1)
               Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
               ->  Hash Join  (cost=344912.31..2098995.76 rows=5287633 width=193) (actual time=3467.989..3471.616 rows=1139 loops=1)
                     Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                     ->  Hash Join  (cost=344901.41..2025961.60 rows=5372518 width=187) (actual time=3467.838..3470.951 rows=1139 loops=1)
                           Hash Cond: (receiver.organisation_id = organisation.id)
                           ->  Hash Join  (cost=344899.27..1911692.91 rows=16144362 width=168) (actual time=3467.790..3470.326 rows=1139 loops=1)
                                 Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                 ->  Hash Join  (cost=344840.09..1689648.76 rows=16144362 width=168) (actual time=3467.002..3469.042 rows=1139 loops=1)
                                       Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                       ->  Bitmap Heap Scan on valid_detection  (cost=343912.28..1365833.71 rows=16144362 width=52) (actual time=3445.171..3446.325 rows=1139 loops=1)
                                             Recheck Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                             Rows Removed by Index Recheck: 1277
                                             ->  Bitmap Index Scan on valid_timestamp_index  (cost=0.00..339876.18 rows=16144362 width=0) (actual time=3443.572..3443.572 rows=16316319 loops=1)
                                                   Index Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                       ->  Hash  (cost=856.44..856.44 rows=5710 width=132) (actual time=21.810..21.810 rows=5710 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 969kB
                                             ->  Hash Join  (cost=382.84..856.44 rows=5710 width=132) (actual time=6.252..17.855 rows=5710 loops=1)
                                                   Hash Cond: (receiver.model_id = device_model.id)
                                                   ->  Hash Join  (cost=381.48..776.56 rows=5710 width=135) (actual time=6.234..15.515 rows=5710 loops=1)
                                                         Hash Cond: (receiver_deployment.receiver_id = receiver.id)
                                                         ->  Hash Join  (cost=105.87..379.62 rows=5710 width=120) (actual time=2.260..8.353 rows=5710 loops=1)
                                                               Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                               ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.001..0.862 rows=5710 loops=1)
                                                               ->  Hash  (cost=81.32..81.32 rows=1964 width=104) (actual time=2.250..2.250 rows=1964 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 280kB
                                                                     ->  Hash Join  (cost=8.68..81.32 rows=1964 width=104) (actual time=0.156..1.439 rows=1964 loops=1)
                                                                           Hash Cond: (installation_station.installation_id = installation.id)
                                                                           ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.003..0.262 rows=1964 loops=1)
                                                                           ->  Hash  (cost=7.30..7.30 rows=110 width=63) (actual time=0.147..0.147 rows=110 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 12kB
                                                                                 ->  Hash Join  (cost=2.69..7.30 rows=110 width=63) (actual time=0.051..0.112 rows=110 loops=1)
                                                                                       Hash Cond: (installation.project_id = receiver_project.id)
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.019 rows=110 loops=1)
                                                                                       ->  Hash  (cost=1.75..1.75 rows=75 width=39) (actual time=0.038..0.038 rows=75 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                             ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.002..0.020 rows=75 loops=1)
                                                         ->  Hash  (cost=185.27..185.27 rows=7227 width=31) (actual time=3.962..3.962 rows=7227 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 415kB
                                                               ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..2.101 rows=7227 loops=1)
                                                   ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.006 rows=16 loops=1)
                                 ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.776..0.776 rows=1519 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                       ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.414 rows=1519 loops=1)
                           ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.016 rows=51 loops=1)
                     ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.135..0.135 rows=173 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 10kB
                           ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.087 rows=173 loops=1)
               ->  Hash  (cost=1187.18..1187.18 rows=5307 width=46) (actual time=23.472..23.472 rows=5488 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 386kB
                     ->  Hash Right Join  (cost=890.51..1187.18 rows=5307 width=46) (actual time=13.617..21.132 rows=5488 loops=1)
                           Hash Cond: (surgery.tag_id = tag.id)
                           ->  Hash Left Join  (cost=321.72..555.25 rows=3923 width=40) (actual time=4.750..9.819 rows=3923 loops=1)
                                 Hash Cond: (animal_release.animal_id = animal.id)
                                 ->  Hash Left Join  (cost=201.20..366.08 rows=3923 width=40) (actual time=2.783..6.090 rows=3923 loops=1)
                                       Hash Cond: (surgery.release_id = animal_release.id)
                                       ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.002..0.624 rows=3923 loops=1)
                                       ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.750..2.750 rows=3920 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 241kB
                                             ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.583 rows=3920 loops=1)
                                 ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.948..1.948 rows=4023 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 189kB
                                       ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.836 rows=4023 loops=1)
                           ->  Hash  (cost=502.45..502.45 rows=5307 width=22) (actual time=8.847..8.847 rows=5307 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                 ->  Hash Left Join  (cost=275.61..502.45 rows=5307 width=22) (actual time=3.519..7.285 rows=5307 loops=1)
                                       Hash Cond: (sensor.tag_id = tag.id)
                                       ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.007..0.748 rows=5307 loops=1)
                                       ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.488..3.488 rows=7227 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                             ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.005..1.558 rows=7227 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.727..41.727 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.006..24.419 rows=36587 loops=1)
 Total runtime: 3540.198 ms
(84 rows)

-- Test Case 7 - 2716283 ^ 3913743 ^ 17098775 -> 690003 rows limited to first 100
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and spcode = '37018030'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=347855.87..643470.25 rows=100 width=279) (actual time=3099.562..3101.057 rows=100 loops=1)
   ->  Hash Left Join  (cost=347855.87..1456409.78 rows=375 width=279) (actual time=3099.560..3101.031 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018030'::text)
         Rows Removed by Filter: 225
         ->  Hash Left Join  (cost=345367.67..1447217.10 rows=75008 width=239) (actual time=3056.677..3059.018 rows=325 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=345247.15..1445783.94 rows=75008 width=239) (actual time=3054.666..3056.808 rows=325 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=345045.95..1444270.10 rows=75008 width=215) (actual time=3051.926..3053.850 rows=325 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=344900.68..1442123.76 rows=75008 width=215) (actual time=3049.889..3051.598 rows=325 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=344625.07..1440254.23 rows=75008 width=215) (actual time=3046.468..3047.969 rows=325 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=344444.67..1437473.06 rows=70502 width=193) (actual time=3043.456..3044.694 rows=325 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=344433.77..1436488.52 rows=71634 width=187) (actual time=3043.303..3044.378 rows=325 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=344431.63..1434962.82 rows=215258 width=168) (actual time=3043.260..3044.160 rows=325 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=344372.45..1431943.84 rows=215258 width=168) (actual time=3042.510..3043.233 rows=325 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=344371.09..1428982.69 rows=215258 width=171) (actual time=3042.491..3043.057 rows=325 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Bitmap Heap Scan on valid_detection  (cost=343912.28..1365833.71 rows=16144362 width=52) (actual time=3035.886..3036.821 rows=1139 loops=1)
                                                                           Recheck Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                           Rows Removed by Index Recheck: 1277
                                                                           ->  Bitmap Index Scan on valid_timestamp_index  (cost=0.00..339876.18 rows=16144362 width=0) (actual time=3034.477..3034.477 rows=16316319 loops=1)
                                                                                 Index Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.886..5.886 rows=282 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 43kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.415..5.744 rows=282 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..0.945 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.403..3.403 rows=282 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.174..3.280 rows=282 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.001..0.773 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.144..0.144 rows=45 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.067..0.129 rows=45 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.035..0.061 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.016 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.018 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.026..0.047 rows=45 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.019..0.019 rows=45 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.003 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.741..0.741 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.406 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.034..0.034 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.017 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.141..0.141 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.093 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.986..2.986 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.007..1.380 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.396..3.396 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.499 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=2.015..2.015 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.004..0.951 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.718..2.718 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.550 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.992..1.992 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.004..0.837 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.216..41.216 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.006..24.165 rows=36587 loops=1)
 Total runtime: 3102.506 ms
(86 rows)

 
-- High selectivity filtering (small number of rows returned for each filter)
-- Test Case 8 - 5909 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=1455.68..2671.07 rows=100 width=279) (actual time=4665.349..4667.172 rows=100 loops=1)
   ->  Nested Loop Left Join  (cost=1455.68..2977903.27 rows=244897 width=279) (actual time=4665.347..4667.142 rows=100 loops=1)
         ->  Hash Left Join  (cost=1455.39..1569277.70 rows=244897 width=239) (actual time=4665.254..4666.041 rows=100 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=1334.87..1564871.48 rows=244897 width=239) (actual time=4663.304..4663.987 rows=100 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=1133.67..1560384.59 rows=244897 width=215) (actual time=4660.555..4661.191 rows=100 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=988.41..1553705.90 rows=244897 width=215) (actual time=4658.632..4659.200 rows=100 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=712.80..1548226.23 rows=244897 width=215) (actual time=4655.630..4656.155 rows=100 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=532.39..1539554.49 rows=230185 width=193) (actual time=4652.864..4653.283 rows=100 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=521.50..1536364.70 rows=233880 width=187) (actual time=4652.714..4653.062 rows=100 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=519.35..1531388.23 rows=702807 width=168) (actual time=4652.671..4652.954 rows=100 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=460.17..1521665.45 rows=702807 width=168) (actual time=4651.920..4652.142 rows=100 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=458.81..1512000.50 rows=702807 width=171) (actual time=4651.901..4652.054 rows=100 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.003..2254.852 rows=13260223 loops=1)
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.353..5.353 rows=64 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 11kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.194..5.319 rows=64 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.001..0.911 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.157..3.157 rows=64 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.206..3.126 rows=64 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.726 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.107..0.107 rows=15 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.063..0.100 rows=15 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.036..0.060 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.014 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.019..0.019 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.018 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.022..0.030 rows=15 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.014..0.014 rows=15 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.004 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.741..0.741 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.003..0.423 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.034..0.034 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.018 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.136..0.136 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.006..0.094 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.740..2.740 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.006..1.394 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=2.987..2.987 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.470 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=1.910..1.910 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.003..0.897 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.737..2.737 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.536 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.930..1.930 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.828 rows=4023 loops=1)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.003..0.004 rows=1 loops=100)
               Index Cond: (animal.species_id = id)
 Total runtime: 4667.527 ms
(78 rows)

-- Test Case 9 - 2153 rows
set geqo_threshold to 12;
SET
explain analyze select * from detection_extract_test_view
where spcode = '37018003'
limit 100;
                                                                                                     QUERY PLAN                                                                                                      
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=4741.75..11153.44 rows=100 width=279) (actual time=88.458..89.473 rows=100 loops=1)
   ->  Hash Left Join  (cost=4741.75..5892981.17 rows=91836 width=279) (actual time=88.456..89.452 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018003'::text)
         Rows Removed by Filter: 223
         ->  Hash Left Join  (cost=2253.55..4336436.41 rows=18367253 width=239) (actual time=46.481..47.609 rows=326 loops=1)
               Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
               ->  Hash Join  (cost=1000.03..3698334.06 rows=17263859 width=193) (actual time=23.100..23.977 rows=326 loops=1)
                     Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                     ->  Hash Join  (cost=989.14..3459905.83 rows=17541004 width=187) (actual time=22.948..23.677 rows=326 loops=1)
                           Hash Cond: (receiver.organisation_id = organisation.id)
                           ->  Hash Join  (cost=986.99..3086829.12 rows=52710540 width=168) (actual time=22.904..23.485 rows=326 loops=1)
                                 Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                 ->  Hash Join  (cost=927.81..2362000.01 rows=52710540 width=168) (actual time=22.144..22.559 rows=326 loops=1)
                                       Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                       ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.003..0.069 rows=326 loops=1)
                                       ->  Hash  (cost=856.44..856.44 rows=5710 width=132) (actual time=22.123..22.123 rows=5710 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 969kB
                                             ->  Hash Join  (cost=382.84..856.44 rows=5710 width=132) (actual time=6.361..17.916 rows=5710 loops=1)
                                                   Hash Cond: (receiver.model_id = device_model.id)
                                                   ->  Hash Join  (cost=381.48..776.56 rows=5710 width=135) (actual time=6.343..15.484 rows=5710 loops=1)
                                                         Hash Cond: (receiver_deployment.receiver_id = receiver.id)
                                                         ->  Hash Join  (cost=105.87..379.62 rows=5710 width=120) (actual time=2.258..8.140 rows=5710 loops=1)
                                                               Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                               ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.912 rows=5710 loops=1)
                                                               ->  Hash  (cost=81.32..81.32 rows=1964 width=104) (actual time=2.248..2.248 rows=1964 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 280kB
                                                                     ->  Hash Join  (cost=8.68..81.32 rows=1964 width=104) (actual time=0.174..1.410 rows=1964 loops=1)
                                                                           Hash Cond: (installation_station.installation_id = installation.id)
                                                                           ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.003..0.284 rows=1964 loops=1)
                                                                           ->  Hash  (cost=7.30..7.30 rows=110 width=63) (actual time=0.151..0.151 rows=110 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 12kB
                                                                                 ->  Hash Join  (cost=2.69..7.30 rows=110 width=63) (actual time=0.053..0.122 rows=110 loops=1)
                                                                                       Hash Cond: (installation.project_id = receiver_project.id)
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.011 rows=110 loops=1)
                                                                                       ->  Hash  (cost=1.75..1.75 rows=75 width=39) (actual time=0.039..0.039 rows=75 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                             ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.002..0.011 rows=75 loops=1)
                                                         ->  Hash  (cost=185.27..185.27 rows=7227 width=31) (actual time=4.070..4.070 rows=7227 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 415kB
                                                               ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..2.091 rows=7227 loops=1)
                                                   ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.010..0.010 rows=16 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.006 rows=16 loops=1)
                                 ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.751..0.751 rows=1519 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                       ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.449 rows=1519 loops=1)
                           ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.034..0.034 rows=51 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.016 rows=51 loops=1)
                     ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.138..0.138 rows=173 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 10kB
                           ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.006..0.090 rows=173 loops=1)
               ->  Hash  (cost=1187.18..1187.18 rows=5307 width=46) (actual time=23.354..23.354 rows=5488 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 386kB
                     ->  Hash Right Join  (cost=890.51..1187.18 rows=5307 width=46) (actual time=13.531..21.117 rows=5488 loops=1)
                           Hash Cond: (surgery.tag_id = tag.id)
                           ->  Hash Left Join  (cost=321.72..555.25 rows=3923 width=40) (actual time=4.692..9.690 rows=3923 loops=1)
                                 Hash Cond: (animal_release.animal_id = animal.id)
                                 ->  Hash Left Join  (cost=201.20..366.08 rows=3923 width=40) (actual time=2.762..5.969 rows=3923 loops=1)
                                       Hash Cond: (surgery.release_id = animal_release.id)
                                       ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.003..0.648 rows=3923 loops=1)
                                       ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.727..2.727 rows=3920 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 241kB
                                             ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.545 rows=3920 loops=1)
                                 ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.910..1.910 rows=4023 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 189kB
                                       ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.819 rows=4023 loops=1)
                           ->  Hash  (cost=502.45..502.45 rows=5307 width=22) (actual time=8.817..8.817 rows=5307 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                 ->  Hash Left Join  (cost=275.61..502.45 rows=5307 width=22) (actual time=3.435..7.195 rows=5307 loops=1)
                                       Hash Cond: (sensor.tag_id = tag.id)
                                       ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.004..0.782 rows=5307 loops=1)
                                       ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.407..3.407 rows=7227 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                             ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.496 rows=7227 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=40.986..40.986 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.007..23.892 rows=36587 loops=1)
 Total runtime: 91.022 ms
(80 rows)

-- Test Case 10 - 1065 rows
explain analyze select * from detection_extract_test_view
  where timestamp between '2014-07-30 12:00:00+00' and '2014-07-30 18:00:00+00'
limit 100;
                                                                                                                         QUERY PLAN                                                                                                                          
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=1609.87..2935.20 rows=100 width=279) (actual time=24.115..26.481 rows=100 loops=1)
   ->  Nested Loop Left Join  (cost=1609.87..8077.48 rows=488 width=279) (actual time=24.113..26.454 rows=100 loops=1)
         ->  Hash Join  (cost=1609.58..5270.55 rows=488 width=239) (actual time=24.020..25.243 rows=100 loops=1)
               Hash Cond: (receiver.organisation_id = organisation.id)
               ->  Hash Left Join  (cost=1607.43..5258.03 rows=1466 width=220) (actual time=23.959..25.114 rows=100 loops=1)
                     Hash Cond: (animal_release.animal_id = animal.id)
                     ->  Hash Left Join  (cost=1486.91..5111.85 rows=1466 width=220) (actual time=21.995..23.087 rows=100 loops=1)
                           Hash Cond: (surgery.release_id = animal_release.id)
                           ->  Hash Left Join  (cost=1285.71..4885.00 rows=1466 width=196) (actual time=19.288..20.296 rows=100 loops=1)
                                 Hash Cond: (tag.id = surgery.tag_id)
                                 ->  Hash Left Join  (cost=1140.45..4700.62 rows=1466 width=196) (actual time=17.228..18.180 rows=100 loops=1)
                                       Hash Cond: (sensor.tag_id = tag.id)
                                       ->  Hash Left Join  (cost=864.84..4393.86 rows=1466 width=196) (actual time=13.654..14.512 rows=100 loops=1)
                                             Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                             ->  Hash Join  (cost=684.43..4162.62 rows=1378 width=174) (actual time=10.576..11.345 rows=100 loops=1)
                                                   Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                                   ->  Hash Join  (cost=673.54..4132.70 rows=1400 width=168) (actual time=10.436..11.151 rows=100 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=614.36..4054.27 rows=1400 width=168) (actual time=9.679..10.329 rows=100 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=613.00..4033.66 rows=1400 width=171) (actual time=9.658..10.242 rows=100 loops=1)
                                                                     Hash Cond: (receiver_deployment.receiver_id = receiver.id)
                                                                     ->  Hash Join  (cost=337.39..3728.30 rows=1400 width=156) (actual time=5.681..6.191 rows=100 loops=1)
                                                                           Hash Cond: (installation.project_id = receiver_project.id)
                                                                           ->  Hash Join  (cost=334.70..3706.36 rows=1400 width=125) (actual time=5.624..6.075 rows=100 loops=1)
                                                                                 Hash Cond: (installation_station.installation_id = installation.id)
                                                                                 ->  Hash Join  (cost=330.23..3682.64 rows=1400 width=109) (actual time=5.555..5.950 rows=100 loops=1)
                                                                                       Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                       ->  Hash Join  (cost=260.04..3591.45 rows=1400 width=60) (actual time=4.414..4.731 rows=100 loops=1)
                                                                                             Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                                             ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..3303.97 rows=1400 width=52) (actual time=0.068..0.271 rows=100 loops=1)
                                                                                                   Index Cond: (("timestamp" >= '2014-07-30 12:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2014-07-30 18:00:00+00'::timestamp with time zone))
                                                                                             ->  Hash  (cost=188.10..188.10 rows=5710 width=24) (actual time=4.316..4.316 rows=5710 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 313kB
                                                                                                   ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.004..2.601 rows=5710 loops=1)
                                                                                       ->  Hash  (cost=45.64..45.64 rows=1964 width=57) (actual time=1.125..1.125 rows=1964 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 179kB
                                                                                             ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.004..0.531 rows=1964 loops=1)
                                                                                 ->  Hash  (cost=3.10..3.10 rows=110 width=32) (actual time=0.056..0.056 rows=110 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 8kB
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.003..0.020 rows=110 loops=1)
                                                                           ->  Hash  (cost=1.75..1.75 rows=75 width=39) (actual time=0.040..0.040 rows=75 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                 ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.004..0.025 rows=75 loops=1)
                                                                     ->  Hash  (cost=185.27..185.27 rows=7227 width=31) (actual time=3.965..3.965 rows=7227 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 415kB
                                                                           ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.001..2.103 rows=7227 loops=1)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.006 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.745..0.745 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.003..0.424 rows=1519 loops=1)
                                                   ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.128..0.128 rows=173 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                         ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.001..0.083 rows=173 loops=1)
                                             ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=3.050..3.050 rows=5307 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                                   ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.006..1.388 rows=5307 loops=1)
                                       ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.551..3.551 rows=7227 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                             ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.560 rows=7227 loops=1)
                                 ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=2.036..2.036 rows=3923 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                       ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.004..0.940 rows=3923 loops=1)
                           ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.684..2.684 rows=3920 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 241kB
                                 ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.484 rows=3920 loops=1)
                     ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.946..1.946 rows=4023 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 189kB
                           ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.004..0.842 rows=4023 loops=1)
               ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.040..0.040 rows=51 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 4kB
                     ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.006..0.023 rows=51 loops=1)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.003..0.004 rows=1 loops=100)
               Index Cond: (animal.species_id = id)
 Total runtime: 26.839 ms
(77 rows)

-- Test Case 11 - 5909 ^ 2153 -> 609 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and spcode = '37018003'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=3943.60..133755.52 rows=100 width=279) (actual time=59.963..61.324 rows=100 loops=1)
   ->  Hash Left Join  (cost=3943.60..1592841.51 rows=1224 width=279) (actual time=59.961..61.299 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018003'::text)
         Rows Removed by Filter: 25
         ->  Hash Left Join  (cost=1455.39..1569277.70 rows=244897 width=239) (actual time=18.642..19.509 rows=125 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=1334.87..1564871.48 rows=244897 width=239) (actual time=16.639..17.415 rows=125 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=1133.67..1560384.59 rows=244897 width=215) (actual time=13.928..14.629 rows=125 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=988.41..1553705.90 rows=244897 width=215) (actual time=12.002..12.615 rows=125 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=712.80..1548226.23 rows=244897 width=215) (actual time=9.064..9.610 rows=125 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=532.39..1539554.49 rows=230185 width=193) (actual time=6.360..6.791 rows=125 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=521.50..1536364.70 rows=233880 width=187) (actual time=6.211..6.575 rows=125 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=519.35..1531388.23 rows=702807 width=168) (actual time=6.170..6.464 rows=125 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=460.17..1521665.45 rows=702807 width=168) (actual time=5.393..5.623 rows=125 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=458.81..1512000.50 rows=702807 width=171) (actual time=5.375..5.537 rows=125 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.003..0.057 rows=326 loops=1)
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.301..5.301 rows=64 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 11kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.175..5.265 rows=64 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..0.922 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.137..3.137 rows=64 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.206..3.106 rows=64 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.001..0.787 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.106..0.106 rows=15 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.063..0.097 rows=15 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.036..0.061 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.015 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.019..0.019 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.009..0.019 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.023..0.029 rows=15 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.014..0.014 rows=15 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.010..0.010 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.005 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.768..0.768 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.398 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.016 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.137..0.137 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.094 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.686..2.686 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.004..1.363 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=2.925..2.925 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.003..1.410 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=1.913..1.913 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.004..0.936 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.699..2.699 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.522 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.982..1.982 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.843 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.106..41.106 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.005..23.948 rows=36587 loops=1)
 Total runtime: 62.776 ms
(82 rows)

-- Test Case 12 - 5909 ^ 1065 -> 55 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and timestamp between '2014-07-30 12:00:00+00' and '2014-07-30 18:00:00+00'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=247.55..3985.15 rows=6 width=279) (actual time=10.667..11.497 rows=55 loops=1)
   ->  Nested Loop Left Join  (cost=247.55..3985.15 rows=6 width=279) (actual time=10.666..11.481 rows=55 loops=1)
         ->  Nested Loop  (cost=247.26..3950.64 rows=6 width=239) (actual time=10.605..10.891 rows=55 loops=1)
               Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
               Rows Removed by Join Filter: 9460
               ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.039 rows=173 loops=1)
               ->  Materialize  (cost=247.26..3926.35 rows=6 width=233) (actual time=0.020..0.045 rows=55 loops=173)
                     ->  Nested Loop Left Join  (cost=247.26..3926.32 rows=6 width=233) (actual time=3.474..6.786 rows=55 loops=1)
                           ->  Nested Loop Left Join  (cost=246.98..3894.57 rows=6 width=233) (actual time=3.466..6.600 rows=55 loops=1)
                                 ->  Nested Loop Left Join  (cost=246.70..3861.21 rows=6 width=209) (actual time=3.458..6.403 rows=55 loops=1)
                                       ->  Nested Loop Left Join  (cost=246.42..3829.10 rows=6 width=209) (actual time=3.441..6.208 rows=55 loops=1)
                                             ->  Nested Loop Left Join  (cost=246.14..3812.02 rows=6 width=209) (actual time=3.425..6.019 rows=55 loops=1)
                                                   ->  Nested Loop  (cost=245.86..3778.81 rows=6 width=187) (actual time=3.403..5.750 rows=55 loops=1)
                                                         Join Filter: (receiver.organisation_id = organisation.id)
                                                         Rows Removed by Join Filter: 2750
                                                         ->  Nested Loop  (cost=245.86..3762.64 rows=19 width=168) (actual time=3.380..4.956 rows=55 loops=1)
                                                               ->  Nested Loop  (cost=245.58..3664.56 rows=19 width=168) (actual time=3.371..4.760 rows=55 loops=1)
                                                                     Join Filter: (receiver.model_id = device_model.id)
                                                                     Rows Removed by Join Filter: 825
                                                                     ->  Nested Loop  (cost=245.58..3658.80 rows=19 width=171) (actual time=3.362..4.496 rows=55 loops=1)
                                                                           ->  Hash Join  (cost=245.30..3554.14 rows=19 width=156) (actual time=3.338..4.245 rows=55 loops=1)
                                                                                 Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                                 ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..3303.97 rows=1400 width=52) (actual time=0.026..0.846 rows=1065 loops=1)
                                                                                       Index Cond: (("timestamp" >= '2014-07-30 12:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2014-07-30 18:00:00+00'::timestamp with time zone))
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.143..3.143 rows=64 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.209..3.109 rows=64 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.732 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.108..0.108 rows=15 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.062..0.101 rows=15 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.041..0.068 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.015 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.022..0.022 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.019 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.018..0.026 rows=15 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.012..0.012 rows=15 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                                           ->  Index Scan using device_pkey on device receiver  (cost=0.28..5.50 rows=1 width=31) (actual time=0.003..0.003 rows=1 loops=55)
                                                                                 Index Cond: (id = receiver_deployment.receiver_id)
                                                                     ->  Materialize  (cost=0.00..1.24 rows=16 width=13) (actual time=0.000..0.002 rows=16 loops=55)
                                                                           ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.005 rows=16 loops=1)
                                                               ->  Index Scan using receiver_download_file_pkey on receiver_download_file  (cost=0.28..5.15 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=55)
                                                                     Index Cond: (id = valid_detection.receiver_download_id)
                                                         ->  Materialize  (cost=0.00..1.77 rows=51 width=35) (actual time=0.000..0.005 rows=51 loops=55)
                                                               ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.017 rows=51 loops=1)
                                                   ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.53 rows=1 width=22) (actual time=0.003..0.004 rows=1 loops=55)
                                                         Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                             ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.002..0.002 rows=1 loops=55)
                                                   Index Cond: (id = sensor.tag_id)
                                                   Heap Fetches: 0
                                       ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=55)
                                             Index Cond: (tag.id = tag_id)
                                 ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.002..0.003 rows=1 loops=55)
                                       Index Cond: (surgery.release_id = id)
                           ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.002..0.002 rows=1 loops=55)
                                 Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.003..0.003 rows=1 loops=55)
               Index Cond: (animal.species_id = id)
 Total runtime: 11.823 ms
(66 rows)

-- Test Case 13 -  2153 ^ 1065 -> 55 rows
explain analyze select * from detection_extract_test_view
where spcode = '37018003'
  and timestamp between '2014-07-30 12:00:00+00' and '2014-07-30 18:00:00+00'
limit 100;
                                                                                                                            QUERY PLAN                                                                                                                             
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=4832.69..7874.54 rows=2 width=279) (actual time=29.980..37.686 rows=55 loops=1)
   ->  Nested Loop Left Join  (cost=4832.69..7874.54 rows=2 width=279) (actual time=29.979..37.672 rows=55 loops=1)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018003'::text)
         Rows Removed by Filter: 1010
         ->  Hash Left Join  (cost=4832.40..5079.76 rows=488 width=239) (actual time=29.882..33.539 rows=1065 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=4711.89..4950.70 rows=488 width=239) (actual time=27.945..31.014 rows=1065 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=4510.69..4740.96 rows=488 width=215) (actual time=25.229..27.737 rows=1065 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Right Join  (cost=4365.42..4582.67 rows=488 width=215) (actual time=23.191..25.106 rows=1065 loops=1)
                                 Hash Cond: (tag.id = sensor.tag_id)
                                 ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..0.912 rows=7227 loops=1)
                                 ->  Hash  (cost=4359.32..4359.32 rows=488 width=215) (actual time=22.173..22.173 rows=1065 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 327kB
                                       ->  Hash Left Join  (cost=866.99..4359.32 rows=488 width=215) (actual time=13.495..20.844 rows=1065 loops=1)
                                             Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                             ->  Hash Join  (cost=686.58..4161.98 rows=459 width=193) (actual time=10.452..16.956 rows=1065 loops=1)
                                                   Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                                   ->  Hash Join  (cost=675.68..4144.75 rows=466 width=187) (actual time=10.306..16.237 rows=1065 loops=1)
                                                         Hash Cond: (receiver.organisation_id = organisation.id)
                                                         ->  Hash Join  (cost=673.54..4132.70 rows=1400 width=168) (actual time=10.262..15.673 rows=1065 loops=1)
                                                               Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                               ->  Hash Join  (cost=614.36..4054.27 rows=1400 width=168) (actual time=9.488..14.282 rows=1065 loops=1)
                                                                     Hash Cond: (receiver.model_id = device_model.id)
                                                                     ->  Hash Join  (cost=613.00..4033.66 rows=1400 width=171) (actual time=9.471..13.713 rows=1065 loops=1)
                                                                           Hash Cond: (receiver_deployment.receiver_id = receiver.id)
                                                                           ->  Hash Join  (cost=337.39..3728.30 rows=1400 width=156) (actual time=5.459..8.987 rows=1065 loops=1)
                                                                                 Hash Cond: (installation.project_id = receiver_project.id)
                                                                                 ->  Hash Join  (cost=334.70..3706.36 rows=1400 width=125) (actual time=5.407..8.430 rows=1065 loops=1)
                                                                                       Hash Cond: (installation_station.installation_id = installation.id)
                                                                                       ->  Hash Join  (cost=330.23..3682.64 rows=1400 width=109) (actual time=5.341..7.812 rows=1065 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Hash Join  (cost=260.04..3591.45 rows=1400 width=60) (actual time=4.247..6.038 rows=1065 loops=1)
                                                                                                   Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                                                   ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..3303.97 rows=1400 width=52) (actual time=0.031..0.825 rows=1065 loops=1)
                                                                                                         Index Cond: (("timestamp" >= '2014-07-30 12:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2014-07-30 18:00:00+00'::timestamp with time zone))
                                                                                                   ->  Hash  (cost=188.10..188.10 rows=5710 width=24) (actual time=4.197..4.197 rows=5710 loops=1)
                                                                                                         Buckets: 1024  Batches: 1  Memory Usage: 313kB
                                                                                                         ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.004..2.516 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=45.64..45.64 rows=1964 width=57) (actual time=1.086..1.086 rows=1964 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 179kB
                                                                                                   ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.004..0.530 rows=1964 loops=1)
                                                                                       ->  Hash  (cost=3.10..3.10 rows=110 width=32) (actual time=0.057..0.057 rows=110 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 8kB
                                                                                             ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.004..0.031 rows=110 loops=1)
                                                                                 ->  Hash  (cost=1.75..1.75 rows=75 width=39) (actual time=0.040..0.040 rows=75 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                       ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.003..0.012 rows=75 loops=1)
                                                                           ->  Hash  (cost=185.27..185.27 rows=7227 width=31) (actual time=4.003..4.003 rows=7227 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 415kB
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..2.143 rows=7227 loops=1)
                                                                     ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                           ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.005 rows=16 loops=1)
                                                               ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.761..0.761 rows=1519 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                                     ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.430 rows=1519 loops=1)
                                                         ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                               ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.001..0.016 rows=51 loops=1)
                                                   ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.135..0.135 rows=173 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                         ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.085 rows=173 loops=1)
                                             ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=3.014..3.014 rows=5307 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                                   ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.005..1.437 rows=5307 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=2.014..2.014 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.004..0.923 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.695..2.695 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.532 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.912..1.912 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.833 rows=4023 loops=1)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.002..0.003 rows=1 loops=1065)
               Index Cond: (animal.species_id = id)
 Total runtime: 38.017 ms
(79 rows)

-- Test Case 14 -  5909 ^ 2153 ^ 1065 -> 55 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and spcode = '37018003'
  and timestamp between '2014-07-30 12:00:00+00' and '2014-07-30 18:00:00+00'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=247.55..3985.03 rows=1 width=279) (actual time=10.288..11.130 rows=55 loops=1)
   ->  Nested Loop Left Join  (cost=247.55..3985.03 rows=1 width=279) (actual time=10.286..11.112 rows=55 loops=1)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018003'::text)
         ->  Nested Loop  (cost=247.26..3950.64 rows=6 width=239) (actual time=10.225..10.511 rows=55 loops=1)
               Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
               Rows Removed by Join Filter: 9460
               ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.004..0.037 rows=173 loops=1)
               ->  Materialize  (cost=247.26..3926.35 rows=6 width=233) (actual time=0.019..0.042 rows=55 loops=173)
                     ->  Nested Loop Left Join  (cost=247.26..3926.32 rows=6 width=233) (actual time=3.339..6.439 rows=55 loops=1)
                           ->  Nested Loop Left Join  (cost=246.98..3894.57 rows=6 width=233) (actual time=3.332..6.254 rows=55 loops=1)
                                 ->  Nested Loop Left Join  (cost=246.70..3861.21 rows=6 width=209) (actual time=3.324..6.054 rows=55 loops=1)
                                       ->  Nested Loop Left Join  (cost=246.42..3829.10 rows=6 width=209) (actual time=3.317..5.870 rows=55 loops=1)
                                             ->  Nested Loop Left Join  (cost=246.14..3812.02 rows=6 width=209) (actual time=3.309..5.698 rows=55 loops=1)
                                                   ->  Nested Loop  (cost=245.86..3778.81 rows=6 width=187) (actual time=3.297..5.446 rows=55 loops=1)
                                                         Join Filter: (receiver.organisation_id = organisation.id)
                                                         Rows Removed by Join Filter: 2750
                                                         ->  Nested Loop  (cost=245.86..3762.64 rows=19 width=168) (actual time=3.276..4.676 rows=55 loops=1)
                                                               ->  Nested Loop  (cost=245.58..3664.56 rows=19 width=168) (actual time=3.269..4.488 rows=55 loops=1)
                                                                     Join Filter: (receiver.model_id = device_model.id)
                                                                     Rows Removed by Join Filter: 825
                                                                     ->  Nested Loop  (cost=245.58..3658.80 rows=19 width=171) (actual time=3.261..4.215 rows=55 loops=1)
                                                                           ->  Hash Join  (cost=245.30..3554.14 rows=19 width=156) (actual time=3.251..3.995 rows=55 loops=1)
                                                                                 Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                                 ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..3303.97 rows=1400 width=52) (actual time=0.026..0.652 rows=1065 loops=1)
                                                                                       Index Cond: (("timestamp" >= '2014-07-30 12:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2014-07-30 18:00:00+00'::timestamp with time zone))
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.104..3.104 rows=64 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.207..3.070 rows=64 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.730 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.106..0.106 rows=15 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.061..0.096 rows=15 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.040..0.066 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.014 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.021..0.021 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.007..0.017 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.018..0.025 rows=15 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.012..0.012 rows=15 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                                           ->  Index Scan using device_pkey on device receiver  (cost=0.28..5.50 rows=1 width=31) (actual time=0.003..0.003 rows=1 loops=55)
                                                                                 Index Cond: (id = receiver_deployment.receiver_id)
                                                                     ->  Materialize  (cost=0.00..1.24 rows=16 width=13) (actual time=0.000..0.002 rows=16 loops=55)
                                                                           ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.005 rows=16 loops=1)
                                                               ->  Index Scan using receiver_download_file_pkey on receiver_download_file  (cost=0.28..5.15 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=55)
                                                                     Index Cond: (id = valid_detection.receiver_download_id)
                                                         ->  Materialize  (cost=0.00..1.77 rows=51 width=35) (actual time=0.000..0.005 rows=51 loops=55)
                                                               ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.018 rows=51 loops=1)
                                                   ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.53 rows=1 width=22) (actual time=0.003..0.003 rows=1 loops=55)
                                                         Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                             ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.002..0.002 rows=1 loops=55)
                                                   Index Cond: (id = sensor.tag_id)
                                                   Heap Fetches: 0
                                       ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.002..0.002 rows=1 loops=55)
                                             Index Cond: (tag.id = tag_id)
                                 ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.002..0.003 rows=1 loops=55)
                                       Index Cond: (surgery.release_id = id)
                           ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.002..0.002 rows=1 loops=55)
                                 Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.003..0.003 rows=1 loops=55)
               Index Cond: (animal.species_id = id)
 Total runtime: 11.457 ms
(67 rows)

-- Mixed selectivity filtering
-- Test Case 15 - 5909 ^ 833188 -> 184 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and spcode = '37018021'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=3943.60..133755.52 rows=100 width=279) (actual time=61.754..6716.332 rows=100 loops=1)
   ->  Hash Left Join  (cost=3943.60..1592841.51 rows=1224 width=279) (actual time=61.752..6716.304 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018021'::text)
         Rows Removed by Filter: 1064
         ->  Hash Left Join  (cost=1455.39..1569277.70 rows=244897 width=239) (actual time=18.581..6673.714 rows=1176 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=1334.87..1564871.48 rows=244897 width=239) (actual time=16.575..6670.962 rows=1176 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=1133.67..1560384.59 rows=244897 width=215) (actual time=13.855..6667.485 rows=1176 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=988.41..1553705.90 rows=244897 width=215) (actual time=11.991..6664.928 rows=1176 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=712.80..1548226.23 rows=244897 width=215) (actual time=9.102..6661.271 rows=1176 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=532.39..1539554.49 rows=230185 width=193) (actual time=6.385..6657.593 rows=1176 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=521.50..1536364.70 rows=233880 width=187) (actual time=6.237..6656.816 rows=1176 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=519.35..1531388.23 rows=702807 width=168) (actual time=6.196..6656.148 rows=1176 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=460.17..1521665.45 rows=702807 width=168) (actual time=5.405..6654.743 rows=1176 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=458.81..1512000.50 rows=702807 width=171) (actual time=5.387..6654.126 rows=1176 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.003..3512.580 rows=19708981 loops=1)
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.311..5.311 rows=64 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 11kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.169..5.265 rows=64 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..0.934 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.132..3.132 rows=64 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.206..3.100 rows=64 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.001..0.771 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.106..0.106 rows=15 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.062..0.099 rows=15 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.036..0.060 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.018 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.017 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.022..0.027 rows=15 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.015..0.015 rows=15 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.005 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.782..0.782 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.444 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.017 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.136..0.136 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.089 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.700..2.700 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.004..1.395 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=2.876..2.876 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.003..1.381 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=1.853..1.853 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.003..0.911 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.706..2.706 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.003..1.543 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.984..1.984 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.820 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.103..41.103 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.005..23.917 rows=36587 loops=1)
 Total runtime: 6717.779 ms
(82 rows)

-- Test Case 16 - 5909 ^ 17098775 -> 3889 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                               QUERY PLAN                                                                                                                
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=463.19..7470.65 rows=100 width=279) (actual time=3117.853..3126.929 rows=100 loops=1)
   ->  Nested Loop Left Join  (cost=463.19..5256616.62 rows=75008 width=279) (actual time=3117.852..3126.902 rows=100 loops=1)
         ->  Nested Loop Left Join  (cost=462.90..4825177.33 rows=75008 width=239) (actual time=3117.761..3125.794 rows=100 loops=1)
               ->  Nested Loop  (cost=461.50..3093409.68 rows=70502 width=193) (actual time=3117.668..3123.784 rows=100 loops=1)
                     Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
                     Rows Removed by Join Filter: 17190
                     ->  Nested Loop  (cost=461.50..2907510.29 rows=71634 width=187) (actual time=3117.495..3119.481 rows=100 loops=1)
                           Join Filter: (receiver.organisation_id = organisation.id)
                           Rows Removed by Join Filter: 4971
                           ->  Nested Loop  (cost=461.50..2742836.28 rows=215258 width=168) (actual time=3117.462..3118.133 rows=100 loops=1)
                                 ->  Hash Join  (cost=461.22..1633565.49 rows=215258 width=168) (actual time=3117.402..3117.607 rows=100 loops=1)
                                       Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                       ->  Seq Scan on valid_detection  (cost=0.00..1570414.10 rows=16144362 width=52) (actual time=2.384..2690.600 rows=3301165 loops=1)
                                             Filter: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                             Rows Removed by Filter: 4938457
                                       ->  Hash  (cost=460.27..460.27 rows=76 width=132) (actual time=5.354..5.354 rows=64 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 11kB
                                             ->  Hash Join  (cost=246.09..460.27 rows=76 width=132) (actual time=3.145..5.304 rows=64 loops=1)
                                                   Hash Cond: (receiver.model_id = device_model.id)
                                                   ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.122..5.255 rows=64 loops=1)
                                                         Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                         ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.003..0.886 rows=7227 loops=1)
                                                         ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.082..3.082 rows=64 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                               ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.212..3.049 rows=64 loops=1)
                                                                     Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                     ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.759 rows=5710 loops=1)
                                                                     ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.110..0.110 rows=15 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                           ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.067..0.103 rows=15 loops=1)
                                                                                 ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.036..0.060 rows=1 loops=1)
                                                                                       Hash Cond: (installation.project_id = receiver_project.id)
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.003..0.014 rows=110 loops=1)
                                                                                       ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                             ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.007..0.017 rows=1 loops=1)
                                                                                                   Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                   Rows Removed by Filter: 74
                                                                                 ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.026..0.033 rows=15 loops=1)
                                                                                       Recheck Cond: (installation_id = installation.id)
                                                                                       ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.017..0.017 rows=15 loops=1)
                                                                                             Index Cond: (installation_id = installation.id)
                                                   ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.015..0.015 rows=16 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.004..0.007 rows=16 loops=1)
                                 ->  Index Scan using receiver_download_file_pkey on receiver_download_file  (cost=0.28..5.14 rows=1 width=16) (actual time=0.004..0.004 rows=1 loops=100)
                                       Index Cond: (id = valid_detection.receiver_download_id)
                           ->  Materialize  (cost=0.00..1.77 rows=51 width=35) (actual time=0.000..0.005 rows=51 loops=100)
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.005..0.022 rows=51 loops=1)
                     ->  Materialize  (cost=0.00..9.60 rows=173 width=22) (actual time=0.000..0.016 rows=173 loops=100)
                           ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.003..0.102 rows=173 loops=1)
               ->  Nested Loop Left Join  (cost=1.41..24.55 rows=1 width=46) (actual time=0.016..0.019 rows=1 loops=100)
                     ->  Nested Loop Left Join  (cost=1.12..19.26 rows=1 width=46) (actual time=0.013..0.016 rows=1 loops=100)
                           ->  Nested Loop Left Join  (cost=0.84..13.70 rows=1 width=22) (actual time=0.010..0.012 rows=1 loops=100)
                                 ->  Nested Loop Left Join  (cost=0.56..8.35 rows=1 width=22) (actual time=0.007..0.008 rows=1 loops=100)
                                       ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.50 rows=1 width=22) (actual time=0.004..0.004 rows=1 loops=100)
                                             Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                       ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.002..0.002 rows=1 loops=98)
                                             Index Cond: (id = sensor.tag_id)
                                             Heap Fetches: 0
                                 ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=98)
                                       Index Cond: (tag.id = tag_id)
                           ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.002..0.002 rows=1 loops=98)
                                 Index Cond: (surgery.release_id = id)
                     ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.002..0.002 rows=1 loops=98)
                           Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.002..0.003 rows=1 loops=100)
               Index Cond: (animal.species_id = id)
 Total runtime: 3127.288 ms
(69 rows)

-- Test Case 17 - 2716283 ^ 464 -> 448 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and spcode = '37346004'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=3943.60..133755.52 rows=100 width=279) (actual time=35436.409..35438.400 rows=100 loops=1)
   ->  Hash Left Join  (cost=3943.60..1592841.51 rows=1224 width=279) (actual time=35436.407..35438.377 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37346004'::text)
         Rows Removed by Filter: 2714033
         ->  Hash Left Join  (cost=1455.39..1569277.70 rows=244897 width=239) (actual time=4084.717..33952.359 rows=2716283 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=1334.87..1564871.48 rows=244897 width=239) (actual time=4082.729..32398.620 rows=2716283 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=1133.67..1560384.59 rows=244897 width=215) (actual time=4080.005..30827.373 rows=2716283 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=988.41..1553705.90 rows=244897 width=215) (actual time=4078.075..29310.504 rows=2711481 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=712.80..1548226.23 rows=244897 width=215) (actual time=4075.061..27643.117 rows=2711481 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=532.39..1539554.49 rows=230185 width=193) (actual time=4072.326..25685.061 rows=2710212 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=521.50..1536364.70 rows=233880 width=187) (actual time=4072.177..24273.158 rows=2710212 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=519.35..1531388.23 rows=702807 width=168) (actual time=4072.134..22881.300 rows=2710212 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=460.17..1521665.45 rows=702807 width=168) (actual time=4071.355..21422.926 rows=2710212 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=458.81..1512000.50 rows=702807 width=171) (actual time=4071.335..20077.399 rows=2710212 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.002..9400.876 rows=53115950 loops=1)
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.853..5.853 rows=282 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 43kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.426..5.695 rows=282 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..0.947 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.414..3.414 rows=282 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.172..3.278 rows=282 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.789 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.141..0.141 rows=45 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.066..0.123 rows=45 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.036..0.061 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.012 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.007..0.016 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.026..0.045 rows=45 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.017..0.017 rows=45 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.005 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.770..0.770 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.422 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.034..0.034 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.001..0.017 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.134..0.134 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.084 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.714..2.714 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.006..1.366 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.003..3.003 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.005..1.478 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=1.919..1.919 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.003..0.925 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.714..2.714 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.575 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.977..1.977 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.004..0.858 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.278..41.278 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.005..24.020 rows=36587 loops=1)
 Total runtime: 35440.634 ms
(82 rows)

-- Test Case 18 - 2716283 ^ 2005 -> 4 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and timestamp between '2013-06-08 00:00:00+00' and '2013-06-08 01:00:00+00'
limit 100;
                                                                                                                              QUERY PLAN                                                                                                                               
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=306.45..4504.01 rows=7 width=279) (actual time=9.617..9.795 rows=4 loops=1)
   ->  Nested Loop Left Join  (cost=306.45..4504.01 rows=7 width=279) (actual time=9.616..9.792 rows=4 loops=1)
         ->  Nested Loop Left Join  (cost=306.16..4463.74 rows=7 width=239) (actual time=9.548..9.693 rows=4 loops=1)
               ->  Nested Loop Left Join  (cost=305.88..4426.70 rows=7 width=239) (actual time=9.537..9.670 rows=4 loops=1)
                     ->  Nested Loop Left Join  (cost=305.60..4387.78 rows=7 width=215) (actual time=9.528..9.652 rows=4 loops=1)
                           ->  Nested Loop Left Join  (cost=305.32..4350.31 rows=7 width=215) (actual time=9.519..9.632 rows=4 loops=1)
                                 ->  Nested Loop Left Join  (cost=305.04..4330.39 rows=7 width=215) (actual time=9.510..9.611 rows=4 loops=1)
                                       ->  Nested Loop  (cost=304.76..4291.65 rows=7 width=193) (actual time=9.494..9.578 rows=4 loops=1)
                                             Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
                                             Rows Removed by Join Filter: 688
                                             ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.037 rows=173 loops=1)
                                             ->  Materialize  (cost=304.76..4264.77 rows=7 width=187) (actual time=0.053..0.054 rows=4 loops=173)
                                                   ->  Nested Loop  (cost=304.76..4264.74 rows=7 width=187) (actual time=9.112..9.175 rows=4 loops=1)
                                                         Join Filter: (receiver.organisation_id = organisation.id)
                                                         Rows Removed by Join Filter: 200
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.001..0.009 rows=51 loops=1)
                                                         ->  Materialize  (cost=304.76..4246.45 rows=22 width=168) (actual time=0.169..0.178 rows=4 loops=51)
                                                               ->  Hash Join  (cost=304.76..4246.34 rows=22 width=168) (actual time=8.597..9.056 rows=4 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                                     ->  Nested Loop  (cost=245.58..4186.86 rows=22 width=168) (actual time=7.741..8.197 rows=4 loops=1)
                                                                           Join Filter: (receiver.model_id = device_model.id)
                                                                           Rows Removed by Join Filter: 60
                                                                           ->  Nested Loop  (cost=245.58..4180.38 rows=22 width=171) (actual time=7.729..8.162 rows=4 loops=1)
                                                                                 ->  Hash Join  (cost=245.30..4059.20 rows=22 width=156) (actual time=7.714..8.133 rows=4 loops=1)
                                                                                       Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                                       ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..3808.21 rows=1613 width=52) (actual time=3.035..4.310 rows=1839 loops=1)
                                                                                             Index Cond: (("timestamp" >= '2013-06-08 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-06-08 01:00:00+00'::timestamp with time zone))
                                                                                       ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.447..3.447 rows=282 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                                             ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.228..3.311 rows=282 loops=1)
                                                                                                   Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                                   ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.005..0.743 rows=5710 loops=1)
                                                                                                   ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.180..0.180 rows=45 loops=1)
                                                                                                         Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                                         ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.101..0.163 rows=45 loops=1)
                                                                                                               ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.061..0.086 rows=1 loops=1)
                                                                                                                     Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                                     ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.003..0.017 rows=110 loops=1)
                                                                                                                     ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.028..0.028 rows=1 loops=1)
                                                                                                                           Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                           ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.015..0.025 rows=1 loops=1)
                                                                                                                                 Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                                                 Rows Removed by Filter: 74
                                                                                                               ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.031..0.052 rows=45 loops=1)
                                                                                                                     Recheck Cond: (installation_id = installation.id)
                                                                                                                     ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.021..0.021 rows=45 loops=1)
                                                                                                                           Index Cond: (installation_id = installation.id)
                                                                                 ->  Index Scan using device_pkey on device receiver  (cost=0.28..5.50 rows=1 width=31) (actual time=0.005..0.005 rows=1 loops=4)
                                                                                       Index Cond: (id = receiver_deployment.receiver_id)
                                                                           ->  Materialize  (cost=0.00..1.24 rows=16 width=13) (actual time=0.002..0.005 rows=16 loops=4)
                                                                                 ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.003..0.006 rows=16 loops=1)
                                                                     ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.841..0.841 rows=1519 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                                           ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.003..0.475 rows=1519 loops=1)
                                       ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.53 rows=1 width=22) (actual time=0.006..0.006 rows=1 loops=4)
                                             Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                 ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.003..0.004 rows=1 loops=4)
                                       Index Cond: (id = sensor.tag_id)
                                       Heap Fetches: 0
                           ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=4)
                                 Index Cond: (tag.id = tag_id)
                     ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.003..0.003 rows=1 loops=4)
                           Index Cond: (surgery.release_id = id)
               ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=4)
                     Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.004..0.005 rows=1 loops=4)
               Index Cond: (animal.species_id = id)
 Total runtime: 10.118 ms
(68 rows)

-- Test Case 19 - 464 ^ 17098775 -> 6 rows
explain analyze select * from detection_extract_test_view
where spcode = '37346004'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                     QUERY PLAN                                                                                                      
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=348654.03..357276.65 rows=100 width=279) (actual time=68179.639..68361.556 rows=6 loops=1)
   ->  Hash Left Join  (cost=348654.03..2774024.89 rows=28128 width=279) (actual time=68179.637..68361.552 rows=6 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37346004'::text)
         Rows Removed by Filter: 17098769
         ->  Hash Left Join  (cost=346165.82..2295305.48 rows=5625584 width=239) (actual time=3119.448..59085.635 rows=17098775 loops=1)
               Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
               ->  Hash Join  (cost=344912.31..2098995.76 rows=5287633 width=193) (actual time=3095.970..47594.050 rows=16316319 loops=1)
                     Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                     ->  Hash Join  (cost=344901.41..2025961.60 rows=5372518 width=187) (actual time=3095.819..40467.318 rows=16316319 loops=1)
                           Hash Cond: (receiver.organisation_id = organisation.id)
                           ->  Hash Join  (cost=344899.27..1911692.91 rows=16144362 width=168) (actual time=3095.773..32784.116 rows=16316319 loops=1)
                                 Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                 ->  Hash Join  (cost=344840.09..1689648.76 rows=16144362 width=168) (actual time=3094.992..25181.419 rows=16316319 loops=1)
                                       Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                       ->  Bitmap Heap Scan on valid_detection  (cost=343912.28..1365833.71 rows=16144362 width=52) (actual time=3073.127..12825.769 rows=16316319 loops=1)
                                             Recheck Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                             Rows Removed by Index Recheck: 501034
                                             ->  Bitmap Index Scan on valid_timestamp_index  (cost=0.00..339876.18 rows=16144362 width=0) (actual time=3071.663..3071.663 rows=16316319 loops=1)
                                                   Index Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                       ->  Hash  (cost=856.44..856.44 rows=5710 width=132) (actual time=21.847..21.847 rows=5710 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 969kB
                                             ->  Hash Join  (cost=382.84..856.44 rows=5710 width=132) (actual time=6.241..17.886 rows=5710 loops=1)
                                                   Hash Cond: (receiver.model_id = device_model.id)
                                                   ->  Hash Join  (cost=381.48..776.56 rows=5710 width=135) (actual time=6.224..15.484 rows=5710 loops=1)
                                                         Hash Cond: (receiver_deployment.receiver_id = receiver.id)
                                                         ->  Hash Join  (cost=105.87..379.62 rows=5710 width=120) (actual time=2.252..8.326 rows=5710 loops=1)
                                                               Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                               ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.001..0.918 rows=5710 loops=1)
                                                               ->  Hash  (cost=81.32..81.32 rows=1964 width=104) (actual time=2.241..2.241 rows=1964 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 280kB
                                                                     ->  Hash Join  (cost=8.68..81.32 rows=1964 width=104) (actual time=0.156..1.441 rows=1964 loops=1)
                                                                           Hash Cond: (installation_station.installation_id = installation.id)
                                                                           ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.002..0.261 rows=1964 loops=1)
                                                                           ->  Hash  (cost=7.30..7.30 rows=110 width=63) (actual time=0.146..0.146 rows=110 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 12kB
                                                                                 ->  Hash Join  (cost=2.69..7.30 rows=110 width=63) (actual time=0.049..0.109 rows=110 loops=1)
                                                                                       Hash Cond: (installation.project_id = receiver_project.id)
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.014 rows=110 loops=1)
                                                                                       ->  Hash  (cost=1.75..1.75 rows=75 width=39) (actual time=0.038..0.038 rows=75 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                             ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.002..0.023 rows=75 loops=1)
                                                         ->  Hash  (cost=185.27..185.27 rows=7227 width=31) (actual time=3.959..3.959 rows=7227 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 415kB
                                                               ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.003..2.207 rows=7227 loops=1)
                                                   ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.005 rows=16 loops=1)
                                 ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.767..0.767 rows=1519 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                       ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.003..0.409 rows=1519 loops=1)
                           ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.016 rows=51 loops=1)
                     ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.136..0.136 rows=173 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 10kB
                           ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.096 rows=173 loops=1)
               ->  Hash  (cost=1187.18..1187.18 rows=5307 width=46) (actual time=23.441..23.441 rows=5488 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 386kB
                     ->  Hash Right Join  (cost=890.51..1187.18 rows=5307 width=46) (actual time=13.608..21.297 rows=5488 loops=1)
                           Hash Cond: (surgery.tag_id = tag.id)
                           ->  Hash Left Join  (cost=321.72..555.25 rows=3923 width=40) (actual time=4.775..9.931 rows=3923 loops=1)
                                 Hash Cond: (animal_release.animal_id = animal.id)
                                 ->  Hash Left Join  (cost=201.20..366.08 rows=3923 width=40) (actual time=2.797..5.895 rows=3923 loops=1)
                                       Hash Cond: (surgery.release_id = animal_release.id)
                                       ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.003..0.632 rows=3923 loops=1)
                                       ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.763..2.763 rows=3920 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 241kB
                                             ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.543 rows=3920 loops=1)
                                 ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.957..1.957 rows=4023 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 189kB
                                       ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.847 rows=4023 loops=1)
                           ->  Hash  (cost=502.45..502.45 rows=5307 width=22) (actual time=8.806..8.806 rows=5307 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                 ->  Hash Left Join  (cost=275.61..502.45 rows=5307 width=22) (actual time=3.484..7.221 rows=5307 loops=1)
                                       Hash Cond: (sensor.tag_id = tag.id)
                                       ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.007..0.719 rows=5307 loops=1)
                                       ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.454..3.454 rows=7227 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                             ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.549 rows=7227 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.591..41.591 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.006..24.226 rows=36587 loops=1)
 Total runtime: 68361.866 ms
(84 rows)

-- Test Case 20 - 833188 ^ 5489 -> 210 rows
explain analyze select * from detection_extract_test_view
where spcode = '37018021'
  and timestamp between '2013-09-24 00:00:00+00' and '2013-09-24 04:00:00+00'
limit 100;
                                                                                                                         QUERY PLAN                                                                                                                          
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=4097.78..16057.70 rows=8 width=279) (actual time=65.645..102.728 rows=100 loops=1)
   ->  Hash Left Join  (cost=4097.78..16057.70 rows=8 width=279) (actual time=65.643..102.699 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018021'::text)
         Rows Removed by Filter: 2432
         ->  Hash Left Join  (cost=1609.58..13075.53 rows=1587 width=239) (actual time=23.882..57.524 rows=3468 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=1489.06..12927.24 rows=1587 width=239) (actual time=21.867..53.202 rows=3468 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=1287.86..12698.27 rows=1587 width=215) (actual time=19.108..48.056 rows=3468 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=1142.59..12510.67 rows=1587 width=215) (actual time=17.040..43.720 rows=3357 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=866.99..12201.34 rows=1587 width=215) (actual time=13.574..37.761 rows=3357 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=686.58..11965.89 rows=1492 width=193) (actual time=10.580..32.053 rows=3143 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=675.68..11934.41 rows=1515 width=187) (actual time=10.426..30.192 rows=3143 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=673.54..11900.04 rows=4554 width=168) (actual time=10.381..28.487 rows=3143 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=614.36..11778.24 rows=4554 width=168) (actual time=9.623..25.775 rows=3143 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=613.00..11714.26 rows=4554 width=171) (actual time=9.601..24.067 rows=3143 loops=1)
                                                                     Hash Cond: (receiver_deployment.receiver_id = receiver.id)
                                                                     ->  Hash Join  (cost=337.39..11341.88 rows=4554 width=156) (actual time=5.663..17.767 rows=3143 loops=1)
                                                                           Hash Cond: (installation.project_id = receiver_project.id)
                                                                           ->  Hash Join  (cost=334.70..11276.58 rows=4554 width=125) (actual time=5.607..16.027 rows=3143 loops=1)
                                                                                 Hash Cond: (installation_station.installation_id = installation.id)
                                                                                 ->  Hash Join  (cost=330.23..11209.49 rows=4554 width=109) (actual time=5.537..14.243 rows=3143 loops=1)
                                                                                       Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                       ->  Hash Join  (cost=260.04..11070.99 rows=4554 width=60) (actual time=4.372..10.922 rows=3143 loops=1)
                                                                                             Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                                             ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..10720.43 rows=4554 width=52) (actual time=0.072..3.613 rows=3143 loops=1)
                                                                                                   Index Cond: (("timestamp" >= '2013-09-24 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-24 04:00:00+00'::timestamp with time zone))
                                                                                             ->  Hash  (cost=188.10..188.10 rows=5710 width=24) (actual time=4.259..4.259 rows=5710 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 313kB
                                                                                                   ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.004..2.587 rows=5710 loops=1)
                                                                                       ->  Hash  (cost=45.64..45.64 rows=1964 width=57) (actual time=1.154..1.154 rows=1964 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 179kB
                                                                                             ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.004..0.546 rows=1964 loops=1)
                                                                                 ->  Hash  (cost=3.10..3.10 rows=110 width=32) (actual time=0.057..0.057 rows=110 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 8kB
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.003..0.024 rows=110 loops=1)
                                                                           ->  Hash  (cost=1.75..1.75 rows=75 width=39) (actual time=0.040..0.040 rows=75 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                 ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.003..0.017 rows=75 loops=1)
                                                                     ->  Hash  (cost=185.27..185.27 rows=7227 width=31) (actual time=3.927..3.927 rows=7227 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 415kB
                                                                           ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..1.995 rows=7227 loops=1)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.004 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.747..0.747 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.003..0.426 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.034..0.034 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.020 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.138..0.138 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.095 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.974..2.974 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.005..1.366 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.449..3.449 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.003..1.537 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=2.046..2.046 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.005..0.963 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.745..2.745 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.577 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.998..1.998 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.846 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.209..41.209 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.005..24.215 rows=36587 loops=1)
 Total runtime: 104.488 ms
(81 rows)

-- Test Case 21 - 5909 ^ 2153 ^ 17098775 -> 284 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and spcode = '37018003'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=347855.87..643470.25 rows=100 width=279) (actual time=9092.972..9096.254 rows=100 loops=1)
   ->  Hash Left Join  (cost=347855.87..1456409.78 rows=375 width=279) (actual time=9092.969..9096.228 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018003'::text)
         Rows Removed by Filter: 1601
         ->  Hash Left Join  (cost=345367.67..1447217.10 rows=75008 width=239) (actual time=6305.381..9048.767 rows=1723 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=345247.15..1445783.94 rows=75008 width=239) (actual time=6303.131..9045.442 rows=1723 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=345045.95..1444270.10 rows=75008 width=215) (actual time=6299.904..9041.113 rows=1723 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=344900.68..1442123.76 rows=75008 width=215) (actual time=6297.483..9037.774 rows=1723 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=344625.07..1440254.23 rows=75008 width=215) (actual time=6294.043..9033.195 rows=1723 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=344444.67..1437473.06 rows=70502 width=193) (actual time=6290.800..9028.577 rows=1688 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=344433.77..1436488.52 rows=71634 width=187) (actual time=6290.647..9027.498 rows=1688 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=344431.63..1434962.82 rows=215258 width=168) (actual time=6290.605..9026.601 rows=1688 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=344372.45..1431943.84 rows=215258 width=168) (actual time=6289.838..9024.891 rows=1688 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=344371.09..1428982.69 rows=215258 width=171) (actual time=6289.819..9023.994 rows=1688 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Bitmap Heap Scan on valid_detection  (cost=343912.28..1365833.71 rows=16144362 width=52) (actual time=3369.862..7858.915 rows=8995312 loops=1)
                                                                           Recheck Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                           Rows Removed by Index Recheck: 483609
                                                                           ->  Bitmap Index Scan on valid_timestamp_index  (cost=0.00..339876.18 rows=16144362 width=0) (actual time=3368.347..3368.347 rows=16316319 loops=1)
                                                                                 Index Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.340..5.340 rows=64 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 11kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.185..5.306 rows=64 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..0.929 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.147..3.147 rows=64 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.208..3.121 rows=64 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.001..0.754 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.109..0.109 rows=15 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.063..0.099 rows=15 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.036..0.062 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.014 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.017 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.022..0.027 rows=15 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.014..0.014 rows=15 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.006 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.756..0.756 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.430 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.023 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.139..0.139 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.092 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=3.215..3.215 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.020..1.700 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.417..3.417 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.497 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=2.396..2.396 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.020..1.297 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=3.197..3.197 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.015..2.003 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=2.226..2.226 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..1.042 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=45.827..45.827 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.015..28.066 rows=36587 loops=1)
 Total runtime: 9097.841 ms
(86 rows)

-- Test Case 22 - 5909 ^ 833188 ^ 5489 -> 13 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and spcode = '37018021'
  and timestamp between '2013-09-24 00:00:00+00' and '2013-09-24 04:00:00+00'
limit 100;
                                                                                                                  QUERY PLAN                                                                                                                   
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=520.25..11993.47 rows=1 width=279) (actual time=11.858..12.301 rows=13 loops=1)
   ->  Nested Loop Left Join  (cost=520.25..11993.47 rows=1 width=279) (actual time=11.857..12.294 rows=13 loops=1)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018021'::text)
         ->  Nested Loop Left Join  (cost=519.96..11873.17 rows=21 width=239) (actual time=11.778..12.092 rows=13 loops=1)
               ->  Nested Loop  (cost=518.56..11381.77 rows=20 width=193) (actual time=11.664..11.737 rows=13 loops=1)
                     Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
                     Rows Removed by Join Filter: 2236
                     ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.003..0.036 rows=173 loops=1)
                     ->  Materialize  (cost=518.56..11321.19 rows=20 width=187) (actual time=0.038..0.063 rows=13 loops=173)
                           ->  Nested Loop  (cost=518.56..11321.09 rows=20 width=187) (actual time=6.625..10.690 rows=13 loops=1)
                                 Join Filter: (receiver.organisation_id = organisation.id)
                                 Rows Removed by Join Filter: 650
                                 ->  Hash Join  (cost=518.56..11272.79 rows=61 width=168) (actual time=6.601..10.487 rows=13 loops=1)
                                       Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                       ->  Nested Loop  (cost=459.38..11212.77 rows=61 width=168) (actual time=5.824..9.704 rows=13 loops=1)
                                             Join Filter: (receiver.model_id = device_model.id)
                                             Rows Removed by Join Filter: 195
                                             ->  Hash Join  (cost=459.38..11196.93 rows=61 width=171) (actual time=5.814..9.628 rows=13 loops=1)
                                                   Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                   ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..10720.43 rows=4554 width=52) (actual time=0.059..3.395 rows=5041 loops=1)
                                                         Index Cond: (("timestamp" >= '2013-09-24 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-24 04:00:00+00'::timestamp with time zone))
                                                   ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.342..5.342 rows=64 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 11kB
                                                         ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.167..5.302 rows=64 loops=1)
                                                               Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                               ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..0.875 rows=7227 loops=1)
                                                               ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.130..3.130 rows=64 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                     ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.202..3.100 rows=64 loops=1)
                                                                           Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                           ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.001..0.716 rows=5710 loops=1)
                                                                           ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.102..0.102 rows=15 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                 ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.058..0.093 rows=15 loops=1)
                                                                                       ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.037..0.061 rows=1 loops=1)
                                                                                             Hash Cond: (installation.project_id = receiver_project.id)
                                                                                             ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.013 rows=110 loops=1)
                                                                                             ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.019..0.019 rows=1 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                   ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.018 rows=1 loops=1)
                                                                                                         Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                         Rows Removed by Filter: 74
                                                                                       ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.018..0.026 rows=15 loops=1)
                                                                                             Recheck Cond: (installation_id = installation.id)
                                                                                             ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.011..0.011 rows=15 loops=1)
                                                                                                   Index Cond: (installation_id = installation.id)
                                             ->  Materialize  (cost=0.00..1.24 rows=16 width=13) (actual time=0.001..0.003 rows=16 loops=13)
                                                   ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.003..0.005 rows=16 loops=1)
                                       ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.764..0.764 rows=1519 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                             ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.003..0.413 rows=1519 loops=1)
                                 ->  Materialize  (cost=0.00..1.77 rows=51 width=35) (actual time=0.001..0.008 rows=51 loops=13)
                                       ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.003..0.025 rows=51 loops=1)
               ->  Nested Loop Left Join  (cost=1.41..24.56 rows=1 width=46) (actual time=0.023..0.026 rows=1 loops=13)
                     ->  Nested Loop Left Join  (cost=1.12..19.27 rows=1 width=46) (actual time=0.019..0.021 rows=1 loops=13)
                           ->  Nested Loop Left Join  (cost=0.84..13.71 rows=1 width=22) (actual time=0.015..0.017 rows=1 loops=13)
                                 ->  Nested Loop Left Join  (cost=0.56..8.36 rows=1 width=22) (actual time=0.011..0.012 rows=1 loops=13)
                                       ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.51 rows=1 width=22) (actual time=0.005..0.006 rows=1 loops=13)
                                             Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                       ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.004..0.004 rows=1 loops=13)
                                             Index Cond: (id = sensor.tag_id)
                                             Heap Fetches: 0
                                 ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=13)
                                       Index Cond: (tag.id = tag_id)
                           ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.003..0.003 rows=1 loops=13)
                                 Index Cond: (surgery.release_id = id)
                     ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=13)
                           Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.003..0.004 rows=1 loops=13)
               Index Cond: (animal.species_id = id)
 Total runtime: 12.611 ms
(71 rows)

-- Test Case 23 - 5909 ^ 833188 ^ 17098775 -> 54 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and spcode = '37018021'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=347855.87..643470.25 rows=100 width=279) (actual time=6346.261..13611.502 rows=54 loops=1)
   ->  Hash Left Join  (cost=347855.87..1456409.78 rows=375 width=279) (actual time=6346.260..13611.488 rows=54 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018021'::text)
         Rows Removed by Filter: 3835
         ->  Hash Left Join  (cost=345367.67..1447217.10 rows=75008 width=239) (actual time=6298.451..13560.183 rows=3889 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=345247.15..1445783.94 rows=75008 width=239) (actual time=6296.163..13555.393 rows=3889 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=345045.95..1444270.10 rows=75008 width=215) (actual time=6292.950..13549.760 rows=3889 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=344900.68..1442123.76 rows=75008 width=215) (actual time=6290.516..13545.170 rows=3889 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=344625.07..1440254.23 rows=75008 width=215) (actual time=6287.357..13539.550 rows=3889 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=344444.67..1437473.06 rows=70502 width=193) (actual time=6284.272..13533.311 rows=3854 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=344433.77..1436488.52 rows=71634 width=187) (actual time=6284.121..13531.202 rows=3854 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=344431.63..1434962.82 rows=215258 width=168) (actual time=6284.079..13529.160 rows=3854 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=344372.45..1431943.84 rows=215258 width=168) (actual time=6283.287..13526.175 rows=3854 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=344371.09..1428982.69 rows=215258 width=171) (actual time=6283.267..13524.156 rows=3854 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Bitmap Heap Scan on valid_detection  (cost=343912.28..1365833.71 rows=16144362 width=52) (actual time=3376.540..11414.934 rows=16316319 loops=1)
                                                                           Recheck Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                           Rows Removed by Index Recheck: 501034
                                                                           ->  Bitmap Index Scan on valid_timestamp_index  (cost=0.00..339876.18 rows=16144362 width=0) (actual time=3375.040..3375.040 rows=16316319 loops=1)
                                                                                 Index Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.332..5.332 rows=64 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 11kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.143..5.296 rows=64 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.001..0.928 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.106..3.106 rows=64 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.207..3.074 rows=64 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.746 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.106..0.106 rows=15 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.061..0.100 rows=15 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.035..0.061 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.003..0.017 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.007..0.016 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.023..0.029 rows=15 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.015..0.015 rows=15 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.005 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.781..0.781 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.450 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.017 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.138..0.138 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.006..0.093 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=3.057..3.057 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.020..1.699 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.139..3.139 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.005..1.519 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=2.409..2.409 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.019..1.324 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=3.186..3.186 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.014..1.916 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=2.263..2.263 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..1.066 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=45.725..45.725 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.014..27.939 rows=36587 loops=1)
 Total runtime: 13611.832 ms
(86 rows)

-- Test Case 24 - 2716283 ^ 464 ^ 3129 -> 2 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and spcode = '37346004'
  and timestamp between '2013-04-02 05:00:00+00' and '2013-04-02 07:00:00+00'
limit 100;
                                                                                                                  QUERY PLAN                                                                                                                   
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=306.45..6075.51 rows=1 width=279) (actual time=15.067..16.571 rows=2 loops=1)
   ->  Nested Loop Left Join  (cost=306.45..6075.51 rows=1 width=279) (actual time=15.065..16.568 rows=2 loops=1)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37346004'::text)
         Rows Removed by Filter: 68
         ->  Nested Loop Left Join  (cost=306.16..6012.49 rows=11 width=239) (actual time=13.668..16.174 rows=70 loops=1)
               ->  Nested Loop  (cost=304.76..5766.71 rows=10 width=193) (actual time=13.523..14.579 rows=69 loops=1)
                     Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
                     Rows Removed by Join Filter: 11868
                     ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.004..0.080 rows=173 loops=1)
                     ->  Materialize  (cost=304.76..5732.05 rows=10 width=187) (actual time=0.052..0.062 rows=69 loops=173)
                           ->  Nested Loop  (cost=304.76..5732.00 rows=10 width=187) (actual time=8.920..9.721 rows=69 loops=1)
                                 Join Filter: (receiver.organisation_id = organisation.id)
                                 Rows Removed by Join Filter: 3450
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.001..0.007 rows=51 loops=1)
                                 ->  Materialize  (cost=304.76..5707.62 rows=30 width=168) (actual time=0.099..0.170 rows=69 loops=51)
                                       ->  Hash Join  (cost=304.76..5707.47 rows=30 width=168) (actual time=5.032..8.306 rows=69 loops=1)
                                             Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                             ->  Nested Loop  (cost=245.58..5647.88 rows=30 width=168) (actual time=4.122..7.348 rows=69 loops=1)
                                                   Join Filter: (receiver.model_id = device_model.id)
                                                   Rows Removed by Join Filter: 1035
                                                   ->  Nested Loop  (cost=245.58..5639.48 rows=30 width=171) (actual time=4.110..7.000 rows=69 loops=1)
                                                         ->  Hash Join  (cost=245.30..5474.23 rows=30 width=156) (actual time=4.094..6.708 rows=69 loops=1)
                                                               Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                               ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..5220.91 rows=2213 width=52) (actual time=0.072..2.158 rows=2743 loops=1)
                                                                     Index Cond: (("timestamp" >= '2013-04-02 05:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-04-02 07:00:00+00'::timestamp with time zone))
                                                               ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.978..3.978 rows=282 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                     ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.222..3.847 rows=282 loops=1)
                                                                           Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                           ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..1.707 rows=5710 loops=1)
                                                                           ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.191..0.191 rows=45 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                 ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.073..0.176 rows=45 loops=1)
                                                                                       ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.039..0.064 rows=1 loops=1)
                                                                                             Hash Cond: (installation.project_id = receiver_project.id)
                                                                                             ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.014 rows=110 loops=1)
                                                                                             ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.019..0.019 rows=1 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                   ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.017 rows=1 loops=1)
                                                                                                         Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                         Rows Removed by Filter: 74
                                                                                       ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.031..0.092 rows=45 loops=1)
                                                                                             Recheck Cond: (installation_id = installation.id)
                                                                                             ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.016..0.016 rows=45 loops=1)
                                                                                                   Index Cond: (installation_id = installation.id)
                                                         ->  Index Scan using device_pkey on device receiver  (cost=0.28..5.50 rows=1 width=31) (actual time=0.003..0.003 rows=1 loops=69)
                                                               Index Cond: (id = receiver_deployment.receiver_id)
                                                   ->  Materialize  (cost=0.00..1.24 rows=16 width=13) (actual time=0.000..0.002 rows=16 loops=69)
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.003..0.007 rows=16 loops=1)
                                             ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.896..0.896 rows=1519 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                   ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.003..0.535 rows=1519 loops=1)
               ->  Nested Loop Left Join  (cost=1.41..24.57 rows=1 width=46) (actual time=0.019..0.022 rows=1 loops=69)
                     ->  Nested Loop Left Join  (cost=1.12..19.28 rows=1 width=46) (actual time=0.015..0.018 rows=1 loops=69)
                           ->  Nested Loop Left Join  (cost=0.84..13.72 rows=1 width=22) (actual time=0.012..0.013 rows=1 loops=69)
                                 ->  Nested Loop Left Join  (cost=0.56..8.36 rows=1 width=22) (actual time=0.008..0.009 rows=1 loops=69)
                                       ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.52 rows=1 width=22) (actual time=0.004..0.005 rows=1 loops=69)
                                             Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                       ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.002..0.003 rows=1 loops=70)
                                             Index Cond: (id = sensor.tag_id)
                                             Heap Fetches: 0
                                 ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=70)
                                       Index Cond: (tag.id = tag_id)
                           ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.003..0.003 rows=1 loops=70)
                                 Index Cond: (surgery.release_id = id)
                     ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=70)
                           Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.003..0.003 rows=1 loops=70)
               Index Cond: (animal.species_id = id)
 Total runtime: 16.887 ms
(70 rows)

-- Test Case 25 - 2716283 ^ 464 ^ 17098775 -> 4 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and spcode = '37346004'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=347855.87..643470.25 rows=100 width=279) (actual time=19917.023..19917.722 rows=4 loops=1)
   ->  Hash Left Join  (cost=347855.87..1456409.78 rows=375 width=279) (actual time=19917.021..19917.718 rows=4 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37346004'::text)
         Rows Removed by Filter: 902902
         ->  Hash Left Join  (cost=345367.67..1447217.10 rows=75008 width=239) (actual time=3399.444..19350.652 rows=902906 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=345247.15..1445783.94 rows=75008 width=239) (actual time=3397.225..18750.819 rows=902906 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=345045.95..1444270.10 rows=75008 width=215) (actual time=3393.982..18158.910 rows=902906 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=344900.68..1442123.76 rows=75008 width=215) (actual time=3391.589..17626.563 rows=902838 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=344625.07..1440254.23 rows=75008 width=215) (actual time=3388.289..17017.670 rows=902838 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=344444.67..1437473.06 rows=70502 width=193) (actual time=3385.227..16270.830 rows=902521 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=344433.77..1436488.52 rows=71634 width=187) (actual time=3385.076..15785.905 rows=902521 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=344431.63..1434962.82 rows=215258 width=168) (actual time=3385.033..15327.779 rows=902521 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=344372.45..1431943.84 rows=215258 width=168) (actual time=3384.271..14820.019 rows=902521 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=344371.09..1428982.69 rows=215258 width=171) (actual time=3384.252..14358.473 rows=902521 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Bitmap Heap Scan on valid_detection  (cost=343912.28..1365833.71 rows=16144362 width=52) (actual time=3377.557..11605.188 rows=16316319 loops=1)
                                                                           Recheck Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                           Rows Removed by Index Recheck: 501034
                                                                           ->  Bitmap Index Scan on valid_timestamp_index  (cost=0.00..339876.18 rows=16144362 width=0) (actual time=3376.020..3376.020 rows=16316319 loops=1)
                                                                                 Index Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.832..5.832 rows=282 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 43kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.409..5.698 rows=282 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.001..0.936 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.399..3.399 rows=282 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.175..3.263 rows=282 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.815 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.144..0.144 rows=45 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.066..0.125 rows=45 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.035..0.062 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.022 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.007..0.016 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.026..0.045 rows=45 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.017..0.017 rows=45 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.008..0.008 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.004 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.752..0.752 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.407 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.018 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.138..0.138 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.004..0.093 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=3.037..3.037 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.017..1.705 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.272..3.272 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.494 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=2.367..2.367 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.018..1.285 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=3.215..3.215 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.014..2.051 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=2.195..2.195 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.006..1.041 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=45.749..45.749 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.015..28.039 rows=36587 loops=1)
 Total runtime: 19918.049 ms
(86 rows)

-- Test Case 26 - 2716283 ^ 3913743 ^ 3129 -> 52 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and spcode = '37018030'
  and timestamp between '2013-04-02 05:00:00+00' and '2013-04-02 07:00:00+00'
limit 100;
                                                                                                                  QUERY PLAN                                                                                                                   
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=306.45..6075.51 rows=1 width=279) (actual time=13.506..16.567 rows=52 loops=1)
   ->  Nested Loop Left Join  (cost=306.45..6075.51 rows=1 width=279) (actual time=13.504..16.554 rows=52 loops=1)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018030'::text)
         Rows Removed by Filter: 18
         ->  Nested Loop Left Join  (cost=306.16..6012.49 rows=11 width=239) (actual time=13.310..15.858 rows=70 loops=1)
               ->  Nested Loop  (cost=304.76..5766.71 rows=10 width=193) (actual time=13.244..14.307 rows=69 loops=1)
                     Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
                     Rows Removed by Join Filter: 11868
                     ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.004..0.079 rows=173 loops=1)
                     ->  Materialize  (cost=304.76..5732.05 rows=10 width=187) (actual time=0.050..0.061 rows=69 loops=173)
                           ->  Nested Loop  (cost=304.76..5732.00 rows=10 width=187) (actual time=8.582..9.385 rows=69 loops=1)
                                 Join Filter: (receiver.organisation_id = organisation.id)
                                 Rows Removed by Join Filter: 3450
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.001..0.010 rows=51 loops=1)
                                 ->  Materialize  (cost=304.76..5707.62 rows=30 width=168) (actual time=0.099..0.164 rows=69 loops=51)
                                       ->  Hash Join  (cost=304.76..5707.47 rows=30 width=168) (actual time=5.027..7.963 rows=69 loops=1)
                                             Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                             ->  Nested Loop  (cost=245.58..5647.88 rows=30 width=168) (actual time=4.112..7.001 rows=69 loops=1)
                                                   Join Filter: (receiver.model_id = device_model.id)
                                                   Rows Removed by Join Filter: 1035
                                                   ->  Nested Loop  (cost=245.58..5639.48 rows=30 width=171) (actual time=4.101..6.662 rows=69 loops=1)
                                                         ->  Hash Join  (cost=245.30..5474.23 rows=30 width=156) (actual time=4.084..6.374 rows=69 loops=1)
                                                               Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                               ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..5220.91 rows=2213 width=52) (actual time=0.071..1.821 rows=2743 loops=1)
                                                                     Index Cond: (("timestamp" >= '2013-04-02 05:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-04-02 07:00:00+00'::timestamp with time zone))
                                                               ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.988..3.988 rows=282 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                     ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.221..3.861 rows=282 loops=1)
                                                                           Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                           ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..1.702 rows=5710 loops=1)
                                                                           ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.190..0.190 rows=45 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                 ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.073..0.170 rows=45 loops=1)
                                                                                       ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.038..0.063 rows=1 loops=1)
                                                                                             Hash Cond: (installation.project_id = receiver_project.id)
                                                                                             ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.017 rows=110 loops=1)
                                                                                             ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.020..0.020 rows=1 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                   ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.010..0.020 rows=1 loops=1)
                                                                                                         Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                         Rows Removed by Filter: 74
                                                                                       ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.032..0.090 rows=45 loops=1)
                                                                                             Recheck Cond: (installation_id = installation.id)
                                                                                             ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.016..0.016 rows=45 loops=1)
                                                                                                   Index Cond: (installation_id = installation.id)
                                                         ->  Index Scan using device_pkey on device receiver  (cost=0.28..5.50 rows=1 width=31) (actual time=0.003..0.003 rows=1 loops=69)
                                                               Index Cond: (id = receiver_deployment.receiver_id)
                                                   ->  Materialize  (cost=0.00..1.24 rows=16 width=13) (actual time=0.000..0.002 rows=16 loops=69)
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.003..0.008 rows=16 loops=1)
                                             ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.901..0.901 rows=1519 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                   ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.528 rows=1519 loops=1)
               ->  Nested Loop Left Join  (cost=1.41..24.57 rows=1 width=46) (actual time=0.018..0.021 rows=1 loops=69)
                     ->  Nested Loop Left Join  (cost=1.12..19.28 rows=1 width=46) (actual time=0.015..0.017 rows=1 loops=69)
                           ->  Nested Loop Left Join  (cost=0.84..13.72 rows=1 width=22) (actual time=0.011..0.013 rows=1 loops=69)
                                 ->  Nested Loop Left Join  (cost=0.56..8.36 rows=1 width=22) (actual time=0.008..0.009 rows=1 loops=69)
                                       ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.52 rows=1 width=22) (actual time=0.004..0.005 rows=1 loops=69)
                                             Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                       ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.002..0.003 rows=1 loops=70)
                                             Index Cond: (id = sensor.tag_id)
                                             Heap Fetches: 0
                                 ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=70)
                                       Index Cond: (tag.id = tag_id)
                           ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.003..0.003 rows=1 loops=70)
                                 Index Cond: (surgery.release_id = id)
                     ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=70)
                           Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.003..0.003 rows=1 loops=70)
               Index Cond: (animal.species_id = id)
 Total runtime: 16.894 ms
(70 rows)

\q
