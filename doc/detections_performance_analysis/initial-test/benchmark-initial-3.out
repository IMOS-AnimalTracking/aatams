
set role to aatams;
set role to aatams;
SET
-- Low selectivity filtering (large number of rows returned for each filter)
-- Test Case 1 - 2716283 rows limited to first 100
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=1455.68..2671.07 rows=100 width=279) (actual time=4084.727..4086.814 rows=100 loops=1)
   ->  Nested Loop Left Join  (cost=1455.68..2977903.27 rows=244897 width=279) (actual time=4084.725..4086.792 rows=100 loops=1)
         ->  Hash Left Join  (cost=1455.39..1569277.70 rows=244897 width=239) (actual time=4078.467..4079.326 rows=100 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=1334.87..1564871.48 rows=244897 width=239) (actual time=4076.257..4077.029 rows=100 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=1133.67..1560384.59 rows=244897 width=215) (actual time=4072.662..4073.355 rows=100 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=988.41..1553705.90 rows=244897 width=215) (actual time=4070.047..4070.659 rows=100 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=712.80..1548226.23 rows=244897 width=215) (actual time=4066.531..4067.058 rows=100 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=532.39..1539554.49 rows=230185 width=193) (actual time=4061.208..4061.631 rows=100 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=521.50..1536364.70 rows=233880 width=187) (actual time=4060.972..4061.331 rows=100 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=519.35..1531388.23 rows=702807 width=168) (actual time=4060.912..4061.214 rows=100 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=460.17..1521665.45 rows=702807 width=168) (actual time=4059.926..4060.152 rows=100 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=458.81..1512000.50 rows=702807 width=171) (actual time=4059.885..4060.052 rows=100 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.026..1966.384 rows=11768490 loops=1)
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=7.835..7.835 rows=282 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 43kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=4.094..7.637 rows=282 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..2.276 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=4.062..4.062 rows=282 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.252..3.857 rows=282 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.909 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.207..0.207 rows=45 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.104..0.186 rows=45 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.056..0.081 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.017 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.026..0.026 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.015..0.025 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.040..0.082 rows=45 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.025..0.025 rows=45 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.010..0.010 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.005 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.965..0.965 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.003..0.522 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.039..0.039 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.021 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.185..0.185 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.006..0.128 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=5.251..5.251 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=1.617..3.531 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.486..3.486 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.005..1.507 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=2.595..2.595 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.022..1.453 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=3.576..3.576 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.016..2.304 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=2.184..2.184 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.007..1.089 rows=4023 loops=1)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.004..0.005 rows=1 loops=100)
               Index Cond: (animal.species_id = id)
 Total runtime: 4087.594 ms
(78 rows)

-- Test Case 2 - 3913743 rows limited to first 100
explain analyze select * from detection_extract_test_view
where spcode = '37018030'
limit 100;
                                                                                                     QUERY PLAN                                                                                                      
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=4741.75..11153.44 rows=100 width=279) (actual time=99.407..100.491 rows=100 loops=1)
   ->  Hash Left Join  (cost=4741.75..5892981.17 rows=91836 width=279) (actual time=99.406..100.466 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018030'::text)
         Rows Removed by Filter: 578
         ->  Hash Left Join  (cost=2253.55..4336436.41 rows=18367253 width=239) (actual time=46.865..49.511 rows=814 loops=1)
               Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
               ->  Hash Join  (cost=1000.03..3698334.06 rows=17263859 width=193) (actual time=23.341..25.474 rows=814 loops=1)
                     Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                     ->  Hash Join  (cost=989.14..3459905.83 rows=17541004 width=187) (actual time=23.181..24.926 rows=814 loops=1)
                           Hash Cond: (receiver.organisation_id = organisation.id)
                           ->  Hash Join  (cost=986.99..3086829.12 rows=52710540 width=168) (actual time=23.135..24.523 rows=814 loops=1)
                                 Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                 ->  Hash Join  (cost=927.81..2362000.01 rows=52710540 width=168) (actual time=22.300..23.252 rows=814 loops=1)
                                       Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                       ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.002..0.180 rows=814 loops=1)
                                       ->  Hash  (cost=856.44..856.44 rows=5710 width=132) (actual time=22.278..22.278 rows=5710 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 969kB
                                             ->  Hash Join  (cost=382.84..856.44 rows=5710 width=132) (actual time=6.444..18.194 rows=5710 loops=1)
                                                   Hash Cond: (receiver.model_id = device_model.id)
                                                   ->  Hash Join  (cost=381.48..776.56 rows=5710 width=135) (actual time=6.426..15.754 rows=5710 loops=1)
                                                         Hash Cond: (receiver_deployment.receiver_id = receiver.id)
                                                         ->  Hash Join  (cost=105.87..379.62 rows=5710 width=120) (actual time=2.434..8.503 rows=5710 loops=1)
                                                               Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                               ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.001..0.932 rows=5710 loops=1)
                                                               ->  Hash  (cost=81.32..81.32 rows=1964 width=104) (actual time=2.422..2.422 rows=1964 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 280kB
                                                                     ->  Hash Join  (cost=8.68..81.32 rows=1964 width=104) (actual time=0.207..1.664 rows=1964 loops=1)
                                                                           Hash Cond: (installation_station.installation_id = installation.id)
                                                                           ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.032..0.481 rows=1964 loops=1)
                                                                           ->  Hash  (cost=7.30..7.30 rows=110 width=63) (actual time=0.168..0.168 rows=110 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 12kB
                                                                                 ->  Hash Join  (cost=2.69..7.30 rows=110 width=63) (actual time=0.065..0.122 rows=110 loops=1)
                                                                                       Hash Cond: (installation.project_id = receiver_project.id)
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.012 rows=110 loops=1)
                                                                                       ->  Hash  (cost=1.75..1.75 rows=75 width=39) (actual time=0.043..0.043 rows=75 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                             ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.003..0.016 rows=75 loops=1)
                                                         ->  Hash  (cost=185.27..185.27 rows=7227 width=31) (actual time=3.980..3.980 rows=7227 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 415kB
                                                               ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.004..2.142 rows=7227 loops=1)
                                                   ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.005 rows=16 loops=1)
                                 ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.823..0.823 rows=1519 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                       ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.500 rows=1519 loops=1)
                           ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.034..0.034 rows=51 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.022 rows=51 loops=1)
                     ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.147..0.147 rows=173 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 10kB
                           ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.092 rows=173 loops=1)
               ->  Hash  (cost=1187.18..1187.18 rows=5307 width=46) (actual time=23.507..23.507 rows=5488 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 386kB
                     ->  Hash Right Join  (cost=890.51..1187.18 rows=5307 width=46) (actual time=13.584..21.296 rows=5488 loops=1)
                           Hash Cond: (surgery.tag_id = tag.id)
                           ->  Hash Left Join  (cost=321.72..555.25 rows=3923 width=40) (actual time=4.696..9.862 rows=3923 loops=1)
                                 Hash Cond: (animal_release.animal_id = animal.id)
                                 ->  Hash Left Join  (cost=201.20..366.08 rows=3923 width=40) (actual time=2.768..6.028 rows=3923 loops=1)
                                       Hash Cond: (surgery.release_id = animal_release.id)
                                       ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.003..0.565 rows=3923 loops=1)
                                       ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.735..2.735 rows=3920 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 241kB
                                             ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.533 rows=3920 loops=1)
                                 ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.906..1.906 rows=4023 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 189kB
                                       ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.853 rows=4023 loops=1)
                           ->  Hash  (cost=502.45..502.45 rows=5307 width=22) (actual time=8.863..8.863 rows=5307 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                 ->  Hash Left Join  (cost=275.61..502.45 rows=5307 width=22) (actual time=3.449..7.306 rows=5307 loops=1)
                                       Hash Cond: (sensor.tag_id = tag.id)
                                       ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.004..0.742 rows=5307 loops=1)
                                       ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.423..3.423 rows=7227 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                             ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.499 rows=7227 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=49.805..49.805 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.038..31.974 rows=36587 loops=1)
 Total runtime: 102.130 ms
(80 rows)

-- Test Case 3 - 17098775 rows limited to first 100
explain analyze select * from detection_extract_test_view
where timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                         QUERY PLAN                                                                                                          
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=2.82..5771.79 rows=100 width=279) (actual time=1.086..20.981 rows=100 loops=1)
   ->  Nested Loop Left Join  (cost=2.82..324538024.05 rows=5625584 width=279) (actual time=1.085..20.953 rows=100 loops=1)
         ->  Nested Loop Left Join  (cost=2.53..292180169.69 rows=5625584 width=239) (actual time=1.035..19.857 rows=100 loops=1)
               ->  Nested Loop  (cost=1.12..162298013.33 rows=5287633 width=193) (actual time=0.919..17.712 rows=100 loops=1)
                     Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
                     Rows Removed by Join Filter: 17190
                     ->  Nested Loop  (cost=1.12..148356319.96 rows=5372518 width=187) (actual time=0.771..13.160 rows=100 loops=1)
                           Join Filter: (receiver.organisation_id = organisation.id)
                           Rows Removed by Join Filter: 4971
                           ->  Nested Loop  (cost=1.12..136005881.39 rows=16144362 width=168) (actual time=0.750..11.821 rows=100 loops=1)
                                 ->  Merge Join  (cost=0.85..52810510.08 rows=16144362 width=168) (actual time=0.718..11.331 rows=100 loops=1)
                                       Merge Cond: (receiver_deployment.id = valid_detection.receiver_deployment_id)
                                       ->  Nested Loop  (cost=0.28..810484.09 rows=5710 width=132) (actual time=0.700..6.663 rows=2 loops=1)
                                             Join Filter: (receiver.model_id = device_model.id)
                                             Rows Removed by Join Filter: 16
                                             ->  Nested Loop  (cost=0.28..809112.49 rows=5710 width=135) (actual time=0.696..6.638 rows=2 loops=1)
                                                   Join Filter: (receiver_deployment.receiver_id = receiver.id)
                                                   Rows Removed by Join Filter: 7243
                                                   ->  Nested Loop  (cost=0.28..189916.61 rows=5710 width=120) (actual time=0.680..1.735 rows=2 loops=1)
                                                         Join Filter: (installation.project_id = receiver_project.id)
                                                         Rows Removed by Join Filter: 86
                                                         ->  Nested Loop  (cost=0.28..183490.92 rows=5710 width=89) (actual time=0.668..1.677 rows=2 loops=1)
                                                               Join Filter: (installation_station.installation_id = installation.id)
                                                               Rows Removed by Join Filter: 112
                                                               ->  Nested Loop  (cost=0.28..174066.04 rows=5710 width=73) (actual time=0.660..1.600 rows=2 loops=1)
                                                                     Join Filter: (receiver_deployment.station_id = installation_station.id)
                                                                     Rows Removed by Join Filter: 2873
                                                                     ->  Index Scan using receiver_deployment_pkey on receiver_deployment  (cost=0.28..5798.89 rows=5710 width=24) (actual time=0.010..0.013 rows=2 loops=1)
                                                                     ->  Materialize  (cost=0.00..55.46 rows=1964 width=57) (actual time=0.005..0.581 rows=1438 loops=2)
                                                                           ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.005..0.498 rows=1964 loops=1)
                                                               ->  Materialize  (cost=0.00..3.65 rows=110 width=32) (actual time=0.002..0.029 rows=57 loops=2)
                                                                     ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.026 rows=110 loops=1)
                                                         ->  Materialize  (cost=0.00..2.12 rows=75 width=39) (actual time=0.002..0.022 rows=44 loops=2)
                                                               ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.003..0.016 rows=75 loops=1)
                                                   ->  Materialize  (cost=0.00..221.40 rows=7227 width=31) (actual time=0.002..1.979 rows=3622 loops=2)
                                                         ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.003..2.024 rows=7227 loops=1)
                                             ->  Materialize  (cost=0.00..1.24 rows=16 width=13) (actual time=0.001..0.009 rows=9 loops=2)
                                                   ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.007 rows=16 loops=1)
                                       ->  Index Scan using valid_detection_receiver_deployment_index on valid_detection  (cost=0.56..51801897.72 rows=16144362 width=52) (actual time=0.013..4.595 rows=100 loops=1)
                                             Filter: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                             Rows Removed by Filter: 2460
                                 ->  Index Scan using receiver_download_file_pkey on receiver_download_file  (cost=0.28..5.14 rows=1 width=16) (actual time=0.003..0.004 rows=1 loops=100)
                                       Index Cond: (id = valid_detection.receiver_download_id)
                           ->  Materialize  (cost=0.00..1.77 rows=51 width=35) (actual time=0.000..0.005 rows=51 loops=100)
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.022 rows=51 loops=1)
                     ->  Materialize  (cost=0.00..9.60 rows=173 width=22) (actual time=0.000..0.017 rows=173 loops=100)
                           ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.002..0.083 rows=173 loops=1)
               ->  Nested Loop Left Join  (cost=1.41..24.55 rows=1 width=46) (actual time=0.017..0.020 rows=1 loops=100)
                     ->  Nested Loop Left Join  (cost=1.12..19.26 rows=1 width=46) (actual time=0.014..0.016 rows=1 loops=100)
                           ->  Nested Loop Left Join  (cost=0.84..13.70 rows=1 width=22) (actual time=0.011..0.013 rows=1 loops=100)
                                 ->  Nested Loop Left Join  (cost=0.56..8.35 rows=1 width=22) (actual time=0.007..0.008 rows=1 loops=100)
                                       ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.50 rows=1 width=22) (actual time=0.004..0.004 rows=1 loops=100)
                                             Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                       ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.002..0.003 rows=1 loops=99)
                                             Index Cond: (id = sensor.tag_id)
                                             Heap Fetches: 0
                                 ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=99)
                                       Index Cond: (tag.id = tag_id)
                           ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.002..0.003 rows=1 loops=99)
                                 Index Cond: (surgery.release_id = id)
                     ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=99)
                           Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.002..0.003 rows=1 loops=100)
               Index Cond: (animal.species_id = id)
 Total runtime: 21.576 ms
(65 rows)

-- Test Case 4 -  2716283 ^ 3913743 -> 1420919 rows limited to first 100
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and spcode = '37018030'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=3943.60..133755.52 rows=100 width=279) (actual time=60.669..62.187 rows=100 loops=1)
   ->  Hash Left Join  (cost=3943.60..1592841.51 rows=1224 width=279) (actual time=60.667..62.163 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018030'::text)
         Rows Removed by Filter: 46
         ->  Hash Left Join  (cost=1455.39..1569277.70 rows=244897 width=239) (actual time=19.081..20.183 rows=146 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=1334.87..1564871.48 rows=244897 width=239) (actual time=17.223..18.228 rows=146 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=1133.67..1560384.59 rows=244897 width=215) (actual time=14.729..15.619 rows=146 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=988.41..1553705.90 rows=244897 width=215) (actual time=12.819..13.606 rows=146 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=712.80..1548226.23 rows=244897 width=215) (actual time=9.729..10.399 rows=146 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=532.39..1539554.49 rows=230185 width=193) (actual time=7.006..7.528 rows=146 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=521.50..1536364.70 rows=233880 width=187) (actual time=6.858..7.309 rows=146 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=519.35..1531388.23 rows=702807 width=168) (actual time=6.816..7.184 rows=146 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=460.17..1521665.45 rows=702807 width=168) (actual time=6.042..6.313 rows=146 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=458.81..1512000.50 rows=702807 width=171) (actual time=6.023..6.219 rows=146 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.003..0.114 rows=814 loops=1)
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.817..5.817 rows=282 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 43kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.430..5.671 rows=282 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..0.902 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.418..3.418 rows=282 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.171..3.291 rows=282 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.782 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.140..0.140 rows=45 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.065..0.124 rows=45 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.034..0.059 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.016 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.007..0.017 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.026..0.045 rows=45 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.017..0.017 rows=45 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.005 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.765..0.765 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.463 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.019 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.137..0.137 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.088 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.709..2.709 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.004..1.385 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.078..3.078 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.002..1.399 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=1.901..1.901 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.003..0.906 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.486..2.486 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.003..1.527 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.848..1.848 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.004..0.848 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.251..41.251 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.006..24.129 rows=36587 loops=1)
 Total runtime: 63.608 ms
(82 rows)

-- Test Case 5 - 2716283 ^ 17098775 -> 902906 rows limited to first 100
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                               QUERY PLAN                                                                                                                
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=463.19..7470.65 rows=100 width=279) (actual time=58.948..68.120 rows=100 loops=1)
   ->  Nested Loop Left Join  (cost=463.19..5256616.62 rows=75008 width=279) (actual time=58.946..68.093 rows=100 loops=1)
         ->  Nested Loop Left Join  (cost=462.90..4825177.33 rows=75008 width=239) (actual time=58.875..67.016 rows=100 loops=1)
               ->  Nested Loop  (cost=461.50..3093409.68 rows=70502 width=193) (actual time=58.795..64.973 rows=100 loops=1)
                     Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
                     Rows Removed by Join Filter: 17190
                     ->  Nested Loop  (cost=461.50..2907510.29 rows=71634 width=187) (actual time=58.650..60.649 rows=100 loops=1)
                           Join Filter: (receiver.organisation_id = organisation.id)
                           Rows Removed by Join Filter: 4971
                           ->  Nested Loop  (cost=461.50..2742836.28 rows=215258 width=168) (actual time=58.618..59.311 rows=100 loops=1)
                                 ->  Hash Join  (cost=461.22..1633565.49 rows=215258 width=168) (actual time=58.564..58.813 rows=100 loops=1)
                                       Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                       ->  Seq Scan on valid_detection  (cost=0.00..1570414.10 rows=16144362 width=52) (actual time=0.011..52.648 rows=768 loops=1)
                                             Filter: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                             Rows Removed by Filter: 141377
                                       ->  Hash  (cost=460.27..460.27 rows=76 width=132) (actual time=5.931..5.931 rows=282 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 42kB
                                             ->  Hash Join  (cost=246.09..460.27 rows=76 width=132) (actual time=3.352..5.779 rows=282 loops=1)
                                                   Hash Cond: (receiver.model_id = device_model.id)
                                                   ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.332..5.641 rows=282 loops=1)
                                                         Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                         ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..0.984 rows=7227 loops=1)
                                                         ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.321..3.321 rows=282 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                               ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.166..3.177 rows=282 loops=1)
                                                                     Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                     ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.751 rows=5710 loops=1)
                                                                     ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.135..0.135 rows=45 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                           ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.061..0.116 rows=45 loops=1)
                                                                                 ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.032..0.057 rows=1 loops=1)
                                                                                       Hash Cond: (installation.project_id = receiver_project.id)
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.017 rows=110 loops=1)
                                                                                       ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.015..0.015 rows=1 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                             ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.005..0.014 rows=1 loops=1)
                                                                                                   Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                   Rows Removed by Filter: 74
                                                                                 ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.025..0.041 rows=45 loops=1)
                                                                                       Recheck Cond: (installation_id = installation.id)
                                                                                       ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.016..0.016 rows=45 loops=1)
                                                                                             Index Cond: (installation_id = installation.id)
                                                   ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.012..0.012 rows=16 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.006 rows=16 loops=1)
                                 ->  Index Scan using receiver_download_file_pkey on receiver_download_file  (cost=0.28..5.14 rows=1 width=16) (actual time=0.004..0.004 rows=1 loops=100)
                                       Index Cond: (id = valid_detection.receiver_download_id)
                           ->  Materialize  (cost=0.00..1.77 rows=51 width=35) (actual time=0.000..0.005 rows=51 loops=100)
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.004..0.021 rows=51 loops=1)
                     ->  Materialize  (cost=0.00..9.60 rows=173 width=22) (actual time=0.000..0.016 rows=173 loops=100)
                           ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.003..0.075 rows=173 loops=1)
               ->  Nested Loop Left Join  (cost=1.41..24.55 rows=1 width=46) (actual time=0.017..0.019 rows=1 loops=100)
                     ->  Nested Loop Left Join  (cost=1.12..19.26 rows=1 width=46) (actual time=0.014..0.016 rows=1 loops=100)
                           ->  Nested Loop Left Join  (cost=0.84..13.70 rows=1 width=22) (actual time=0.010..0.012 rows=1 loops=100)
                                 ->  Nested Loop Left Join  (cost=0.56..8.35 rows=1 width=22) (actual time=0.007..0.008 rows=1 loops=100)
                                       ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.50 rows=1 width=22) (actual time=0.004..0.004 rows=1 loops=100)
                                             Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                       ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.002..0.002 rows=1 loops=100)
                                             Index Cond: (id = sensor.tag_id)
                                             Heap Fetches: 0
                                 ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=100)
                                       Index Cond: (tag.id = tag_id)
                           ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.002..0.003 rows=1 loops=100)
                                 Index Cond: (surgery.release_id = id)
                     ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.002..0.002 rows=1 loops=100)
                           Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.002..0.003 rows=1 loops=100)
               Index Cond: (animal.species_id = id)
 Total runtime: 68.443 ms
(69 rows)

-- Test Case 6 - 3913743 ^ 17098775 -> 2233756 rows limited to first 100
explain analyze select * from detection_extract_test_view
where spcode = '37018030'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                     QUERY PLAN                                                                                                      
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=348654.03..357276.65 rows=100 width=279) (actual time=3624.360..3625.503 rows=100 loops=1)
   ->  Hash Left Join  (cost=348654.03..2774024.89 rows=28128 width=279) (actual time=3624.359..3625.477 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018030'::text)
         Rows Removed by Filter: 1039
         ->  Hash Left Join  (cost=346165.82..2295305.48 rows=5625584 width=239) (actual time=3578.236..3582.729 rows=1139 loops=1)
               Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
               ->  Hash Join  (cost=344912.31..2098995.76 rows=5287633 width=193) (actual time=3554.755..3558.451 rows=1139 loops=1)
                     Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                     ->  Hash Join  (cost=344901.41..2025961.60 rows=5372518 width=187) (actual time=3554.603..3557.795 rows=1139 loops=1)
                           Hash Cond: (receiver.organisation_id = organisation.id)
                           ->  Hash Join  (cost=344899.27..1911692.91 rows=16144362 width=168) (actual time=3554.557..3557.170 rows=1139 loops=1)
                                 Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                 ->  Hash Join  (cost=344840.09..1689648.76 rows=16144362 width=168) (actual time=3553.767..3555.852 rows=1139 loops=1)
                                       Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                       ->  Bitmap Heap Scan on valid_detection  (cost=343912.28..1365833.71 rows=16144362 width=52) (actual time=3531.976..3533.213 rows=1139 loops=1)
                                             Recheck Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                             Rows Removed by Index Recheck: 1277
                                             ->  Bitmap Index Scan on valid_timestamp_index  (cost=0.00..339876.18 rows=16144362 width=0) (actual time=3530.382..3530.382 rows=16316319 loops=1)
                                                   Index Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                       ->  Hash  (cost=856.44..856.44 rows=5710 width=132) (actual time=21.769..21.769 rows=5710 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 969kB
                                             ->  Hash Join  (cost=382.84..856.44 rows=5710 width=132) (actual time=6.231..17.878 rows=5710 loops=1)
                                                   Hash Cond: (receiver.model_id = device_model.id)
                                                   ->  Hash Join  (cost=381.48..776.56 rows=5710 width=135) (actual time=6.214..15.474 rows=5710 loops=1)
                                                         Hash Cond: (receiver_deployment.receiver_id = receiver.id)
                                                         ->  Hash Join  (cost=105.87..379.62 rows=5710 width=120) (actual time=2.260..8.292 rows=5710 loops=1)
                                                               Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                               ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.923 rows=5710 loops=1)
                                                               ->  Hash  (cost=81.32..81.32 rows=1964 width=104) (actual time=2.249..2.249 rows=1964 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 280kB
                                                                     ->  Hash Join  (cost=8.68..81.32 rows=1964 width=104) (actual time=0.159..1.386 rows=1964 loops=1)
                                                                           Hash Cond: (installation_station.installation_id = installation.id)
                                                                           ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.003..0.264 rows=1964 loops=1)
                                                                           ->  Hash  (cost=7.30..7.30 rows=110 width=63) (actual time=0.147..0.147 rows=110 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 12kB
                                                                                 ->  Hash Join  (cost=2.69..7.30 rows=110 width=63) (actual time=0.050..0.116 rows=110 loops=1)
                                                                                       Hash Cond: (installation.project_id = receiver_project.id)
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.019 rows=110 loops=1)
                                                                                       ->  Hash  (cost=1.75..1.75 rows=75 width=39) (actual time=0.038..0.038 rows=75 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                             ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.002..0.015 rows=75 loops=1)
                                                         ->  Hash  (cost=185.27..185.27 rows=7227 width=31) (actual time=3.941..3.941 rows=7227 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 415kB
                                                               ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.003..2.037 rows=7227 loops=1)
                                                   ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.006 rows=16 loops=1)
                                 ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.778..0.778 rows=1519 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                       ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.432 rows=1519 loops=1)
                           ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.034..0.034 rows=51 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.001..0.016 rows=51 loops=1)
                     ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.136..0.136 rows=173 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 10kB
                           ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.083 rows=173 loops=1)
               ->  Hash  (cost=1187.18..1187.18 rows=5307 width=46) (actual time=23.435..23.435 rows=5488 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 386kB
                     ->  Hash Right Join  (cost=890.51..1187.18 rows=5307 width=46) (actual time=13.571..21.184 rows=5488 loops=1)
                           Hash Cond: (surgery.tag_id = tag.id)
                           ->  Hash Left Join  (cost=321.72..555.25 rows=3923 width=40) (actual time=4.739..9.861 rows=3923 loops=1)
                                 Hash Cond: (animal_release.animal_id = animal.id)
                                 ->  Hash Left Join  (cost=201.20..366.08 rows=3923 width=40) (actual time=2.762..5.965 rows=3923 loops=1)
                                       Hash Cond: (surgery.release_id = animal_release.id)
                                       ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.003..0.610 rows=3923 loops=1)
                                       ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.728..2.728 rows=3920 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 241kB
                                             ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.005..1.545 rows=3920 loops=1)
                                 ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.956..1.956 rows=4023 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 189kB
                                       ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.863 rows=4023 loops=1)
                           ->  Hash  (cost=502.45..502.45 rows=5307 width=22) (actual time=8.810..8.810 rows=5307 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                 ->  Hash Left Join  (cost=275.61..502.45 rows=5307 width=22) (actual time=3.456..7.257 rows=5307 loops=1)
                                       Hash Cond: (sensor.tag_id = tag.id)
                                       ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.007..0.738 rows=5307 loops=1)
                                       ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.425..3.425 rows=7227 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                             ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.491 rows=7227 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.629..41.629 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.006..24.238 rows=36587 loops=1)
 Total runtime: 3626.926 ms
(84 rows)

-- Test Case 7 - 2716283 ^ 3913743 ^ 17098775 -> 690003 rows limited to first 100
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and spcode = '37018030'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=347855.87..643470.25 rows=100 width=279) (actual time=3100.442..3101.935 rows=100 loops=1)
   ->  Hash Left Join  (cost=347855.87..1456409.78 rows=375 width=279) (actual time=3100.440..3101.910 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018030'::text)
         Rows Removed by Filter: 225
         ->  Hash Left Join  (cost=345367.67..1447217.10 rows=75008 width=239) (actual time=3057.603..3059.933 rows=325 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=345247.15..1445783.94 rows=75008 width=239) (actual time=3055.593..3057.717 rows=325 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=345045.95..1444270.10 rows=75008 width=215) (actual time=3052.848..3054.748 rows=325 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=344900.68..1442123.76 rows=75008 width=215) (actual time=3050.803..3052.519 rows=325 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=344625.07..1440254.23 rows=75008 width=215) (actual time=3047.393..3048.911 rows=325 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=344444.67..1437473.06 rows=70502 width=193) (actual time=3044.394..3045.646 rows=325 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=344433.77..1436488.52 rows=71634 width=187) (actual time=3044.242..3045.307 rows=325 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=344431.63..1434962.82 rows=215258 width=168) (actual time=3044.199..3045.093 rows=325 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=344372.45..1431943.84 rows=215258 width=168) (actual time=3043.446..3044.164 rows=325 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=344371.09..1428982.69 rows=215258 width=171) (actual time=3043.428..3043.971 rows=325 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Bitmap Heap Scan on valid_detection  (cost=343912.28..1365833.71 rows=16144362 width=52) (actual time=3036.838..3037.766 rows=1139 loops=1)
                                                                           Recheck Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                           Rows Removed by Index Recheck: 1277
                                                                           ->  Bitmap Index Scan on valid_timestamp_index  (cost=0.00..339876.18 rows=16144362 width=0) (actual time=3035.442..3035.442 rows=16316319 loops=1)
                                                                                 Index Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.872..5.872 rows=282 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 43kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.415..5.709 rows=282 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..0.976 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.403..3.403 rows=282 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.176..3.264 rows=282 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.797 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.145..0.145 rows=45 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.069..0.128 rows=45 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.036..0.062 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.016 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.017 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.028..0.049 rows=45 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.019..0.019 rows=45 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.005 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.743..0.743 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.425 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.021 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.138..0.138 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.094 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.973..2.973 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.007..1.340 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.376..3.376 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.005..1.514 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=2.011..2.011 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.004..0.940 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.723..2.723 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.003..1.571 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.989..1.989 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.846 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.158..41.158 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.006..23.866 rows=36587 loops=1)
 Total runtime: 3103.383 ms
(86 rows)

 
-- High selectivity filtering (small number of rows returned for each filter)
-- Test Case 8 - 5909 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=1455.68..2671.07 rows=100 width=279) (actual time=4682.029..4683.903 rows=100 loops=1)
   ->  Nested Loop Left Join  (cost=1455.68..2977903.27 rows=244897 width=279) (actual time=4682.027..4683.871 rows=100 loops=1)
         ->  Hash Left Join  (cost=1455.39..1569277.70 rows=244897 width=239) (actual time=4681.931..4682.704 rows=100 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=1334.87..1564871.48 rows=244897 width=239) (actual time=4679.979..4680.685 rows=100 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=1133.67..1560384.59 rows=244897 width=215) (actual time=4677.222..4677.857 rows=100 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=988.41..1553705.90 rows=244897 width=215) (actual time=4675.296..4675.870 rows=100 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=712.80..1548226.23 rows=244897 width=215) (actual time=4672.290..4672.794 rows=100 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=532.39..1539554.49 rows=230185 width=193) (actual time=4669.546..4669.961 rows=100 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=521.50..1536364.70 rows=233880 width=187) (actual time=4669.398..4669.759 rows=100 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=519.35..1531388.23 rows=702807 width=168) (actual time=4669.355..4669.643 rows=100 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=460.17..1521665.45 rows=702807 width=168) (actual time=4668.603..4668.838 rows=100 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=458.81..1512000.50 rows=702807 width=171) (actual time=4668.583..4668.755 rows=100 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.003..2391.621 rows=13260223 loops=1)
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.326..5.326 rows=64 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 11kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.202..5.296 rows=64 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.001..0.894 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.164..3.164 rows=64 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.207..3.137 rows=64 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.761 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.107..0.107 rows=15 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.063..0.101 rows=15 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.036..0.061 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.016 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.007..0.017 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.023..0.029 rows=15 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.015..0.015 rows=15 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.005 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.742..0.742 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.394 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.020 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.135..0.135 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.090 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.717..2.717 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.007..1.419 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=2.992..2.992 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.452 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=1.913..1.913 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.004..0.914 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.744..2.744 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.582 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.929..1.929 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.812 rows=4023 loops=1)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.003..0.004 rows=1 loops=100)
               Index Cond: (animal.species_id = id)
 Total runtime: 4684.232 ms
(78 rows)

-- Test Case 9 - 2153 rows
set geqo_threshold to 12;
SET
explain analyze select * from detection_extract_test_view
where spcode = '37018003'
limit 100;
                                                                                                     QUERY PLAN                                                                                                      
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=4741.75..11153.44 rows=100 width=279) (actual time=88.568..90.713 rows=100 loops=1)
   ->  Hash Left Join  (cost=4741.75..5892981.17 rows=91836 width=279) (actual time=88.566..90.690 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018003'::text)
         Rows Removed by Filter: 223
         ->  Hash Left Join  (cost=2253.55..4336436.41 rows=18367253 width=239) (actual time=46.361..48.620 rows=326 loops=1)
               Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
               ->  Hash Join  (cost=1000.03..3698334.06 rows=17263859 width=193) (actual time=22.937..24.944 rows=326 loops=1)
                     Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                     ->  Hash Join  (cost=989.14..3459905.83 rows=17541004 width=187) (actual time=22.788..24.636 rows=326 loops=1)
                           Hash Cond: (receiver.organisation_id = organisation.id)
                           ->  Hash Join  (cost=986.99..3086829.12 rows=52710540 width=168) (actual time=22.746..24.438 rows=326 loops=1)
                                 Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                 ->  Hash Join  (cost=927.81..2362000.01 rows=52710540 width=168) (actual time=21.986..23.524 rows=326 loops=1)
                                       Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                       ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.003..1.178 rows=326 loops=1)
                                       ->  Hash  (cost=856.44..856.44 rows=5710 width=132) (actual time=21.966..21.966 rows=5710 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 969kB
                                             ->  Hash Join  (cost=382.84..856.44 rows=5710 width=132) (actual time=6.217..17.893 rows=5710 loops=1)
                                                   Hash Cond: (receiver.model_id = device_model.id)
                                                   ->  Hash Join  (cost=381.48..776.56 rows=5710 width=135) (actual time=6.198..15.435 rows=5710 loops=1)
                                                         Hash Cond: (receiver_deployment.receiver_id = receiver.id)
                                                         ->  Hash Join  (cost=105.87..379.62 rows=5710 width=120) (actual time=2.240..8.259 rows=5710 loops=1)
                                                               Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                               ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.001..0.864 rows=5710 loops=1)
                                                               ->  Hash  (cost=81.32..81.32 rows=1964 width=104) (actual time=2.229..2.229 rows=1964 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 280kB
                                                                     ->  Hash Join  (cost=8.68..81.32 rows=1964 width=104) (actual time=0.158..1.443 rows=1964 loops=1)
                                                                           Hash Cond: (installation_station.installation_id = installation.id)
                                                                           ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.003..0.265 rows=1964 loops=1)
                                                                           ->  Hash  (cost=7.30..7.30 rows=110 width=63) (actual time=0.146..0.146 rows=110 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 12kB
                                                                                 ->  Hash Join  (cost=2.69..7.30 rows=110 width=63) (actual time=0.048..0.103 rows=110 loops=1)
                                                                                       Hash Cond: (installation.project_id = receiver_project.id)
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.015 rows=110 loops=1)
                                                                                       ->  Hash  (cost=1.75..1.75 rows=75 width=39) (actual time=0.038..0.038 rows=75 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                             ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.002..0.019 rows=75 loops=1)
                                                         ->  Hash  (cost=185.27..185.27 rows=7227 width=31) (actual time=3.946..3.946 rows=7227 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 415kB
                                                               ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.003..2.041 rows=7227 loops=1)
                                                   ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.005 rows=16 loops=1)
                                 ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.750..0.750 rows=1519 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                       ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.406 rows=1519 loops=1)
                           ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.019 rows=51 loops=1)
                     ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.136..0.136 rows=173 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 10kB
                           ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.006..0.094 rows=173 loops=1)
               ->  Hash  (cost=1187.18..1187.18 rows=5307 width=46) (actual time=23.397..23.397 rows=5488 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 386kB
                     ->  Hash Right Join  (cost=890.51..1187.18 rows=5307 width=46) (actual time=13.532..21.142 rows=5488 loops=1)
                           Hash Cond: (surgery.tag_id = tag.id)
                           ->  Hash Left Join  (cost=321.72..555.25 rows=3923 width=40) (actual time=4.698..9.795 rows=3923 loops=1)
                                 Hash Cond: (animal_release.animal_id = animal.id)
                                 ->  Hash Left Join  (cost=201.20..366.08 rows=3923 width=40) (actual time=2.774..6.008 rows=3923 loops=1)
                                       Hash Cond: (surgery.release_id = animal_release.id)
                                       ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.003..0.564 rows=3923 loops=1)
                                       ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.741..2.741 rows=3920 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 241kB
                                             ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.005..1.563 rows=3920 loops=1)
                                 ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.903..1.903 rows=4023 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 189kB
                                       ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.817 rows=4023 loops=1)
                           ->  Hash  (cost=502.45..502.45 rows=5307 width=22) (actual time=8.813..8.813 rows=5307 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                 ->  Hash Left Join  (cost=275.61..502.45 rows=5307 width=22) (actual time=3.428..7.261 rows=5307 loops=1)
                                       Hash Cond: (sensor.tag_id = tag.id)
                                       ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.004..0.752 rows=5307 loops=1)
                                       ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.402..3.402 rows=7227 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                             ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.470 rows=7227 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.216..41.216 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.006..24.143 rows=36587 loops=1)
 Total runtime: 92.151 ms
(80 rows)

-- Test Case 10 - 1065 rows
explain analyze select * from detection_extract_test_view
  where timestamp between '2014-07-30 12:00:00+00' and '2014-07-30 18:00:00+00'
limit 100;
                                                                                                                         QUERY PLAN                                                                                                                          
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=1609.87..2935.20 rows=100 width=279) (actual time=23.997..26.336 rows=100 loops=1)
   ->  Nested Loop Left Join  (cost=1609.87..8077.48 rows=488 width=279) (actual time=23.995..26.311 rows=100 loops=1)
         ->  Hash Join  (cost=1609.58..5270.55 rows=488 width=239) (actual time=23.904..25.118 rows=100 loops=1)
               Hash Cond: (receiver.organisation_id = organisation.id)
               ->  Hash Left Join  (cost=1607.43..5258.03 rows=1466 width=220) (actual time=23.846..24.992 rows=100 loops=1)
                     Hash Cond: (animal_release.animal_id = animal.id)
                     ->  Hash Left Join  (cost=1486.91..5111.85 rows=1466 width=220) (actual time=21.923..23.001 rows=100 loops=1)
                           Hash Cond: (surgery.release_id = animal_release.id)
                           ->  Hash Left Join  (cost=1285.71..4885.00 rows=1466 width=196) (actual time=19.185..20.191 rows=100 loops=1)
                                 Hash Cond: (tag.id = surgery.tag_id)
                                 ->  Hash Left Join  (cost=1140.45..4700.62 rows=1466 width=196) (actual time=17.143..18.074 rows=100 loops=1)
                                       Hash Cond: (sensor.tag_id = tag.id)
                                       ->  Hash Left Join  (cost=864.84..4393.86 rows=1466 width=196) (actual time=13.592..14.445 rows=100 loops=1)
                                             Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                             ->  Hash Join  (cost=684.43..4162.62 rows=1378 width=174) (actual time=10.560..11.317 rows=100 loops=1)
                                                   Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                                   ->  Hash Join  (cost=673.54..4132.70 rows=1400 width=168) (actual time=10.419..11.110 rows=100 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=614.36..4054.27 rows=1400 width=168) (actual time=9.666..10.299 rows=100 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=613.00..4033.66 rows=1400 width=171) (actual time=9.645..10.222 rows=100 loops=1)
                                                                     Hash Cond: (receiver_deployment.receiver_id = receiver.id)
                                                                     ->  Hash Join  (cost=337.39..3728.30 rows=1400 width=156) (actual time=5.658..6.155 rows=100 loops=1)
                                                                           Hash Cond: (installation.project_id = receiver_project.id)
                                                                           ->  Hash Join  (cost=334.70..3706.36 rows=1400 width=125) (actual time=5.603..6.044 rows=100 loops=1)
                                                                                 Hash Cond: (installation_station.installation_id = installation.id)
                                                                                 ->  Hash Join  (cost=330.23..3682.64 rows=1400 width=109) (actual time=5.534..5.916 rows=100 loops=1)
                                                                                       Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                       ->  Hash Join  (cost=260.04..3591.45 rows=1400 width=60) (actual time=4.376..4.690 rows=100 loops=1)
                                                                                             Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                                             ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..3303.97 rows=1400 width=52) (actual time=0.068..0.263 rows=100 loops=1)
                                                                                                   Index Cond: (("timestamp" >= '2014-07-30 12:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2014-07-30 18:00:00+00'::timestamp with time zone))
                                                                                             ->  Hash  (cost=188.10..188.10 rows=5710 width=24) (actual time=4.282..4.282 rows=5710 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 313kB
                                                                                                   ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.004..2.573 rows=5710 loops=1)
                                                                                       ->  Hash  (cost=45.64..45.64 rows=1964 width=57) (actual time=1.146..1.146 rows=1964 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 179kB
                                                                                             ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.004..0.516 rows=1964 loops=1)
                                                                                 ->  Hash  (cost=3.10..3.10 rows=110 width=32) (actual time=0.057..0.057 rows=110 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 8kB
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.003..0.026 rows=110 loops=1)
                                                                           ->  Hash  (cost=1.75..1.75 rows=75 width=39) (actual time=0.038..0.038 rows=75 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                 ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.003..0.018 rows=75 loops=1)
                                                                     ->  Hash  (cost=185.27..185.27 rows=7227 width=31) (actual time=3.976..3.976 rows=7227 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 415kB
                                                                           ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..2.198 rows=7227 loops=1)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.004 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.742..0.742 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.003..0.408 rows=1519 loops=1)
                                                   ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.129..0.129 rows=173 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                         ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.002..0.091 rows=173 loops=1)
                                             ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=3.002..3.002 rows=5307 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                                   ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.005..1.338 rows=5307 loops=1)
                                       ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.528..3.528 rows=7227 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                             ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.610 rows=7227 loops=1)
                                 ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=2.021..2.021 rows=3923 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                       ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.005..0.956 rows=3923 loops=1)
                           ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.717..2.717 rows=3920 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 241kB
                                 ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.003..1.531 rows=3920 loops=1)
                     ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.899..1.899 rows=4023 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 189kB
                           ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.828 rows=4023 loops=1)
               ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.041..0.041 rows=51 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 4kB
                     ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.006..0.025 rows=51 loops=1)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.004..0.004 rows=1 loops=100)
               Index Cond: (animal.species_id = id)
 Total runtime: 26.667 ms
(77 rows)

-- Test Case 11 - 5909 ^ 2153 -> 609 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and spcode = '37018003'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=3943.60..133755.52 rows=100 width=279) (actual time=60.586..61.959 rows=100 loops=1)
   ->  Hash Left Join  (cost=3943.60..1592841.51 rows=1224 width=279) (actual time=60.584..61.932 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018003'::text)
         Rows Removed by Filter: 25
         ->  Hash Left Join  (cost=1455.39..1569277.70 rows=244897 width=239) (actual time=18.730..19.597 rows=125 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=1334.87..1564871.48 rows=244897 width=239) (actual time=16.731..17.520 rows=125 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=1133.67..1560384.59 rows=244897 width=215) (actual time=14.007..14.713 rows=125 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=988.41..1553705.90 rows=244897 width=215) (actual time=12.086..12.711 rows=125 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=712.80..1548226.23 rows=244897 width=215) (actual time=9.128..9.675 rows=125 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=532.39..1539554.49 rows=230185 width=193) (actual time=6.406..6.844 rows=125 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=521.50..1536364.70 rows=233880 width=187) (actual time=6.257..6.632 rows=125 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=519.35..1531388.23 rows=702807 width=168) (actual time=6.216..6.517 rows=125 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=460.17..1521665.45 rows=702807 width=168) (actual time=5.437..5.660 rows=125 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=458.81..1512000.50 rows=702807 width=171) (actual time=5.419..5.583 rows=125 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.002..0.059 rows=326 loops=1)
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.346..5.346 rows=64 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 11kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.224..5.301 rows=64 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.001..0.932 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.186..3.186 rows=64 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.208..3.155 rows=64 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.823 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.107..0.107 rows=15 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.063..0.100 rows=15 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.036..0.061 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.014 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.018 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.024..0.031 rows=15 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.015..0.015 rows=15 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.006 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.771..0.771 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.422 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.034..0.034 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.003..0.016 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.137..0.137 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.083 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.704..2.704 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.005..1.363 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=2.945..2.945 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.002..1.387 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=1.910..1.910 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.003..0.896 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.712..2.712 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.003..1.511 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.977..1.977 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.849 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.639..41.639 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.004..24.147 rows=36587 loops=1)
 Total runtime: 63.351 ms
(82 rows)

-- Test Case 12 - 5909 ^ 1065 -> 55 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and timestamp between '2014-07-30 12:00:00+00' and '2014-07-30 18:00:00+00'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=247.55..3985.15 rows=6 width=279) (actual time=10.605..11.456 rows=55 loops=1)
   ->  Nested Loop Left Join  (cost=247.55..3985.15 rows=6 width=279) (actual time=10.604..11.435 rows=55 loops=1)
         ->  Nested Loop  (cost=247.26..3950.64 rows=6 width=239) (actual time=10.543..10.844 rows=55 loops=1)
               Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
               Rows Removed by Join Filter: 9460
               ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.004..0.035 rows=173 loops=1)
               ->  Materialize  (cost=247.26..3926.35 rows=6 width=233) (actual time=0.020..0.044 rows=55 loops=173)
                     ->  Nested Loop Left Join  (cost=247.26..3926.32 rows=6 width=233) (actual time=3.436..6.726 rows=55 loops=1)
                           ->  Nested Loop Left Join  (cost=246.98..3894.57 rows=6 width=233) (actual time=3.429..6.538 rows=55 loops=1)
                                 ->  Nested Loop Left Join  (cost=246.70..3861.21 rows=6 width=209) (actual time=3.420..6.340 rows=55 loops=1)
                                       ->  Nested Loop Left Join  (cost=246.42..3829.10 rows=6 width=209) (actual time=3.403..6.145 rows=55 loops=1)
                                             ->  Nested Loop Left Join  (cost=246.14..3812.02 rows=6 width=209) (actual time=3.377..5.962 rows=55 loops=1)
                                                   ->  Nested Loop  (cost=245.86..3778.81 rows=6 width=187) (actual time=3.346..5.674 rows=55 loops=1)
                                                         Join Filter: (receiver.organisation_id = organisation.id)
                                                         Rows Removed by Join Filter: 2750
                                                         ->  Nested Loop  (cost=245.86..3762.64 rows=19 width=168) (actual time=3.325..4.892 rows=55 loops=1)
                                                               ->  Nested Loop  (cost=245.58..3664.56 rows=19 width=168) (actual time=3.317..4.700 rows=55 loops=1)
                                                                     Join Filter: (receiver.model_id = device_model.id)
                                                                     Rows Removed by Join Filter: 825
                                                                     ->  Nested Loop  (cost=245.58..3658.80 rows=19 width=171) (actual time=3.308..4.432 rows=55 loops=1)
                                                                           ->  Hash Join  (cost=245.30..3554.14 rows=19 width=156) (actual time=3.289..4.192 rows=55 loops=1)
                                                                                 Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                                 ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..3303.97 rows=1400 width=52) (actual time=0.025..0.849 rows=1065 loops=1)
                                                                                       Index Cond: (("timestamp" >= '2014-07-30 12:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2014-07-30 18:00:00+00'::timestamp with time zone))
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.091..3.091 rows=64 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.207..3.054 rows=64 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.737 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.107..0.107 rows=15 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.061..0.098 rows=15 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.039..0.065 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.013 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.022..0.022 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.019 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.018..0.023 rows=15 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.011..0.011 rows=15 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                                           ->  Index Scan using device_pkey on device receiver  (cost=0.28..5.50 rows=1 width=31) (actual time=0.003..0.003 rows=1 loops=55)
                                                                                 Index Cond: (id = receiver_deployment.receiver_id)
                                                                     ->  Materialize  (cost=0.00..1.24 rows=16 width=13) (actual time=0.000..0.002 rows=16 loops=55)
                                                                           ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.003 rows=16 loops=1)
                                                               ->  Index Scan using receiver_download_file_pkey on receiver_download_file  (cost=0.28..5.15 rows=1 width=16) (actual time=0.002..0.002 rows=1 loops=55)
                                                                     Index Cond: (id = valid_detection.receiver_download_id)
                                                         ->  Materialize  (cost=0.00..1.77 rows=51 width=35) (actual time=0.000..0.006 rows=51 loops=55)
                                                               ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.003..0.019 rows=51 loops=1)
                                                   ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.53 rows=1 width=22) (actual time=0.004..0.004 rows=1 loops=55)
                                                         Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                             ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.002..0.003 rows=1 loops=55)
                                                   Index Cond: (id = sensor.tag_id)
                                                   Heap Fetches: 0
                                       ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=55)
                                             Index Cond: (tag.id = tag_id)
                                 ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.002..0.003 rows=1 loops=55)
                                       Index Cond: (surgery.release_id = id)
                           ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=55)
                                 Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.003..0.003 rows=1 loops=55)
               Index Cond: (animal.species_id = id)
 Total runtime: 11.781 ms
(66 rows)

-- Test Case 13 -  2153 ^ 1065 -> 55 rows
explain analyze select * from detection_extract_test_view
where spcode = '37018003'
  and timestamp between '2014-07-30 12:00:00+00' and '2014-07-30 18:00:00+00'
limit 100;
                                                                                                                            QUERY PLAN                                                                                                                             
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=4832.69..7874.54 rows=2 width=279) (actual time=30.158..37.910 rows=55 loops=1)
   ->  Nested Loop Left Join  (cost=4832.69..7874.54 rows=2 width=279) (actual time=30.156..37.890 rows=55 loops=1)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018003'::text)
         Rows Removed by Filter: 1010
         ->  Hash Left Join  (cost=4832.40..5079.76 rows=488 width=239) (actual time=30.050..33.746 rows=1065 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=4711.89..4950.70 rows=488 width=239) (actual time=28.111..31.233 rows=1065 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=4510.69..4740.96 rows=488 width=215) (actual time=25.363..27.896 rows=1065 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Right Join  (cost=4365.42..4582.67 rows=488 width=215) (actual time=23.339..25.293 rows=1065 loops=1)
                                 Hash Cond: (tag.id = sensor.tag_id)
                                 ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.003..0.906 rows=7227 loops=1)
                                 ->  Hash  (cost=4359.32..4359.32 rows=488 width=215) (actual time=22.318..22.318 rows=1065 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 327kB
                                       ->  Hash Left Join  (cost=866.99..4359.32 rows=488 width=215) (actual time=13.600..20.976 rows=1065 loops=1)
                                             Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                             ->  Hash Join  (cost=686.58..4161.98 rows=459 width=193) (actual time=10.576..17.070 rows=1065 loops=1)
                                                   Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                                   ->  Hash Join  (cost=675.68..4144.75 rows=466 width=187) (actual time=10.431..16.394 rows=1065 loops=1)
                                                         Hash Cond: (receiver.organisation_id = organisation.id)
                                                         ->  Hash Join  (cost=673.54..4132.70 rows=1400 width=168) (actual time=10.388..15.810 rows=1065 loops=1)
                                                               Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                               ->  Hash Join  (cost=614.36..4054.27 rows=1400 width=168) (actual time=9.618..14.468 rows=1065 loops=1)
                                                                     Hash Cond: (receiver.model_id = device_model.id)
                                                                     ->  Hash Join  (cost=613.00..4033.66 rows=1400 width=171) (actual time=9.601..13.903 rows=1065 loops=1)
                                                                           Hash Cond: (receiver_deployment.receiver_id = receiver.id)
                                                                           ->  Hash Join  (cost=337.39..3728.30 rows=1400 width=156) (actual time=5.548..9.120 rows=1065 loops=1)
                                                                                 Hash Cond: (installation.project_id = receiver_project.id)
                                                                                 ->  Hash Join  (cost=334.70..3706.36 rows=1400 width=125) (actual time=5.494..8.488 rows=1065 loops=1)
                                                                                       Hash Cond: (installation_station.installation_id = installation.id)
                                                                                       ->  Hash Join  (cost=330.23..3682.64 rows=1400 width=109) (actual time=5.428..7.856 rows=1065 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Hash Join  (cost=260.04..3591.45 rows=1400 width=60) (actual time=4.273..6.042 rows=1065 loops=1)
                                                                                                   Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                                                   ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..3303.97 rows=1400 width=52) (actual time=0.032..0.846 rows=1065 loops=1)
                                                                                                         Index Cond: (("timestamp" >= '2014-07-30 12:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2014-07-30 18:00:00+00'::timestamp with time zone))
                                                                                                   ->  Hash  (cost=188.10..188.10 rows=5710 width=24) (actual time=4.223..4.223 rows=5710 loops=1)
                                                                                                         Buckets: 1024  Batches: 1  Memory Usage: 313kB
                                                                                                         ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.004..2.557 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=45.64..45.64 rows=1964 width=57) (actual time=1.145..1.145 rows=1964 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 179kB
                                                                                                   ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.015..0.534 rows=1964 loops=1)
                                                                                       ->  Hash  (cost=3.10..3.10 rows=110 width=32) (actual time=0.057..0.057 rows=110 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 8kB
                                                                                             ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.004..0.033 rows=110 loops=1)
                                                                                 ->  Hash  (cost=1.75..1.75 rows=75 width=39) (actual time=0.039..0.039 rows=75 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                       ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.003..0.017 rows=75 loops=1)
                                                                           ->  Hash  (cost=185.27..185.27 rows=7227 width=31) (actual time=4.044..4.044 rows=7227 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 415kB
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..2.214 rows=7227 loops=1)
                                                                     ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                           ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.005 rows=16 loops=1)
                                                               ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.757..0.757 rows=1519 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                                     ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.429 rows=1519 loops=1)
                                                         ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                               ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.019 rows=51 loops=1)
                                                   ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.133..0.133 rows=173 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                         ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.089 rows=173 loops=1)
                                             ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.993..2.993 rows=5307 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                                   ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.005..1.365 rows=5307 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=1.996..1.996 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.004..0.906 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.728..2.728 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.578 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.916..1.916 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.823 rows=4023 loops=1)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.002..0.003 rows=1 loops=1065)
               Index Cond: (animal.species_id = id)
 Total runtime: 38.233 ms
(79 rows)

-- Test Case 14 -  5909 ^ 2153 ^ 1065 -> 55 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and spcode = '37018003'
  and timestamp between '2014-07-30 12:00:00+00' and '2014-07-30 18:00:00+00'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=247.55..3985.03 rows=1 width=279) (actual time=10.304..11.158 rows=55 loops=1)
   ->  Nested Loop Left Join  (cost=247.55..3985.03 rows=1 width=279) (actual time=10.302..11.141 rows=55 loops=1)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018003'::text)
         ->  Nested Loop  (cost=247.26..3950.64 rows=6 width=239) (actual time=10.243..10.529 rows=55 loops=1)
               Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
               Rows Removed by Join Filter: 9460
               ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.004..0.044 rows=173 loops=1)
               ->  Materialize  (cost=247.26..3926.35 rows=6 width=233) (actual time=0.020..0.042 rows=55 loops=173)
                     ->  Nested Loop Left Join  (cost=247.26..3926.32 rows=6 width=233) (actual time=3.359..6.459 rows=55 loops=1)
                           ->  Nested Loop Left Join  (cost=246.98..3894.57 rows=6 width=233) (actual time=3.351..6.270 rows=55 loops=1)
                                 ->  Nested Loop Left Join  (cost=246.70..3861.21 rows=6 width=209) (actual time=3.342..6.076 rows=55 loops=1)
                                       ->  Nested Loop Left Join  (cost=246.42..3829.10 rows=6 width=209) (actual time=3.334..5.887 rows=55 loops=1)
                                             ->  Nested Loop Left Join  (cost=246.14..3812.02 rows=6 width=209) (actual time=3.326..5.717 rows=55 loops=1)
                                                   ->  Nested Loop  (cost=245.86..3778.81 rows=6 width=187) (actual time=3.314..5.461 rows=55 loops=1)
                                                         Join Filter: (receiver.organisation_id = organisation.id)
                                                         Rows Removed by Join Filter: 2750
                                                         ->  Nested Loop  (cost=245.86..3762.64 rows=19 width=168) (actual time=3.293..4.699 rows=55 loops=1)
                                                               ->  Nested Loop  (cost=245.58..3664.56 rows=19 width=168) (actual time=3.286..4.509 rows=55 loops=1)
                                                                     Join Filter: (receiver.model_id = device_model.id)
                                                                     Rows Removed by Join Filter: 825
                                                                     ->  Nested Loop  (cost=245.58..3658.80 rows=19 width=171) (actual time=3.278..4.237 rows=55 loops=1)
                                                                           ->  Hash Join  (cost=245.30..3554.14 rows=19 width=156) (actual time=3.268..4.023 rows=55 loops=1)
                                                                                 Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                                 ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..3303.97 rows=1400 width=52) (actual time=0.025..0.647 rows=1065 loops=1)
                                                                                       Index Cond: (("timestamp" >= '2014-07-30 12:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2014-07-30 18:00:00+00'::timestamp with time zone))
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.124..3.124 rows=64 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.208..3.089 rows=64 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.715 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.107..0.107 rows=15 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.061..0.098 rows=15 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.040..0.067 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.020 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.020..0.020 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.007..0.017 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.018..0.023 rows=15 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.011..0.011 rows=15 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                                           ->  Index Scan using device_pkey on device receiver  (cost=0.28..5.50 rows=1 width=31) (actual time=0.003..0.003 rows=1 loops=55)
                                                                                 Index Cond: (id = receiver_deployment.receiver_id)
                                                                     ->  Materialize  (cost=0.00..1.24 rows=16 width=13) (actual time=0.000..0.002 rows=16 loops=55)
                                                                           ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.005 rows=16 loops=1)
                                                               ->  Index Scan using receiver_download_file_pkey on receiver_download_file  (cost=0.28..5.15 rows=1 width=16) (actual time=0.002..0.002 rows=1 loops=55)
                                                                     Index Cond: (id = valid_detection.receiver_download_id)
                                                         ->  Materialize  (cost=0.00..1.77 rows=51 width=35) (actual time=0.000..0.005 rows=51 loops=55)
                                                               ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.021 rows=51 loops=1)
                                                   ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.53 rows=1 width=22) (actual time=0.003..0.004 rows=1 loops=55)
                                                         Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                             ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.002..0.002 rows=1 loops=55)
                                                   Index Cond: (id = sensor.tag_id)
                                                   Heap Fetches: 0
                                       ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.002..0.002 rows=1 loops=55)
                                             Index Cond: (tag.id = tag_id)
                                 ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.002..0.003 rows=1 loops=55)
                                       Index Cond: (surgery.release_id = id)
                           ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=55)
                                 Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.003..0.003 rows=1 loops=55)
               Index Cond: (animal.species_id = id)
 Total runtime: 11.485 ms
(67 rows)

-- Mixed selectivity filtering
-- Test Case 15 - 5909 ^ 833188 -> 184 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and spcode = '37018021'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=3943.60..133755.52 rows=100 width=279) (actual time=62.025..6731.961 rows=100 loops=1)
   ->  Hash Left Join  (cost=3943.60..1592841.51 rows=1224 width=279) (actual time=62.024..6731.925 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018021'::text)
         Rows Removed by Filter: 1064
         ->  Hash Left Join  (cost=1455.39..1569277.70 rows=244897 width=239) (actual time=18.646..6689.111 rows=1176 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=1334.87..1564871.48 rows=244897 width=239) (actual time=16.618..6686.352 rows=1176 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=1133.67..1560384.59 rows=244897 width=215) (actual time=13.874..6682.865 rows=1176 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=988.41..1553705.90 rows=244897 width=215) (actual time=12.026..6680.316 rows=1176 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=712.80..1548226.23 rows=244897 width=215) (actual time=9.110..6676.640 rows=1176 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=532.39..1539554.49 rows=230185 width=193) (actual time=6.414..6672.970 rows=1176 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=521.50..1536364.70 rows=233880 width=187) (actual time=6.267..6672.191 rows=1176 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=519.35..1531388.23 rows=702807 width=168) (actual time=6.228..6671.518 rows=1176 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=460.17..1521665.45 rows=702807 width=168) (actual time=5.452..6670.132 rows=1176 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=458.81..1512000.50 rows=702807 width=171) (actual time=5.435..6669.512 rows=1176 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.002..3516.663 rows=19708981 loops=1)
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.342..5.342 rows=64 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 11kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.205..5.306 rows=64 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..0.919 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.169..3.169 rows=64 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.205..3.123 rows=64 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.001..0.814 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.104..0.104 rows=15 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.061..0.099 rows=15 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.034..0.059 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.013 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.007..0.017 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.022..0.029 rows=15 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.014..0.014 rows=15 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.007 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.767..0.767 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.426 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.032..0.032 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.016 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.134..0.134 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.004..0.092 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.680..2.680 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.004..1.339 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=2.903..2.903 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.003..1.410 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=1.837..1.837 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.003..0.905 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.732..2.732 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.003..1.565 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=2.009..2.009 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.865 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.318..41.318 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.005..24.308 rows=36587 loops=1)
 Total runtime: 6733.556 ms
(82 rows)

-- Test Case 16 - 5909 ^ 17098775 -> 3889 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                               QUERY PLAN                                                                                                                
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=463.19..7470.65 rows=100 width=279) (actual time=3112.507..3121.575 rows=100 loops=1)
   ->  Nested Loop Left Join  (cost=463.19..5256616.62 rows=75008 width=279) (actual time=3112.505..3121.543 rows=100 loops=1)
         ->  Nested Loop Left Join  (cost=462.90..4825177.33 rows=75008 width=239) (actual time=3112.435..3120.456 rows=100 loops=1)
               ->  Nested Loop  (cost=461.50..3093409.68 rows=70502 width=193) (actual time=3112.358..3118.457 rows=100 loops=1)
                     Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
                     Rows Removed by Join Filter: 17190
                     ->  Nested Loop  (cost=461.50..2907510.29 rows=71634 width=187) (actual time=3112.184..3114.155 rows=100 loops=1)
                           Join Filter: (receiver.organisation_id = organisation.id)
                           Rows Removed by Join Filter: 4971
                           ->  Nested Loop  (cost=461.50..2742836.28 rows=215258 width=168) (actual time=3112.124..3112.791 rows=100 loops=1)
                                 ->  Hash Join  (cost=461.22..1633565.49 rows=215258 width=168) (actual time=3112.065..3112.272 rows=100 loops=1)
                                       Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                       ->  Seq Scan on valid_detection  (cost=0.00..1570414.10 rows=16144362 width=52) (actual time=2.400..2682.054 rows=3301165 loops=1)
                                             Filter: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                             Rows Removed by Filter: 4938457
                                       ->  Hash  (cost=460.27..460.27 rows=76 width=132) (actual time=5.378..5.378 rows=64 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 11kB
                                             ->  Hash Join  (cost=246.09..460.27 rows=76 width=132) (actual time=3.199..5.341 rows=64 loops=1)
                                                   Hash Cond: (receiver.model_id = device_model.id)
                                                   ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.177..5.287 rows=64 loops=1)
                                                         Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                         ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..0.928 rows=7227 loops=1)
                                                         ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.137..3.137 rows=64 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                               ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.212..3.103 rows=64 loops=1)
                                                                     Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                     ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.740 rows=5710 loops=1)
                                                                     ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.113..0.113 rows=15 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                           ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.069..0.101 rows=15 loops=1)
                                                                                 ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.037..0.061 rows=1 loops=1)
                                                                                       Hash Cond: (installation.project_id = receiver_project.id)
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.015 rows=110 loops=1)
                                                                                       ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                             ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.017 rows=1 loops=1)
                                                                                                   Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                   Rows Removed by Filter: 74
                                                                                 ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.027..0.033 rows=15 loops=1)
                                                                                       Recheck Cond: (installation_id = installation.id)
                                                                                       ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.018..0.018 rows=15 loops=1)
                                                                                             Index Cond: (installation_id = installation.id)
                                                   ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.015..0.015 rows=16 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.003..0.008 rows=16 loops=1)
                                 ->  Index Scan using receiver_download_file_pkey on receiver_download_file  (cost=0.28..5.14 rows=1 width=16) (actual time=0.004..0.004 rows=1 loops=100)
                                       Index Cond: (id = valid_detection.receiver_download_id)
                           ->  Materialize  (cost=0.00..1.77 rows=51 width=35) (actual time=0.000..0.006 rows=51 loops=100)
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.020..0.047 rows=51 loops=1)
                     ->  Materialize  (cost=0.00..9.60 rows=173 width=22) (actual time=0.000..0.017 rows=173 loops=100)
                           ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.004..0.118 rows=173 loops=1)
               ->  Nested Loop Left Join  (cost=1.41..24.55 rows=1 width=46) (actual time=0.016..0.019 rows=1 loops=100)
                     ->  Nested Loop Left Join  (cost=1.12..19.26 rows=1 width=46) (actual time=0.013..0.015 rows=1 loops=100)
                           ->  Nested Loop Left Join  (cost=0.84..13.70 rows=1 width=22) (actual time=0.010..0.012 rows=1 loops=100)
                                 ->  Nested Loop Left Join  (cost=0.56..8.35 rows=1 width=22) (actual time=0.007..0.008 rows=1 loops=100)
                                       ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.50 rows=1 width=22) (actual time=0.004..0.004 rows=1 loops=100)
                                             Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                       ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.002..0.002 rows=1 loops=98)
                                             Index Cond: (id = sensor.tag_id)
                                             Heap Fetches: 0
                                 ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=98)
                                       Index Cond: (tag.id = tag_id)
                           ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.002..0.003 rows=1 loops=98)
                                 Index Cond: (surgery.release_id = id)
                     ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.002..0.003 rows=1 loops=98)
                           Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.002..0.003 rows=1 loops=100)
               Index Cond: (animal.species_id = id)
 Total runtime: 3121.891 ms
(69 rows)

-- Test Case 17 - 2716283 ^ 464 -> 448 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and spcode = '37346004'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=3943.60..133755.52 rows=100 width=279) (actual time=35417.068..35419.077 rows=100 loops=1)
   ->  Hash Left Join  (cost=3943.60..1592841.51 rows=1224 width=279) (actual time=35417.066..35419.046 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37346004'::text)
         Rows Removed by Filter: 2714033
         ->  Hash Left Join  (cost=1455.39..1569277.70 rows=244897 width=239) (actual time=3949.775..33935.538 rows=2716283 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=1334.87..1564871.48 rows=244897 width=239) (actual time=3947.758..32387.368 rows=2716283 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=1133.67..1560384.59 rows=244897 width=215) (actual time=3945.020..30817.141 rows=2716283 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=988.41..1553705.90 rows=244897 width=215) (actual time=3943.086..29299.230 rows=2711481 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=712.80..1548226.23 rows=244897 width=215) (actual time=3940.071..27636.776 rows=2711481 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=532.39..1539554.49 rows=230185 width=193) (actual time=3937.371..25681.644 rows=2710212 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=521.50..1536364.70 rows=233880 width=187) (actual time=3937.222..24269.370 rows=2710212 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=519.35..1531388.23 rows=702807 width=168) (actual time=3937.179..22878.840 rows=2710212 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=460.17..1521665.45 rows=702807 width=168) (actual time=3936.399..21427.297 rows=2710212 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=458.81..1512000.50 rows=702807 width=171) (actual time=3936.380..20085.331 rows=2710212 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Seq Scan on valid_detection  (cost=0.00..1306861.40 rows=52710540 width=52) (actual time=0.002..9411.778 rows=53115950 loops=1)
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.853..5.853 rows=282 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 43kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.428..5.714 rows=282 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.001..0.869 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.418..3.418 rows=282 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.192..3.280 rows=282 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.764 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.161..0.161 rows=45 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.067..0.143 rows=45 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.036..0.061 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.003..0.018 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.018 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.028..0.048 rows=45 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.018..0.018 rows=45 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.005 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.769..0.769 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.428 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.020 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.136..0.136 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.093 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.681..2.681 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.005..1.367 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.004..3.004 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.450 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=1.921..1.921 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.004..0.917 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.727..2.727 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.003..1.526 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=2.006..2.006 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.851 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.240..41.240 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.006..24.383 rows=36587 loops=1)
 Total runtime: 35421.258 ms
(82 rows)

-- Test Case 18 - 2716283 ^ 2005 -> 4 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and timestamp between '2013-06-08 00:00:00+00' and '2013-06-08 01:00:00+00'
limit 100;
                                                                                                                              QUERY PLAN                                                                                                                               
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=306.45..4504.01 rows=7 width=279) (actual time=6.519..6.694 rows=4 loops=1)
   ->  Nested Loop Left Join  (cost=306.45..4504.01 rows=7 width=279) (actual time=6.517..6.690 rows=4 loops=1)
         ->  Nested Loop Left Join  (cost=306.16..4463.74 rows=7 width=239) (actual time=6.456..6.599 rows=4 loops=1)
               ->  Nested Loop Left Join  (cost=305.88..4426.70 rows=7 width=239) (actual time=6.448..6.581 rows=4 loops=1)
                     ->  Nested Loop Left Join  (cost=305.60..4387.78 rows=7 width=215) (actual time=6.440..6.563 rows=4 loops=1)
                           ->  Nested Loop Left Join  (cost=305.32..4350.31 rows=7 width=215) (actual time=6.432..6.544 rows=4 loops=1)
                                 ->  Nested Loop Left Join  (cost=305.04..4330.39 rows=7 width=215) (actual time=6.424..6.525 rows=4 loops=1)
                                       ->  Nested Loop  (cost=304.76..4291.65 rows=7 width=193) (actual time=6.410..6.493 rows=4 loops=1)
                                             Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
                                             Rows Removed by Join Filter: 688
                                             ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.004..0.029 rows=173 loops=1)
                                             ->  Materialize  (cost=304.76..4264.77 rows=7 width=187) (actual time=0.035..0.036 rows=4 loops=173)
                                                   ->  Nested Loop  (cost=304.76..4264.74 rows=7 width=187) (actual time=6.032..6.095 rows=4 loops=1)
                                                         Join Filter: (receiver.organisation_id = organisation.id)
                                                         Rows Removed by Join Filter: 200
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.008 rows=51 loops=1)
                                                         ->  Materialize  (cost=304.76..4246.45 rows=22 width=168) (actual time=0.108..0.118 rows=4 loops=51)
                                                               ->  Hash Join  (cost=304.76..4246.34 rows=22 width=168) (actual time=5.506..5.977 rows=4 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                                     ->  Nested Loop  (cost=245.58..4186.86 rows=22 width=168) (actual time=4.717..5.186 rows=4 loops=1)
                                                                           Join Filter: (receiver.model_id = device_model.id)
                                                                           Rows Removed by Join Filter: 60
                                                                           ->  Nested Loop  (cost=245.58..4180.38 rows=22 width=171) (actual time=4.707..5.152 rows=4 loops=1)
                                                                                 ->  Hash Join  (cost=245.30..4059.20 rows=22 width=156) (actual time=4.695..5.124 rows=4 loops=1)
                                                                                       Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                                       ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..3808.21 rows=1613 width=52) (actual time=0.052..1.420 rows=1839 loops=1)
                                                                                             Index Cond: (("timestamp" >= '2013-06-08 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-06-08 01:00:00+00'::timestamp with time zone))
                                                                                       ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.366..3.366 rows=282 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                                             ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.169..3.246 rows=282 loops=1)
                                                                                                   Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                                   ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.001..0.760 rows=5710 loops=1)
                                                                                                   ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.138..0.138 rows=45 loops=1)
                                                                                                         Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                                         ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.063..0.123 rows=45 loops=1)
                                                                                                               ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.037..0.062 rows=1 loops=1)
                                                                                                                     Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                                     ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.003..0.016 rows=110 loops=1)
                                                                                                                     ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                           Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                           ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.007..0.017 rows=1 loops=1)
                                                                                                                                 Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                                                 Rows Removed by Filter: 74
                                                                                                               ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.023..0.039 rows=45 loops=1)
                                                                                                                     Recheck Cond: (installation_id = installation.id)
                                                                                                                     ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.014..0.014 rows=45 loops=1)
                                                                                                                           Index Cond: (installation_id = installation.id)
                                                                                 ->  Index Scan using device_pkey on device receiver  (cost=0.28..5.50 rows=1 width=31) (actual time=0.004..0.004 rows=1 loops=4)
                                                                                       Index Cond: (id = receiver_deployment.receiver_id)
                                                                           ->  Materialize  (cost=0.00..1.24 rows=16 width=13) (actual time=0.002..0.005 rows=16 loops=4)
                                                                                 ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.003..0.006 rows=16 loops=1)
                                                                     ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.775..0.775 rows=1519 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                                           ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.003..0.423 rows=1519 loops=1)
                                       ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.53 rows=1 width=22) (actual time=0.006..0.006 rows=1 loops=4)
                                             Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                 ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.003..0.003 rows=1 loops=4)
                                       Index Cond: (id = sensor.tag_id)
                                       Heap Fetches: 0
                           ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=4)
                                 Index Cond: (tag.id = tag_id)
                     ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.003..0.004 rows=1 loops=4)
                           Index Cond: (surgery.release_id = id)
               ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=4)
                     Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.003..0.004 rows=1 loops=4)
               Index Cond: (animal.species_id = id)
 Total runtime: 7.015 ms
(68 rows)

-- Test Case 19 - 464 ^ 17098775 -> 6 rows
explain analyze select * from detection_extract_test_view
where spcode = '37346004'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                     QUERY PLAN                                                                                                      
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=348654.03..357276.65 rows=100 width=279) (actual time=68035.703..68216.643 rows=6 loops=1)
   ->  Hash Left Join  (cost=348654.03..2774024.89 rows=28128 width=279) (actual time=68035.701..68216.639 rows=6 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37346004'::text)
         Rows Removed by Filter: 17098769
         ->  Hash Left Join  (cost=346165.82..2295305.48 rows=5625584 width=239) (actual time=3119.907..58998.314 rows=17098775 loops=1)
               Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
               ->  Hash Join  (cost=344912.31..2098995.76 rows=5287633 width=193) (actual time=3096.420..47524.833 rows=16316319 loops=1)
                     Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                     ->  Hash Join  (cost=344901.41..2025961.60 rows=5372518 width=187) (actual time=3096.269..40410.310 rows=16316319 loops=1)
                           Hash Cond: (receiver.organisation_id = organisation.id)
                           ->  Hash Join  (cost=344899.27..1911692.91 rows=16144362 width=168) (actual time=3096.222..32746.265 rows=16316319 loops=1)
                                 Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                 ->  Hash Join  (cost=344840.09..1689648.76 rows=16144362 width=168) (actual time=3095.446..25147.963 rows=16316319 loops=1)
                                       Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                       ->  Bitmap Heap Scan on valid_detection  (cost=343912.28..1365833.71 rows=16144362 width=52) (actual time=3073.711..12811.173 rows=16316319 loops=1)
                                             Recheck Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                             Rows Removed by Index Recheck: 501034
                                             ->  Bitmap Index Scan on valid_timestamp_index  (cost=0.00..339876.18 rows=16144362 width=0) (actual time=3072.234..3072.234 rows=16316319 loops=1)
                                                   Index Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                       ->  Hash  (cost=856.44..856.44 rows=5710 width=132) (actual time=21.714..21.714 rows=5710 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 969kB
                                             ->  Hash Join  (cost=382.84..856.44 rows=5710 width=132) (actual time=6.200..17.804 rows=5710 loops=1)
                                                   Hash Cond: (receiver.model_id = device_model.id)
                                                   ->  Hash Join  (cost=381.48..776.56 rows=5710 width=135) (actual time=6.183..15.440 rows=5710 loops=1)
                                                         Hash Cond: (receiver_deployment.receiver_id = receiver.id)
                                                         ->  Hash Join  (cost=105.87..379.62 rows=5710 width=120) (actual time=2.213..8.285 rows=5710 loops=1)
                                                               Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                               ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.908 rows=5710 loops=1)
                                                               ->  Hash  (cost=81.32..81.32 rows=1964 width=104) (actual time=2.202..2.202 rows=1964 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 280kB
                                                                     ->  Hash Join  (cost=8.68..81.32 rows=1964 width=104) (actual time=0.158..1.444 rows=1964 loops=1)
                                                                           Hash Cond: (installation_station.installation_id = installation.id)
                                                                           ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.003..0.263 rows=1964 loops=1)
                                                                           ->  Hash  (cost=7.30..7.30 rows=110 width=63) (actual time=0.147..0.147 rows=110 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 12kB
                                                                                 ->  Hash Join  (cost=2.69..7.30 rows=110 width=63) (actual time=0.051..0.105 rows=110 loops=1)
                                                                                       Hash Cond: (installation.project_id = receiver_project.id)
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.014 rows=110 loops=1)
                                                                                       ->  Hash  (cost=1.75..1.75 rows=75 width=39) (actual time=0.038..0.038 rows=75 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                             ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.002..0.018 rows=75 loops=1)
                                                         ->  Hash  (cost=185.27..185.27 rows=7227 width=31) (actual time=3.957..3.957 rows=7227 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 415kB
                                                               ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..2.081 rows=7227 loops=1)
                                                   ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.003 rows=16 loops=1)
                                 ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.763..0.763 rows=1519 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                       ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.421 rows=1519 loops=1)
                           ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.016 rows=51 loops=1)
                     ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.135..0.135 rows=173 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 10kB
                           ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.091 rows=173 loops=1)
               ->  Hash  (cost=1187.18..1187.18 rows=5307 width=46) (actual time=23.451..23.451 rows=5488 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 386kB
                     ->  Hash Right Join  (cost=890.51..1187.18 rows=5307 width=46) (actual time=13.606..21.197 rows=5488 loops=1)
                           Hash Cond: (surgery.tag_id = tag.id)
                           ->  Hash Left Join  (cost=321.72..555.25 rows=3923 width=40) (actual time=4.782..9.865 rows=3923 loops=1)
                                 Hash Cond: (animal_release.animal_id = animal.id)
                                 ->  Hash Left Join  (cost=201.20..366.08 rows=3923 width=40) (actual time=2.803..6.051 rows=3923 loops=1)
                                       Hash Cond: (surgery.release_id = animal_release.id)
                                       ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.002..0.576 rows=3923 loops=1)
                                       ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.763..2.763 rows=3920 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 241kB
                                             ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.544 rows=3920 loops=1)
                                 ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.959..1.959 rows=4023 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 189kB
                                       ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.004..0.842 rows=4023 loops=1)
                           ->  Hash  (cost=502.45..502.45 rows=5307 width=22) (actual time=8.800..8.800 rows=5307 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                 ->  Hash Left Join  (cost=275.61..502.45 rows=5307 width=22) (actual time=3.471..7.242 rows=5307 loops=1)
                                       Hash Cond: (sensor.tag_id = tag.id)
                                       ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.007..0.710 rows=5307 loops=1)
                                       ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.438..3.438 rows=7227 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                             ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.005..1.518 rows=7227 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=41.657..41.657 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.007..24.519 rows=36587 loops=1)
 Total runtime: 68216.983 ms
(84 rows)

-- Test Case 20 - 833188 ^ 5489 -> 210 rows
explain analyze select * from detection_extract_test_view
where spcode = '37018021'
  and timestamp between '2013-09-24 00:00:00+00' and '2013-09-24 04:00:00+00'
limit 100;
                                                                                                                         QUERY PLAN                                                                                                                          
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=4097.78..16057.70 rows=8 width=279) (actual time=65.426..102.481 rows=100 loops=1)
   ->  Hash Left Join  (cost=4097.78..16057.70 rows=8 width=279) (actual time=65.424..102.453 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018021'::text)
         Rows Removed by Filter: 2432
         ->  Hash Left Join  (cost=1609.58..13075.53 rows=1587 width=239) (actual time=23.903..57.546 rows=3468 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=1489.06..12927.24 rows=1587 width=239) (actual time=21.909..53.167 rows=3468 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=1287.86..12698.27 rows=1587 width=215) (actual time=19.146..48.086 rows=3468 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=1142.59..12510.67 rows=1587 width=215) (actual time=17.103..43.771 rows=3357 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=866.99..12201.34 rows=1587 width=215) (actual time=13.677..37.885 rows=3357 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=686.58..11965.89 rows=1492 width=193) (actual time=10.678..32.103 rows=3143 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=675.68..11934.41 rows=1515 width=187) (actual time=10.519..30.312 rows=3143 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=673.54..11900.04 rows=4554 width=168) (actual time=10.473..28.563 rows=3143 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=614.36..11778.24 rows=4554 width=168) (actual time=9.713..25.871 rows=3143 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=613.00..11714.26 rows=4554 width=171) (actual time=9.692..24.129 rows=3143 loops=1)
                                                                     Hash Cond: (receiver_deployment.receiver_id = receiver.id)
                                                                     ->  Hash Join  (cost=337.39..11341.88 rows=4554 width=156) (actual time=5.749..17.925 rows=3143 loops=1)
                                                                           Hash Cond: (installation.project_id = receiver_project.id)
                                                                           ->  Hash Join  (cost=334.70..11276.58 rows=4554 width=125) (actual time=5.693..16.103 rows=3143 loops=1)
                                                                                 Hash Cond: (installation_station.installation_id = installation.id)
                                                                                 ->  Hash Join  (cost=330.23..11209.49 rows=4554 width=109) (actual time=5.623..14.340 rows=3143 loops=1)
                                                                                       Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                       ->  Hash Join  (cost=260.04..11070.99 rows=4554 width=60) (actual time=4.454..10.986 rows=3143 loops=1)
                                                                                             Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                                             ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..10720.43 rows=4554 width=52) (actual time=0.074..3.627 rows=3143 loops=1)
                                                                                                   Index Cond: (("timestamp" >= '2013-09-24 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-24 04:00:00+00'::timestamp with time zone))
                                                                                             ->  Hash  (cost=188.10..188.10 rows=5710 width=24) (actual time=4.352..4.352 rows=5710 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 313kB
                                                                                                   ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.003..2.570 rows=5710 loops=1)
                                                                                       ->  Hash  (cost=45.64..45.64 rows=1964 width=57) (actual time=1.157..1.157 rows=1964 loops=1)
                                                                                             Buckets: 1024  Batches: 1  Memory Usage: 179kB
                                                                                             ->  Seq Scan on installation_station  (cost=0.00..45.64 rows=1964 width=57) (actual time=0.004..0.516 rows=1964 loops=1)
                                                                                 ->  Hash  (cost=3.10..3.10 rows=110 width=32) (actual time=0.058..0.058 rows=110 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 8kB
                                                                                       ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.003..0.022 rows=110 loops=1)
                                                                           ->  Hash  (cost=1.75..1.75 rows=75 width=39) (actual time=0.040..0.040 rows=75 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                 ->  Seq Scan on project receiver_project  (cost=0.00..1.75 rows=75 width=39) (actual time=0.004..0.017 rows=75 loops=1)
                                                                     ->  Hash  (cost=185.27..185.27 rows=7227 width=31) (actual time=3.933..3.933 rows=7227 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 415kB
                                                                           ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.003..2.106 rows=7227 loops=1)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.005 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.749..0.749 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.426 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.018 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.141..0.141 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.093 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.979..2.979 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.005..1.356 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.409..3.409 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.502 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=2.014..2.014 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.005..0.908 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.749..2.749 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.003..1.588 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.974..1.974 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.832 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=40.954..40.954 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.005..24.273 rows=36587 loops=1)
 Total runtime: 104.180 ms
(81 rows)

-- Test Case 21 - 5909 ^ 2153 ^ 17098775 -> 284 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and spcode = '37018003'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=347855.87..643470.25 rows=100 width=279) (actual time=9035.706..9038.993 rows=100 loops=1)
   ->  Hash Left Join  (cost=347855.87..1456409.78 rows=375 width=279) (actual time=9035.704..9038.958 rows=100 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018003'::text)
         Rows Removed by Filter: 1601
         ->  Hash Left Join  (cost=345367.67..1447217.10 rows=75008 width=239) (actual time=6272.888..8996.465 rows=1723 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=345247.15..1445783.94 rows=75008 width=239) (actual time=6270.870..8993.371 rows=1723 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=345045.95..1444270.10 rows=75008 width=215) (actual time=6268.141..8989.561 rows=1723 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=344900.68..1442123.76 rows=75008 width=215) (actual time=6266.111..8986.527 rows=1723 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=344625.07..1440254.23 rows=75008 width=215) (actual time=6262.705..8982.001 rows=1723 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=344444.67..1437473.06 rows=70502 width=193) (actual time=6259.869..8977.756 rows=1688 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=344433.77..1436488.52 rows=71634 width=187) (actual time=6259.715..8976.709 rows=1688 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=344431.63..1434962.82 rows=215258 width=168) (actual time=6259.673..8975.782 rows=1688 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=344372.45..1431943.84 rows=215258 width=168) (actual time=6258.908..8974.167 rows=1688 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=344371.09..1428982.69 rows=215258 width=171) (actual time=6258.889..8973.227 rows=1688 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Bitmap Heap Scan on valid_detection  (cost=343912.28..1365833.71 rows=16144362 width=52) (actual time=3356.914..7813.017 rows=8995312 loops=1)
                                                                           Recheck Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                           Rows Removed by Index Recheck: 483609
                                                                           ->  Bitmap Index Scan on valid_timestamp_index  (cost=0.00..339876.18 rows=16144362 width=0) (actual time=3355.395..3355.395 rows=16316319 loops=1)
                                                                                 Index Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.327..5.327 rows=64 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 11kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.175..5.286 rows=64 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.001..0.941 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.136..3.136 rows=64 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.211..3.105 rows=64 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.797 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.111..0.111 rows=15 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.065..0.103 rows=15 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.037..0.063 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.003..0.016 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.018 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.024..0.030 rows=15 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.016..0.016 rows=15 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.008..0.008 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.003 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.755..0.755 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.414 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.034..0.034 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.018 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.140..0.140 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.091 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=2.809..2.809 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.008..1.337 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.386..3.386 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.005..1.518 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=2.009..2.009 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.004..0.940 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=2.706..2.706 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.004..1.524 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=1.999..1.999 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..0.846 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=40.895..40.895 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.005..23.888 rows=36587 loops=1)
 Total runtime: 9040.521 ms
(86 rows)

-- Test Case 22 - 5909 ^ 833188 ^ 5489 -> 13 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and spcode = '37018021'
  and timestamp between '2013-09-24 00:00:00+00' and '2013-09-24 04:00:00+00'
limit 100;
                                                                                                                  QUERY PLAN                                                                                                                   
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=520.25..11993.47 rows=1 width=279) (actual time=11.797..12.238 rows=13 loops=1)
   ->  Nested Loop Left Join  (cost=520.25..11993.47 rows=1 width=279) (actual time=11.796..12.234 rows=13 loops=1)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018021'::text)
         ->  Nested Loop Left Join  (cost=519.96..11873.17 rows=21 width=239) (actual time=11.715..12.027 rows=13 loops=1)
               ->  Nested Loop  (cost=518.56..11381.77 rows=20 width=193) (actual time=11.605..11.678 rows=13 loops=1)
                     Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
                     Rows Removed by Join Filter: 2236
                     ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.004..0.034 rows=173 loops=1)
                     ->  Materialize  (cost=518.56..11321.19 rows=20 width=187) (actual time=0.038..0.063 rows=13 loops=173)
                           ->  Nested Loop  (cost=518.56..11321.09 rows=20 width=187) (actual time=6.581..10.630 rows=13 loops=1)
                                 Join Filter: (receiver.organisation_id = organisation.id)
                                 Rows Removed by Join Filter: 650
                                 ->  Hash Join  (cost=518.56..11272.79 rows=61 width=168) (actual time=6.557..10.425 rows=13 loops=1)
                                       Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                       ->  Nested Loop  (cost=459.38..11212.77 rows=61 width=168) (actual time=5.787..9.647 rows=13 loops=1)
                                             Join Filter: (receiver.model_id = device_model.id)
                                             Rows Removed by Join Filter: 195
                                             ->  Hash Join  (cost=459.38..11196.93 rows=61 width=171) (actual time=5.776..9.574 rows=13 loops=1)
                                                   Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                   ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..10720.43 rows=4554 width=52) (actual time=0.059..3.393 rows=5041 loops=1)
                                                         Index Cond: (("timestamp" >= '2013-09-24 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-24 04:00:00+00'::timestamp with time zone))
                                                   ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.306..5.306 rows=64 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 11kB
                                                         ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.146..5.257 rows=64 loops=1)
                                                               Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                               ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..0.922 rows=7227 loops=1)
                                                               ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.108..3.108 rows=64 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                     ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.203..3.073 rows=64 loops=1)
                                                                           Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                           ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.705 rows=5710 loops=1)
                                                                           ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.104..0.104 rows=15 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                 ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.059..0.096 rows=15 loops=1)
                                                                                       ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.036..0.060 rows=1 loops=1)
                                                                                             Hash Cond: (installation.project_id = receiver_project.id)
                                                                                             ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.015 rows=110 loops=1)
                                                                                             ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                   ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.007..0.017 rows=1 loops=1)
                                                                                                         Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                         Rows Removed by Filter: 74
                                                                                       ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.020..0.026 rows=15 loops=1)
                                                                                             Recheck Cond: (installation_id = installation.id)
                                                                                             ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.012..0.012 rows=15 loops=1)
                                                                                                   Index Cond: (installation_id = installation.id)
                                             ->  Materialize  (cost=0.00..1.24 rows=16 width=13) (actual time=0.000..0.002 rows=16 loops=13)
                                                   ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.005 rows=16 loops=1)
                                       ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.757..0.757 rows=1519 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                             ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.003..0.422 rows=1519 loops=1)
                                 ->  Materialize  (cost=0.00..1.77 rows=51 width=35) (actual time=0.000..0.007 rows=51 loops=13)
                                       ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.003..0.019 rows=51 loops=1)
               ->  Nested Loop Left Join  (cost=1.41..24.56 rows=1 width=46) (actual time=0.023..0.026 rows=1 loops=13)
                     ->  Nested Loop Left Join  (cost=1.12..19.27 rows=1 width=46) (actual time=0.019..0.021 rows=1 loops=13)
                           ->  Nested Loop Left Join  (cost=0.84..13.71 rows=1 width=22) (actual time=0.015..0.016 rows=1 loops=13)
                                 ->  Nested Loop Left Join  (cost=0.56..8.36 rows=1 width=22) (actual time=0.011..0.012 rows=1 loops=13)
                                       ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.51 rows=1 width=22) (actual time=0.005..0.006 rows=1 loops=13)
                                             Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                       ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.004..0.004 rows=1 loops=13)
                                             Index Cond: (id = sensor.tag_id)
                                             Heap Fetches: 0
                                 ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=13)
                                       Index Cond: (tag.id = tag_id)
                           ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.003..0.003 rows=1 loops=13)
                                 Index Cond: (surgery.release_id = id)
                     ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=13)
                           Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.003..0.004 rows=1 loops=13)
               Index Cond: (animal.species_id = id)
 Total runtime: 12.592 ms
(71 rows)

-- Test Case 23 - 5909 ^ 833188 ^ 17098775 -> 54 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Coffs Harbour line'
  and spcode = '37018021'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=347855.87..643470.25 rows=100 width=279) (actual time=6341.784..13601.407 rows=54 loops=1)
   ->  Hash Left Join  (cost=347855.87..1456409.78 rows=375 width=279) (actual time=6341.782..13601.389 rows=54 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018021'::text)
         Rows Removed by Filter: 3835
         ->  Hash Left Join  (cost=345367.67..1447217.10 rows=75008 width=239) (actual time=6293.940..13549.946 rows=3889 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=345247.15..1445783.94 rows=75008 width=239) (actual time=6291.660..13545.118 rows=3889 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=345045.95..1444270.10 rows=75008 width=215) (actual time=6288.416..13539.489 rows=3889 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=344900.68..1442123.76 rows=75008 width=215) (actual time=6285.994..13534.832 rows=3889 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=344625.07..1440254.23 rows=75008 width=215) (actual time=6282.829..13529.179 rows=3889 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=344444.67..1437473.06 rows=70502 width=193) (actual time=6279.736..13522.891 rows=3854 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=344433.77..1436488.52 rows=71634 width=187) (actual time=6279.587..13520.821 rows=3854 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=344431.63..1434962.82 rows=215258 width=168) (actual time=6279.544..13518.799 rows=3854 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=344372.45..1431943.84 rows=215258 width=168) (actual time=6278.783..13515.883 rows=3854 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=344371.09..1428982.69 rows=215258 width=171) (actual time=6278.764..13513.820 rows=3854 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Bitmap Heap Scan on valid_detection  (cost=343912.28..1365833.71 rows=16144362 width=52) (actual time=3371.053..11410.791 rows=16316319 loops=1)
                                                                           Recheck Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                           Rows Removed by Index Recheck: 501034
                                                                           ->  Bitmap Index Scan on valid_timestamp_index  (cost=0.00..339876.18 rows=16144362 width=0) (actual time=3369.537..3369.537 rows=16316319 loops=1)
                                                                                 Index Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.394..5.394 rows=64 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 11kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.211..5.350 rows=64 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.003..0.959 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.157..3.157 rows=64 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.230..3.122 rows=64 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..0.752 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.117..0.117 rows=15 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 2kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.064..0.111 rows=15 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.037..0.071 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.003..0.015 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.018..0.018 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.007..0.017 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Coffs Harbour line'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.023..0.029 rows=15 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.016..0.016 rows=15 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.009..0.009 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.006 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.750..0.750 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.401 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.033..0.033 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.018 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.136..0.136 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.088 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=3.064..3.064 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.019..1.736 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.145..3.145 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.503 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=2.396..2.396 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.018..1.288 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=3.217..3.217 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.014..2.034 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=2.254..2.254 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.005..1.047 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=45.760..45.760 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.016..28.049 rows=36587 loops=1)
 Total runtime: 13601.761 ms
(86 rows)

-- Test Case 24 - 2716283 ^ 464 ^ 3129 -> 2 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and spcode = '37346004'
  and timestamp between '2013-04-02 05:00:00+00' and '2013-04-02 07:00:00+00'
limit 100;
                                                                                                                  QUERY PLAN                                                                                                                   
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=306.45..6075.51 rows=1 width=279) (actual time=15.006..16.478 rows=2 loops=1)
   ->  Nested Loop Left Join  (cost=306.45..6075.51 rows=1 width=279) (actual time=15.005..16.476 rows=2 loops=1)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37346004'::text)
         Rows Removed by Filter: 68
         ->  Nested Loop Left Join  (cost=306.16..6012.49 rows=11 width=239) (actual time=13.598..16.084 rows=70 loops=1)
               ->  Nested Loop  (cost=304.76..5766.71 rows=10 width=193) (actual time=13.452..14.486 rows=69 loops=1)
                     Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
                     Rows Removed by Join Filter: 11868
                     ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.004..0.082 rows=173 loops=1)
                     ->  Materialize  (cost=304.76..5732.05 rows=10 width=187) (actual time=0.051..0.062 rows=69 loops=173)
                           ->  Nested Loop  (cost=304.76..5732.00 rows=10 width=187) (actual time=8.880..9.682 rows=69 loops=1)
                                 Join Filter: (receiver.organisation_id = organisation.id)
                                 Rows Removed by Join Filter: 3450
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.006 rows=51 loops=1)
                                 ->  Materialize  (cost=304.76..5707.62 rows=30 width=168) (actual time=0.098..0.169 rows=69 loops=51)
                                       ->  Hash Join  (cost=304.76..5707.47 rows=30 width=168) (actual time=4.996..8.266 rows=69 loops=1)
                                             Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                             ->  Nested Loop  (cost=245.58..5647.88 rows=30 width=168) (actual time=4.128..7.351 rows=69 loops=1)
                                                   Join Filter: (receiver.model_id = device_model.id)
                                                   Rows Removed by Join Filter: 1035
                                                   ->  Nested Loop  (cost=245.58..5639.48 rows=30 width=171) (actual time=4.118..7.014 rows=69 loops=1)
                                                         ->  Hash Join  (cost=245.30..5474.23 rows=30 width=156) (actual time=4.099..6.722 rows=69 loops=1)
                                                               Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                               ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..5220.91 rows=2213 width=52) (actual time=0.073..2.206 rows=2743 loops=1)
                                                                     Index Cond: (("timestamp" >= '2013-04-02 05:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-04-02 07:00:00+00'::timestamp with time zone))
                                                               ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.983..3.983 rows=282 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                     ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.221..3.858 rows=282 loops=1)
                                                                           Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                           ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..1.688 rows=5710 loops=1)
                                                                           ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.190..0.190 rows=45 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                 ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.071..0.173 rows=45 loops=1)
                                                                                       ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.037..0.063 rows=1 loops=1)
                                                                                             Hash Cond: (installation.project_id = receiver_project.id)
                                                                                             ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.012 rows=110 loops=1)
                                                                                             ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.019..0.019 rows=1 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                   ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.018 rows=1 loops=1)
                                                                                                         Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                         Rows Removed by Filter: 74
                                                                                       ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.032..0.094 rows=45 loops=1)
                                                                                             Recheck Cond: (installation_id = installation.id)
                                                                                             ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.015..0.015 rows=45 loops=1)
                                                                                                   Index Cond: (installation_id = installation.id)
                                                         ->  Index Scan using device_pkey on device receiver  (cost=0.28..5.50 rows=1 width=31) (actual time=0.003..0.003 rows=1 loops=69)
                                                               Index Cond: (id = receiver_deployment.receiver_id)
                                                   ->  Materialize  (cost=0.00..1.24 rows=16 width=13) (actual time=0.000..0.002 rows=16 loops=69)
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.003 rows=16 loops=1)
                                             ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.854..0.854 rows=1519 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                   ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.003..0.520 rows=1519 loops=1)
               ->  Nested Loop Left Join  (cost=1.41..24.57 rows=1 width=46) (actual time=0.019..0.022 rows=1 loops=69)
                     ->  Nested Loop Left Join  (cost=1.12..19.28 rows=1 width=46) (actual time=0.015..0.018 rows=1 loops=69)
                           ->  Nested Loop Left Join  (cost=0.84..13.72 rows=1 width=22) (actual time=0.011..0.013 rows=1 loops=69)
                                 ->  Nested Loop Left Join  (cost=0.56..8.36 rows=1 width=22) (actual time=0.008..0.009 rows=1 loops=69)
                                       ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.52 rows=1 width=22) (actual time=0.004..0.005 rows=1 loops=69)
                                             Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                       ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.002..0.003 rows=1 loops=70)
                                             Index Cond: (id = sensor.tag_id)
                                             Heap Fetches: 0
                                 ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=70)
                                       Index Cond: (tag.id = tag_id)
                           ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.003..0.003 rows=1 loops=70)
                                 Index Cond: (surgery.release_id = id)
                     ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=70)
                           Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.003..0.003 rows=1 loops=70)
               Index Cond: (animal.species_id = id)
 Total runtime: 16.795 ms
(70 rows)

-- Test Case 25 - 2716283 ^ 464 ^ 17098775 -> 4 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and spcode = '37346004'
  and timestamp between '2012-03-01' and '2013-09-01'
limit 100;
                                                                                                                           QUERY PLAN                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=347855.87..643470.25 rows=100 width=279) (actual time=19874.654..19875.372 rows=4 loops=1)
   ->  Hash Left Join  (cost=347855.87..1456409.78 rows=375 width=279) (actual time=19874.651..19875.369 rows=4 loops=1)
         Hash Cond: (animal.species_id = species.id)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37346004'::text)
         Rows Removed by Filter: 902902
         ->  Hash Left Join  (cost=345367.67..1447217.10 rows=75008 width=239) (actual time=3395.423..19304.232 rows=902906 loops=1)
               Hash Cond: (animal_release.animal_id = animal.id)
               ->  Hash Left Join  (cost=345247.15..1445783.94 rows=75008 width=239) (actual time=3393.180..18704.763 rows=902906 loops=1)
                     Hash Cond: (surgery.release_id = animal_release.id)
                     ->  Hash Left Join  (cost=345045.95..1444270.10 rows=75008 width=215) (actual time=3389.972..18110.265 rows=902906 loops=1)
                           Hash Cond: (tag.id = surgery.tag_id)
                           ->  Hash Left Join  (cost=344900.68..1442123.76 rows=75008 width=215) (actual time=3387.568..17574.623 rows=902838 loops=1)
                                 Hash Cond: (sensor.tag_id = tag.id)
                                 ->  Hash Left Join  (cost=344625.07..1440254.23 rows=75008 width=215) (actual time=3384.275..16963.460 rows=902838 loops=1)
                                       Hash Cond: ((valid_detection.transmitter_id)::text = (sensor.transmitter_id)::text)
                                       ->  Hash Join  (cost=344444.67..1437473.06 rows=70502 width=193) (actual time=3381.220..16215.027 rows=902521 loops=1)
                                             Hash Cond: (receiver_download_file.requesting_user_id = sec_user.id)
                                             ->  Hash Join  (cost=344433.77..1436488.52 rows=71634 width=187) (actual time=3381.068..15727.298 rows=902521 loops=1)
                                                   Hash Cond: (receiver.organisation_id = organisation.id)
                                                   ->  Hash Join  (cost=344431.63..1434962.82 rows=215258 width=168) (actual time=3381.025..15269.957 rows=902521 loops=1)
                                                         Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                                         ->  Hash Join  (cost=344372.45..1431943.84 rows=215258 width=168) (actual time=3380.271..14762.140 rows=902521 loops=1)
                                                               Hash Cond: (receiver.model_id = device_model.id)
                                                               ->  Hash Join  (cost=344371.09..1428982.69 rows=215258 width=171) (actual time=3380.251..14301.478 rows=902521 loops=1)
                                                                     Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                                     ->  Bitmap Heap Scan on valid_detection  (cost=343912.28..1365833.71 rows=16144362 width=52) (actual time=3373.517..11564.352 rows=16316319 loops=1)
                                                                           Recheck Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                           Rows Removed by Index Recheck: 501034
                                                                           ->  Bitmap Index Scan on valid_timestamp_index  (cost=0.00..339876.18 rows=16144362 width=0) (actual time=3372.014..3372.014 rows=16316319 loops=1)
                                                                                 Index Cond: (("timestamp" >= '2012-03-01 00:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-09-01 00:00:00+00'::timestamp with time zone))
                                                                     ->  Hash  (cost=457.86..457.86 rows=76 width=135) (actual time=5.875..5.875 rows=282 loops=1)
                                                                           Buckets: 1024  Batches: 1  Memory Usage: 43kB
                                                                           ->  Hash Join  (cost=244.73..457.86 rows=76 width=135) (actual time=3.424..5.731 rows=282 loops=1)
                                                                                 Hash Cond: (receiver.id = receiver_deployment.receiver_id)
                                                                                 ->  Seq Scan on device receiver  (cost=0.00..185.27 rows=7227 width=31) (actual time=0.002..0.959 rows=7227 loops=1)
                                                                                 ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.412..3.412 rows=282 loops=1)
                                                                                       Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                                       ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.173..3.272 rows=282 loops=1)
                                                                                             Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                                             ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.001..0.776 rows=5710 loops=1)
                                                                                             ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.142..0.142 rows=45 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                                   ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.065..0.126 rows=45 loops=1)
                                                                                                         ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.036..0.062 rows=1 loops=1)
                                                                                                               Hash Cond: (installation.project_id = receiver_project.id)
                                                                                                               ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.003..0.016 rows=110 loops=1)
                                                                                                               ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.017..0.017 rows=1 loops=1)
                                                                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                                     ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.007..0.016 rows=1 loops=1)
                                                                                                                           Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                                           Rows Removed by Filter: 74
                                                                                                         ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.025..0.047 rows=45 loops=1)
                                                                                                               Recheck Cond: (installation_id = installation.id)
                                                                                                               ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.016..0.016 rows=45 loops=1)
                                                                                                                     Index Cond: (installation_id = installation.id)
                                                               ->  Hash  (cost=1.16..1.16 rows=16 width=13) (actual time=0.008..0.008 rows=16 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                     ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.001..0.004 rows=16 loops=1)
                                                         ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.745..0.745 rows=1519 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                               ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.002..0.388 rows=1519 loops=1)
                                                   ->  Hash  (cost=1.51..1.51 rows=51 width=35) (actual time=0.034..0.034 rows=51 loops=1)
                                                         Buckets: 1024  Batches: 1  Memory Usage: 4kB
                                                         ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.002..0.019 rows=51 loops=1)
                                             ->  Hash  (cost=8.73..8.73 rows=173 width=22) (actual time=0.139..0.139 rows=173 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 10kB
                                                   ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.093 rows=173 loops=1)
                                       ->  Hash  (cost=114.07..114.07 rows=5307 width=22) (actual time=3.030..3.030 rows=5307 loops=1)
                                             Buckets: 1024  Batches: 1  Memory Usage: 291kB
                                             ->  Seq Scan on sensor  (cost=0.00..114.07 rows=5307 width=22) (actual time=0.018..1.711 rows=5307 loops=1)
                                 ->  Hash  (cost=185.27..185.27 rows=7227 width=8) (actual time=3.273..3.273 rows=7227 loops=1)
                                       Buckets: 1024  Batches: 1  Memory Usage: 283kB
                                       ->  Seq Scan on device tag  (cost=0.00..185.27 rows=7227 width=8) (actual time=0.004..1.522 rows=7227 loops=1)
                           ->  Hash  (cost=96.23..96.23 rows=3923 width=16) (actual time=2.380..2.380 rows=3923 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 184kB
                                 ->  Seq Scan on surgery  (cost=0.00..96.23 rows=3923 width=16) (actual time=0.018..1.270 rows=3923 loops=1)
                     ->  Hash  (cost=152.20..152.20 rows=3920 width=32) (actual time=3.180..3.180 rows=3920 loops=1)
                           Buckets: 1024  Batches: 1  Memory Usage: 241kB
                           ->  Seq Scan on animal_release  (cost=0.00..152.20 rows=3920 width=32) (actual time=0.014..1.907 rows=3920 loops=1)
               ->  Hash  (cost=70.23..70.23 rows=4023 width=16) (actual time=2.218..2.218 rows=4023 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 189kB
                     ->  Seq Scan on animal  (cost=0.00..70.23 rows=4023 width=16) (actual time=0.006..1.027 rows=4023 loops=1)
         ->  Hash  (cost=1672.87..1672.87 rows=36587 width=56) (actual time=45.665..45.665 rows=36587 loops=1)
               Buckets: 2048  Batches: 4  Memory Usage: 824kB
               ->  Seq Scan on species  (cost=0.00..1672.87 rows=36587 width=56) (actual time=0.015..27.906 rows=36587 loops=1)
 Total runtime: 19875.697 ms
(86 rows)

-- Test Case 26 - 2716283 ^ 3913743 ^ 3129 -> 52 rows
explain analyze select * from detection_extract_test_view
where project = 'AATAMS Heron Island'
  and spcode = '37018030'
  and timestamp between '2013-04-02 05:00:00+00' and '2013-04-02 07:00:00+00'
limit 100;
                                                                                                                  QUERY PLAN                                                                                                                   
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=306.45..6075.51 rows=1 width=279) (actual time=13.427..16.474 rows=52 loops=1)
   ->  Nested Loop Left Join  (cost=306.45..6075.51 rows=1 width=279) (actual time=13.426..16.458 rows=52 loops=1)
         Filter: ((COALESCE(species.spcode, ''::character varying))::text = '37018030'::text)
         Rows Removed by Filter: 18
         ->  Nested Loop Left Join  (cost=306.16..6012.49 rows=11 width=239) (actual time=13.233..15.773 rows=70 loops=1)
               ->  Nested Loop  (cost=304.76..5766.71 rows=10 width=193) (actual time=13.169..14.236 rows=69 loops=1)
                     Join Filter: (receiver_download_file.requesting_user_id = sec_user.id)
                     Rows Removed by Join Filter: 11868
                     ->  Seq Scan on sec_user  (cost=0.00..8.73 rows=173 width=22) (actual time=0.005..0.081 rows=173 loops=1)
                     ->  Materialize  (cost=304.76..5732.05 rows=10 width=187) (actual time=0.049..0.060 rows=69 loops=173)
                           ->  Nested Loop  (cost=304.76..5732.00 rows=10 width=187) (actual time=8.527..9.332 rows=69 loops=1)
                                 Join Filter: (receiver.organisation_id = organisation.id)
                                 Rows Removed by Join Filter: 3450
                                 ->  Seq Scan on organisation  (cost=0.00..1.51 rows=51 width=35) (actual time=0.001..0.008 rows=51 loops=1)
                                 ->  Materialize  (cost=304.76..5707.62 rows=30 width=168) (actual time=0.098..0.162 rows=69 loops=51)
                                       ->  Hash Join  (cost=304.76..5707.47 rows=30 width=168) (actual time=4.979..7.917 rows=69 loops=1)
                                             Hash Cond: (valid_detection.receiver_download_id = receiver_download_file.id)
                                             ->  Nested Loop  (cost=245.58..5647.88 rows=30 width=168) (actual time=4.104..6.996 rows=69 loops=1)
                                                   Join Filter: (receiver.model_id = device_model.id)
                                                   Rows Removed by Join Filter: 1035
                                                   ->  Nested Loop  (cost=245.58..5639.48 rows=30 width=171) (actual time=4.093..6.663 rows=69 loops=1)
                                                         ->  Hash Join  (cost=245.30..5474.23 rows=30 width=156) (actual time=4.076..6.376 rows=69 loops=1)
                                                               Hash Cond: (valid_detection.receiver_deployment_id = receiver_deployment.id)
                                                               ->  Index Scan using valid_timestamp_index on valid_detection  (cost=0.56..5220.91 rows=2213 width=52) (actual time=0.074..1.843 rows=2743 loops=1)
                                                                     Index Cond: (("timestamp" >= '2013-04-02 05:00:00+00'::timestamp with time zone) AND ("timestamp" <= '2013-04-02 07:00:00+00'::timestamp with time zone))
                                                               ->  Hash  (cost=243.78..243.78 rows=76 width=120) (actual time=3.977..3.977 rows=282 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 38kB
                                                                     ->  Hash Join  (cost=33.51..243.78 rows=76 width=120) (actual time=0.224..3.848 rows=282 loops=1)
                                                                           Hash Cond: (receiver_deployment.station_id = installation_station.id)
                                                                           ->  Seq Scan on receiver_deployment  (cost=0.00..188.10 rows=5710 width=24) (actual time=0.002..1.687 rows=5710 loops=1)
                                                                           ->  Hash  (cost=33.18..33.18 rows=26 width=104) (actual time=0.192..0.192 rows=45 loops=1)
                                                                                 Buckets: 1024  Batches: 1  Memory Usage: 6kB
                                                                                 ->  Nested Loop  (cost=4.81..33.18 rows=26 width=104) (actual time=0.073..0.175 rows=45 loops=1)
                                                                                       ->  Hash Join  (cost=1.95..5.47 rows=1 width=63) (actual time=0.037..0.062 rows=1 loops=1)
                                                                                             Hash Cond: (installation.project_id = receiver_project.id)
                                                                                             ->  Seq Scan on installation  (cost=0.00..3.10 rows=110 width=32) (actual time=0.002..0.017 rows=110 loops=1)
                                                                                             ->  Hash  (cost=1.94..1.94 rows=1 width=39) (actual time=0.020..0.020 rows=1 loops=1)
                                                                                                   Buckets: 1024  Batches: 1  Memory Usage: 1kB
                                                                                                   ->  Seq Scan on project receiver_project  (cost=0.00..1.94 rows=1 width=39) (actual time=0.008..0.017 rows=1 loops=1)
                                                                                                         Filter: ((name)::text = 'AATAMS Heron Island'::text)
                                                                                                         Rows Removed by Filter: 74
                                                                                       ->  Bitmap Heap Scan on installation_station  (cost=2.86..27.52 rows=19 width=57) (actual time=0.032..0.092 rows=45 loops=1)
                                                                                             Recheck Cond: (installation_id = installation.id)
                                                                                             ->  Bitmap Index Scan on installation_station_installation_id_index  (cost=0.00..2.86 rows=19 width=0) (actual time=0.015..0.015 rows=45 loops=1)
                                                                                                   Index Cond: (installation_id = installation.id)
                                                         ->  Index Scan using device_pkey on device receiver  (cost=0.28..5.50 rows=1 width=31) (actual time=0.003..0.003 rows=1 loops=69)
                                                               Index Cond: (id = receiver_deployment.receiver_id)
                                                   ->  Materialize  (cost=0.00..1.24 rows=16 width=13) (actual time=0.000..0.002 rows=16 loops=69)
                                                         ->  Seq Scan on device_model  (cost=0.00..1.16 rows=16 width=13) (actual time=0.002..0.007 rows=16 loops=1)
                                             ->  Hash  (cost=40.19..40.19 rows=1519 width=16) (actual time=0.862..0.862 rows=1519 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 72kB
                                                   ->  Seq Scan on receiver_download_file  (cost=0.00..40.19 rows=1519 width=16) (actual time=0.004..0.519 rows=1519 loops=1)
               ->  Nested Loop Left Join  (cost=1.41..24.57 rows=1 width=46) (actual time=0.018..0.021 rows=1 loops=69)
                     ->  Nested Loop Left Join  (cost=1.12..19.28 rows=1 width=46) (actual time=0.015..0.017 rows=1 loops=69)
                           ->  Nested Loop Left Join  (cost=0.84..13.72 rows=1 width=22) (actual time=0.011..0.013 rows=1 loops=69)
                                 ->  Nested Loop Left Join  (cost=0.56..8.36 rows=1 width=22) (actual time=0.008..0.009 rows=1 loops=69)
                                       ->  Index Scan using transmitter_id_index on sensor  (cost=0.28..5.52 rows=1 width=22) (actual time=0.004..0.005 rows=1 loops=69)
                                             Index Cond: ((valid_detection.transmitter_id)::text = (transmitter_id)::text)
                                       ->  Index Only Scan using device_pkey on device tag  (cost=0.28..2.84 rows=1 width=8) (actual time=0.002..0.002 rows=1 loops=70)
                                             Index Cond: (id = sensor.tag_id)
                                             Heap Fetches: 0
                                 ->  Index Scan using tag_id_index on surgery  (cost=0.28..5.34 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=70)
                                       Index Cond: (tag.id = tag_id)
                           ->  Index Scan using animal_release_pkey on animal_release  (cost=0.28..5.55 rows=1 width=32) (actual time=0.002..0.003 rows=1 loops=70)
                                 Index Cond: (surgery.release_id = id)
                     ->  Index Scan using animal_pkey on animal  (cost=0.28..5.28 rows=1 width=16) (actual time=0.003..0.003 rows=1 loops=70)
                           Index Cond: (animal_release.animal_id = id)
         ->  Index Scan using species_pkey on species  (cost=0.29..5.71 rows=1 width=56) (actual time=0.003..0.003 rows=1 loops=70)
               Index Cond: (animal.species_id = id)
 Total runtime: 16.803 ms
(70 rows)

\q
